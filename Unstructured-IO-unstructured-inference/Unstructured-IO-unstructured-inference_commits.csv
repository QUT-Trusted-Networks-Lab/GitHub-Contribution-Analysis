Hash,Commit Message,Author Name,Author Email,Committor Name,Committor Email,Author Date,Author Timezone,Committor Date,Committor Timezone,in_main_branch,merge,modified_files,parents,deletions,insertions,lines,files,dmm_unit_size,dmm_unit_complexity,dmm_unit_interfacing
49303095b74581cf1a6d9b27f1da4ba54fbfb8f5,Initial commit,Matt Robinson,mthw.wm.robinson@gmail.com,GitHub,noreply@github.com,2022-10-18 10:02:34-04:00,14400,2022-10-18 10:02:34-04:00,14400,True,False,"['.gitignore', 'LICENSE', 'README.md']",[],0,332,332,3,,,
5df3bec78d706cb6bcd0e1c083efac71a6fc8923,Public release,Alan Bertl,alan@unstructured.io,Alan Bertl,alan@unstructured.io,2022-12-21 12:48:16-06:00,21600,2022-12-21 12:48:16-06:00,21600,True,False,"['dependabot.yml', 'ci.yml', '.gitignore', '.gitkeep', 'CHANGELOG.md', 'Makefile', 'README.md', 'Dockerfile', 'unstructured_logo.png', 'base.in', 'base.txt', 'dev.in', 'dev.txt', 'test.in', 'test.txt', 'loremipsum.pdf', 'dl-models.sh', 'docker-build.sh', 'shellcheck.sh', 'version-sync.sh', 'setup.cfg', 'setup.py', 'test_layout.py', 'test_detectron2.py', 'test_model.py', 'test_tesseract.py', 'test_api.py', '__init__.py', '__version__.py', 'api.py', '__init__.py', 'layout.py', 'logger.py', '__init__.py', 'detectron2.py', 'tesseract.py']",['49303095b74581cf1a6d9b27f1da4ba54fbfb8f5'],2,1634,1636,36,0.6812080536912751,0.8355704697986577,0.7181208053691275
76ea1fe99ff3c7c49fcd4d6332367f9ef3014a2a,Make img link absolute (#2),qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2022-12-21 17:34:30-06:00,21600,2022-12-21 17:34:30-06:00,21600,True,False,['README.md'],['5df3bec78d706cb6bcd0e1c083efac71a6fc8923'],1,5,6,1,,,
5fe2922479dfa3280726ace858746b5c28233804,"chore: store models on hf (#3)

Added code to download oer-checkbox model from a public repo on huggingface.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2022-12-23 10:24:15-06:00,21600,2022-12-23 10:24:15-06:00,21600,True,False,"['.gitkeep', 'CHANGELOG.md', 'Makefile', 'Dockerfile', 'base.in', 'base.txt', 'dev.txt', 'test.txt', 'dl-models.sh', 'docker-build.sh', 'setup.py', 'test_model.py', 'test_api.py', '__init__.py', '__version__.py', '__init__.py']",['76ea1fe99ff3c7c49fcd4d6332367f9ef3014a2a'],39,74,113,16,0.9444444444444444,1.0,0.9444444444444444
1b1507da6053bc2081269c6cbaabaf792a2604c0,"chore: logger should not be setting up a BasicConfig (#4)

* feat: remove logger config

* doc: changelog and version",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2022-12-23 12:53:10-05:00,18000,2022-12-23 12:53:10-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py', 'logger.py', 'detectron2.py', 'tesseract.py']",['5fe2922479dfa3280726ace858746b5c28233804'],23,7,30,6,0.0,0.0,0.0
605c1f2dd9898077404b1e932420146549d51afc,"feat: Refactor for local inference (#5)

Small factorization, primarily moving some of the api processing code out to where it can be reused.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-01-03 13:38:07-06:00,21600,2023-01-03 13:38:07-06:00,21600,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_model.py', '__version__.py', 'api.py', 'layout.py', '__init__.py']",['1b1507da6053bc2081269c6cbaabaf792a2604c0'],28,109,137,7,0.35714285714285715,1.0,0.25
b8be2e2ca370f9b84d8c7efb5a3615c3669a8803,"chore: remove detectron from setup.py (#6)

Having a non-pip dependency prevents unstructured-inference from being installed as a package from pypi, so this PR removes detectron2 from the setup.py dependencies. Also removed the code to fail the install if torch isn't installed - torch will be installed with layoutparser, and will be present when the user builds Detectron2 from source.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-01-04 11:31:59-06:00,21600,2023-01-04 11:31:59-06:00,21600,True,False,"['CHANGELOG.md', 'README.md', 'setup.py', '__version__.py']",['605c1f2dd9898077404b1e932420146549d51afc'],14,19,33,4,,,
10fca981ac5221cf2b51bce98ef0e1659edd890b,"chore(deps-dev): bump ipython from 8.7.0 to 8.8.0 in /requirements (#9)

Bumps [ipython](https://github.com/ipython/ipython) from 8.7.0 to 8.8.0.
- [Release notes](https://github.com/ipython/ipython/releases)
- [Commits](https://github.com/ipython/ipython/compare/8.7.0...8.8.0)

---
updated-dependencies:
- dependency-name: ipython
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-09 11:01:35-05:00,18000,2023-01-09 11:01:35-05:00,18000,True,False,['dev.txt'],['b8be2e2ca370f9b84d8c7efb5a3615c3669a8803'],22,4,26,1,,,
79b147df464194a74fb5f0ab0bb2cb7d179392a9,"chore: docker tweaks for repo consistency (#7)

Tweaks to Dockerfile / make commands to be more consistent with
other Unstructured repos.",cragwolfe,crag@unstructured.io,GitHub,noreply@github.com,2023-01-09 09:43:42-08:00,28800,2023-01-09 09:43:42-08:00,28800,True,False,"['Dockerfile', 'Makefile', 'docker-build.sh']",['10fca981ac5221cf2b51bce98ef0e1659edd890b'],7,18,25,3,,,
1b6aaddaa4cace7178296849fa70fa9918a44e0f,"feat: ocr when too many chars unrecognized (#8)

Certain PDF documents have text blocks within their layout that contain text, but the text contains / consists of unrecognized characters, represented in the text as (cid:n) where n is an integer.

Current logic accepts whatever text is present, only applying OCR in the case the layout text is None. This PR changes the logic to also apply OCR in the case that > 50% of the characters are unrecognized.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-01-09 12:22:27-06:00,21600,2023-01-09 12:22:27-06:00,21600,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py']",['79b147df464194a74fb5f0ab0bb2cb7d179392a9'],5,69,74,4,1.0,1.0,1.0
b8238fe0cb5a20e75be48af668c0ee36dbab4f07,"feat: process images (#11)

Adds ability to process images as single page documents. Uses mostly the same path as processing a pdf, but uses a null layout (since an image won't provide a pdf layout) and does not filter layout text blocks using a bounding box to discover text (because there are no layout text blocks).",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-01-11 14:27:09-06:00,21600,2023-01-11 14:27:09-06:00,21600,True,False,"['CHANGELOG.md', 'loremipsum.jpg', 'loremipsum.png', 'test_layout.py', '__version__.py', 'layout.py']",['1b6aaddaa4cace7178296849fa70fa9918a44e0f'],17,84,101,6,0.9347826086956522,0.9347826086956522,0.41304347826086957
a21325f6894bf213156a28f073e0dcdd7030811e,"chore: cut release for image processing (#13)

- Added is_image flag for process_data_with_model and process_file_with_model
- Added support for the above in the API
- Added testing for all of the above",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-01-12 13:21:54-06:00,21600,2023-01-12 13:21:54-06:00,21600,True,False,"['CHANGELOG.md', 'test_api.py', '__version__.py', 'api.py', 'layout.py']",['b8238fe0cb5a20e75be48af668c0ee36dbab4f07'],25,41,66,5,0.5333333333333333,0.7333333333333333,0.8
95d797ff7888c04352af5c83b0ae71afa1c910d8,build(deps): pin opencv-python for linux compatibility (#18),Matt Robinson,mrobinson@unstructured.io,GitHub,noreply@github.com,2023-01-13 17:03:11-05:00,18000,2023-01-13 17:03:11-05:00,18000,True,False,"['CHANGELOG.md', 'Makefile', 'base.in', 'base.txt', 'dev.txt', 'test.txt', 'setup.py', '__version__.py']",['a21325f6894bf213156a28f073e0dcdd7030811e'],23,46,69,8,,,
917bacbf9743ac5fb2b71a0871ab0ea7ebd8c508,"chore(deps): bump pytz from 2022.5 to 2022.7 in /requirements (#15)

* chore(deps): bump pytz from 2022.5 to 2022.7 in /requirements

Bumps [pytz](https://github.com/stub42/pytz) from 2022.5 to 2022.7.
- [Release notes](https://github.com/stub42/pytz/releases)
- [Commits](https://github.com/stub42/pytz/compare/release_2022.5...release_2022.7)

---
updated-dependencies:
- dependency-name: pytz
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>

* Update CHANGELOG.md

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: cragwolfe <crag@unstructured.io>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-13 22:27:29+00:00,0,2023-01-13 22:27:29+00:00,0,True,False,"['CHANGELOG.md', 'base.txt', '__version__.py']",['95d797ff7888c04352af5c83b0ae71afa1c910d8'],2,6,8,3,,,
3b952d09a6ea09815c97a6cceea91bad9711122e,"chore(deps): bump certifi from 2022.9.24 to 2022.12.7 in /requirements (#16)

Bumps [certifi](https://github.com/certifi/python-certifi) from 2022.9.24 to 2022.12.7.
- [Release notes](https://github.com/certifi/python-certifi/releases)
- [Commits](https://github.com/certifi/python-certifi/compare/2022.09.24...2022.12.07)

---
updated-dependencies:
- dependency-name: certifi
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-13 14:39:13-08:00,28800,2023-01-13 14:39:13-08:00,28800,True,False,['base.txt'],['917bacbf9743ac5fb2b71a0871ab0ea7ebd8c508'],1,1,2,1,,,
46bc2cc6fb88903e10a5068fa0453f72f57e0506,"chore(deps): bump fonttools from 4.37.4 to 4.38.0 in /requirements (#14)

Bumps [fonttools](https://github.com/fonttools/fonttools) from 4.37.4 to 4.38.0.
- [Release notes](https://github.com/fonttools/fonttools/releases)
- [Changelog](https://github.com/fonttools/fonttools/blob/main/NEWS.rst)
- [Commits](https://github.com/fonttools/fonttools/compare/4.37.4...4.38.0)

---
updated-dependencies:
- dependency-name: fonttools
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: cragwolfe <crag@unstructured.io>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-13 22:43:30+00:00,0,2023-01-13 22:43:30+00:00,0,True,False,['base.txt'],['3b952d09a6ea09815c97a6cceea91bad9711122e'],1,1,2,1,,,
5e016e6d67f2805332b8aea2b5b8fa0fcc989530,"chore(deps): bump pdf2image from 1.16.0 to 1.16.2 in /requirements (#17)

Bumps [pdf2image](https://github.com/Belval/pdf2image) from 1.16.0 to 1.16.2.
- [Release notes](https://github.com/Belval/pdf2image/releases)
- [Commits](https://github.com/Belval/pdf2image/compare/v1.16.0...v1.16.2)

---
updated-dependencies:
- dependency-name: pdf2image
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-13 22:48:00+00:00,0,2023-01-13 22:48:00+00:00,0,True,False,['base.txt'],['46bc2cc6fb88903e10a5068fa0453f72f57e0506'],1,1,2,1,,,
479f6377a2ddcfa63f8a6e14798944469ed13bb0,"chore(deps): bump huggingface-hub from 0.10.1 to 0.11.1 in /requirements (#25)

Bumps [huggingface-hub](https://github.com/huggingface/huggingface_hub) from 0.10.1 to 0.11.1.
- [Release notes](https://github.com/huggingface/huggingface_hub/releases)
- [Commits](https://github.com/huggingface/huggingface_hub/compare/v0.10.1...v0.11.1)

---
updated-dependencies:
- dependency-name: huggingface-hub
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-17 10:31:51-06:00,21600,2023-01-17 10:31:51-06:00,21600,True,False,['base.txt'],['5e016e6d67f2805332b8aea2b5b8fa0fcc989530'],1,1,2,1,,,
212129f4a2512e7ada2288fd8bc5733852442f47,"chore: use --load with docker buildx (#20)

Use --load which is necessary with buildx sometimes to be
able to run the image. E.g., in github CI.

Consistency with https://github.com/Unstructured-IO/pipeline-template/pull/10

Co-authored-by: qued <64741807+qued@users.noreply.github.com>",cragwolfe,crag@unstructured.io,GitHub,noreply@github.com,2023-01-17 08:41:21-08:00,28800,2023-01-17 10:41:21-06:00,21600,True,False,['docker-build.sh'],['479f6377a2ddcfa63f8a6e14798944469ed13bb0'],1,1,2,1,,,
e724d968eef81efba3d36cc941a87d137aea126e,"chore(deps): bump pillow from 9.2.0 to 9.4.0 in /requirements (#24)

Bumps [pillow](https://github.com/python-pillow/Pillow) from 9.2.0 to 9.4.0.
- [Release notes](https://github.com/python-pillow/Pillow/releases)
- [Changelog](https://github.com/python-pillow/Pillow/blob/main/CHANGES.rst)
- [Commits](https://github.com/python-pillow/Pillow/compare/9.2.0...9.4.0)

---
updated-dependencies:
- dependency-name: pillow
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: qued <64741807+qued@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-17 10:44:39-06:00,21600,2023-01-17 10:44:39-06:00,21600,True,False,['base.txt'],['212129f4a2512e7ada2288fd8bc5733852442f47'],1,1,2,1,,,
df16389270f51f9294bb9e4558ca0813f84e7d20,"chore(deps): bump portalocker from 2.5.1 to 2.6.0 in /requirements (#23)

Bumps [portalocker](https://github.com/WoLpH/portalocker) from 2.5.1 to 2.6.0.
- [Release notes](https://github.com/WoLpH/portalocker/releases)
- [Changelog](https://github.com/wolph/portalocker/blob/develop/CHANGELOG.rst)
- [Commits](https://github.com/WoLpH/portalocker/compare/v2.5.1...v2.6.0)

---
updated-dependencies:
- dependency-name: portalocker
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: qued <64741807+qued@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-17 10:51:59-06:00,21600,2023-01-17 10:51:59-06:00,21600,True,False,['base.txt'],['e724d968eef81efba3d36cc941a87d137aea126e'],1,1,2,1,,,
02f7c25c270e73a000cd1b1effb9df0196dc0ae1,"chore(deps): bump wand from 0.6.10 to 0.6.11 in /requirements (#22)

Bumps [wand](https://github.com/emcconville/wand) from 0.6.10 to 0.6.11.
- [Release notes](https://github.com/emcconville/wand/releases)
- [Changelog](https://github.com/emcconville/wand/blob/master/docs/changes.rst)
- [Commits](https://github.com/emcconville/wand/compare/0.6.10...0.6.11)

---
updated-dependencies:
- dependency-name: wand
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: qued <64741807+qued@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-17 16:57:00+00:00,0,2023-01-17 16:57:00+00:00,0,True,False,['base.txt'],['df16389270f51f9294bb9e4558ca0813f84e7d20'],1,1,2,1,,,
4bd8c118fda3918072663404ebc6a321d64c1907,"chore: raise file not found for images (#19)

When trying to open an image in the from_image_file method, trying to open an empty filename would produce some non-helpful error, when ideally it should raise FileNotFoundError. This PR ensures that a FileNotFoundError is raised.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-01-17 11:47:46-06:00,21600,2023-01-17 11:47:46-06:00,21600,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py']",['02f7c25c270e73a000cd1b1effb9df0196dc0ae1'],4,22,26,4,1.0,1.0,0.5
96c709a588a706a0319fa5dcf91f8f63a4e71657,chore: graceful exit if sed is an old version (#26),gokullan,84223229+gokullan@users.noreply.github.com,GitHub,noreply@github.com,2023-01-17 23:37:37+05:30,-19800,2023-01-17 18:07:37+00:00,0,True,False,['version-sync.sh'],['4bd8c118fda3918072663404ebc6a321d64c1907'],0,10,10,1,,,
609f74ef9b38ad412ed6366331a97d0ecd32f441,"infra: Add PIP_VERSION ARG in dockerfile (#12)

Adding PIP_VERSION as a dockerfile ARG. Docker image has been built successfully locally with this update.

Reference: https://unstructured-ai.atlassian.net/browse/CORE-512",Syed Tamzid,31880414+stamzid@users.noreply.github.com,GitHub,noreply@github.com,2023-01-19 06:55:32+06:00,-21600,2023-01-18 16:55:32-08:00,28800,True,False,['Dockerfile'],['96c709a588a706a0319fa5dcf91f8f63a4e71657'],3,5,8,1,,,
2973e0bb0d114772201e26703c45250c59dc9ab5,"chore(deps): bump pdfminer-six from 20220524 to 20221105 in /requirements (#31)

* chore(deps): bump pdfminer-six in /requirements

Bumps [pdfminer-six](https://github.com/pdfminer/pdfminer.six) from 20220524 to 20221105.
- [Release notes](https://github.com/pdfminer/pdfminer.six/releases)
- [Changelog](https://github.com/pdfminer/pdfminer.six/blob/master/CHANGELOG.md)
- [Commits](https://github.com/pdfminer/pdfminer.six/commits)

---
updated-dependencies:
- dependency-name: pdfminer-six
  dependency-type: direct:production
  update-type: version-update:semver-major
...

Signed-off-by: dependabot[bot] <support@github.com>

* Also bump pdfplumber

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: Alan Bertl <alan@unstructured.io>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-23 09:46:38-06:00,21600,2023-01-23 09:46:38-06:00,21600,True,False,['base.txt'],['609f74ef9b38ad412ed6366331a97d0ecd32f441'],2,2,4,1,,,
ea11d6debea26b77fb3efd55a44f3e4fb2eb1613,"chore(deps): bump charset-normalizer from 2.1.1 to 3.0.1 in /requirements (#35)

* chore(deps): bump charset-normalizer in /requirements

Bumps [charset-normalizer](https://github.com/Ousret/charset_normalizer) from 2.1.1 to 3.0.1.
- [Release notes](https://github.com/Ousret/charset_normalizer/releases)
- [Changelog](https://github.com/Ousret/charset_normalizer/blob/master/CHANGELOG.md)
- [Upgrade guide](https://github.com/Ousret/charset_normalizer/blob/master/UPGRADE.md)
- [Commits](https://github.com/Ousret/charset_normalizer/compare/2.1.1...3.0.1)

---
updated-dependencies:
- dependency-name: charset-normalizer
  dependency-type: direct:production
  update-type: version-update:semver-major
...

Signed-off-by: dependabot[bot] <support@github.com>

* Also bump requests

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: Alan Bertl <alan@unstructured.io>
Co-authored-by: qued <64741807+qued@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-23 09:52:50-06:00,21600,2023-01-23 09:52:50-06:00,21600,True,False,['base.txt'],['2973e0bb0d114772201e26703c45250c59dc9ab5'],2,2,4,1,,,
ba7286898f43a5fd33ca8a2067973820294cda5c,"chore(deps): bump scipy from 1.9.2 to 1.10.0 in /requirements (#32)

Bumps [scipy](https://github.com/scipy/scipy) from 1.9.2 to 1.10.0.
- [Release notes](https://github.com/scipy/scipy/releases)
- [Commits](https://github.com/scipy/scipy/compare/v1.9.2...v1.10.0)

---
updated-dependencies:
- dependency-name: scipy
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-01-23 10:41:32-06:00,21600,2023-01-23 10:41:32-06:00,21600,True,False,['base.txt'],['ea11d6debea26b77fb3efd55a44f3e4fb2eb1613'],1,1,2,1,,,
c25f2cdef4bdae793191813612f17009b47cc025,"chore: update deps (#36)

Update dependencies through pip-compile.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-01-23 14:34:20-06:00,21600,2023-01-23 14:34:20-06:00,21600,True,False,"['base.txt', 'dev.txt', 'test.in', 'test.txt']",['ba7286898f43a5fd33ca8a2067973820294cda5c'],92,151,243,4,,,
9c2c6698fc956b1c2ced4162f8a57b558c3a1425,"chore: dl default model from huggingface (#30)

We've now seen cases where dropbox links are blacklisted, which prevent them from downloading the default detectron2 model. This PR changes the default model retrieval method to use huggingface (which already hosts the weights and config for the model). The code is also updated so getting the default model and a non-default model uses more of the same code.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-01-24 09:54:17-06:00,21600,2023-01-24 09:54:17-06:00,21600,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_detectron2.py', 'test_model.py', 'test_api.py', '__version__.py', 'api.py', 'layout.py', '__init__.py', 'base.py', 'detectron2.py']",['c25f2cdef4bdae793191813612f17009b47cc025'],72,91,163,11,0.0,1.0,1.0
fc3a6536fcb4a62a7358d922a76fb69191a43bfd,"refactor: generic model (#38)

Refactor of model code to make it less dependent on detectron2.

Creates an abstract model class UnstructuredModel, with inference triggered by calling the object. The class must be subclassed for each individual model type to at least guide the inference input to the right method (e.g. the detect method for detectron 2 models).

Detectron specific code has been moved to unstructured_inference.models.detectron2.

The code still uses layoutparser objects for convenience in the layout code preparing the input, and the output is assumed to be a layoutparser Layout object.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-01-30 08:52:46-06:00,21600,2023-01-30 08:52:46-06:00,21600,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_detectron2.py', 'test_model.py', 'test_api.py', 'test_utils.py', '__version__.py', 'layout.py', 'base.py', 'detectron2.py', 'unstructuredmodel.py', 'utils.py']",['9c2c6698fc956b1c2ced4162f8a57b558c3a1425'],154,290,444,12,1.0,1.0,1.0
5d8485903409095629fbc65d3f77bcb038698c6e,build(deps): bump dependency versions (#43),Matt Robinson,mrobinson@unstructured.io,GitHub,noreply@github.com,2023-01-30 10:01:22-05:00,18000,2023-01-30 15:01:22+00:00,0,True,False,"['Makefile', 'base.txt', 'dev.txt', 'test.txt']",['fc3a6536fcb4a62a7358d922a76fb69191a43bfd'],22,21,43,4,,,
297609fd4c58999dccdce333de48969d29c076d7,"feat: integration of YoloX for layout detection 

* feat: added YoloX model for layout detection, including tests for images and PDF inference
* docs: updated README with force_ocr and deleted comment inside test
---------

Co-authored-by: Alan Bertl <alan@unstructured.io>",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-02-01 16:34:39-06:00,21600,2023-02-01 16:34:39-06:00,21600,True,False,"['ci.yml', 'CHANGELOG.md', 'Makefile', 'README.md', 'base.txt', 'dev.txt', 'test.in', 'test.txt', 'empty-document.pdf', 'non-embedded.pdf', 'test-image.jpg', 'setup.py', 'test_tesseract.py', 'test_api.py', '__version__.py', 'api.py', 'layout.py', '__init__.py', 'yolox.py', 'visualize.py']",['5d8485903409095629fbc65d3f77bcb038698c6e'],17,909,926,20,0.3035230352303523,0.8048780487804879,0.2601626016260163
085c865f4a43e3f5a8c55f445c3cd9c238b78537,"feat: donut inference code, test and sample receipt (#44)

* feat: new script for donut inference

* feat: add sample receipt for donut inference test

receipt id: X51005337877.jpg
dataset: sroie-test

* chore: add dependiencies, logging and format

* chore: refactor logging and use donut config

* test: add 100% coverage tests for donut prediction

* docs: update CHANGELOG, bumped new version

* chore: update dependecies with pip-compile

* Empty commit

* fix: linting, File had no default value

* bug: type_i ignore for SpooledTemporaryFile

* fix: refactor for CI-lint

---------

Co-authored-by: Sebastian Laverde <sebastian@unstructured.io>",Sebastian Laverde Alfonso,lavmlk20201@gmail.com,GitHub,noreply@github.com,2023-02-06 15:43:21+01:00,-3600,2023-02-06 15:43:21+01:00,-3600,True,False,"['CHANGELOG.md', 'base.txt', 'dev.txt', 'test.txt', 'receipt-sample.jpg', 'setup.py', 'test_layout.py', 'test_donut.py', 'test_model.py', 'test_api.py', '__version__.py', 'api.py', 'layout.py', 'donut.py', 'yolox.py']",['297609fd4c58999dccdce333de48969d29c076d7'],25,172,197,15,0.41333333333333333,1.0,0.4
6d2205b3e6fc6aa9b5bc7f4a1839fd66fd40413e,"build(deps): weekly dependency update; reduce dependabot frequency (#48)

* build(deps): weekly dependency bumps; reduce dependabot frequency

* bump version",Matt Robinson,mrobinson@unstructured.io,GitHub,noreply@github.com,2023-02-06 10:58:37-05:00,18000,2023-02-06 10:58:37-05:00,18000,True,False,"['dependabot.yml', 'CHANGELOG.md', 'base.txt', 'dev.txt', 'test.txt', '__version__.py']",['085c865f4a43e3f5a8c55f445c3cd9c238b78537'],13,15,28,6,,,
71691273989ffd9818d91b8599ddeb5045bf3764,fix: remove duplicate load pdf (#52),qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-02-09 21:19:54-06:00,21600,2023-02-10 03:19:54+00:00,0,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py']",['6d2205b3e6fc6aa9b5bc7f4a1839fd66fd40413e'],3,3,6,3,0.0,0.0,1.0
0ede4235c9d8b2d6e073fb4b31d049ac0cec5b21,"chore(deps): bump cryptography from 39.0.0 to 39.0.1 in /requirements (#50)

Bumps [cryptography](https://github.com/pyca/cryptography) from 39.0.0 to 39.0.1.
- [Release notes](https://github.com/pyca/cryptography/releases)
- [Changelog](https://github.com/pyca/cryptography/blob/main/CHANGELOG.rst)
- [Commits](https://github.com/pyca/cryptography/compare/39.0.0...39.0.1)

---
updated-dependencies:
- dependency-name: cryptography
  dependency-type: direct:production
...

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: Benjamin Torres <benjats07@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-02-10 13:01:28-06:00,21600,2023-02-10 13:01:28-06:00,21600,True,False,['base.txt'],['71691273989ffd9818d91b8599ddeb5045bf3764'],1,1,2,1,,,
98036d5aa1dbacf3c89348b72c8df6dfe14107fa,"chore(deps-dev): Bump ipython from 8.9.0 to 8.10.0 in /requirements (#54)

Bumps [ipython](https://github.com/ipython/ipython) from 8.9.0 to 8.10.0.
- [Release notes](https://github.com/ipython/ipython/releases)
- [Commits](https://github.com/ipython/ipython/compare/8.9.0...8.10.0)

---
updated-dependencies:
- dependency-name: ipython
  dependency-type: direct:development
...

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-02-14 12:05:19-05:00,18000,2023-02-14 12:05:19-05:00,18000,True,False,['dev.txt'],['0ede4235c9d8b2d6e073fb4b31d049ac0cec5b21'],24,4,28,1,,,
af402ceca88da94771bdfbf51b931b2ceaffaaaf,"fix: catch len mismatch (#53)

Added an error message on length mismatch that points the user at a possible poppler install issue.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-02-14 11:34:11-06:00,21600,2023-02-14 17:34:11+00:00,0,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py']",['98036d5aa1dbacf3c89348b72c8df6dfe14107fa'],1,15,16,4,1.0,1.0,0.5555555555555556
90875b1a80ac9ff1a4faa1eeb8ea7d0eb421cf2a,"test: Reduced time for testing

* test: yolox extensive tests skipped

* fix: formatting code and version correction

* fix: removed unused imports

* perf: now OCR runs in paralell for YoloX model

* test: improving coverage

* fix: changed method of calling multiprocessing.Pool that conflicts with pytest

* test: added loremipsum with multiple pages

* test: added configuration for pytest

* fix: sometimes empty patches are produced during OCR

* fix: added except for empty patch during OCR

* refactor: use only one ONNX sesion to run YoloX

* style: add more specific exception on OCR

* fix: version sync",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-02-21 10:00:34-06:00,21600,2023-02-21 10:00:34-06:00,21600,True,False,"['CHANGELOG.md', 'Makefile', 'pytest.ini', 'loremipsum_multipage.pdf', 'test_yolox.py', 'test_api.py', 'api.py', 'layout.py', '__init__.py', 'yolox.py']",['af402ceca88da94771bdfbf51b931b2ceaffaaaf'],159,304,463,10,0.8111111111111111,0.9888888888888889,0.6333333333333333
f2ad4ae4d8d7fa30dd227fadd9fa5c57c7cddd3c,"refactor: layout and model (#56)

Updated so that YoloX uses the same code paths as other models.

* Removed code that was duplicating existing functions
* Integrated YoloX model into existing pipeline
    * This means YoloX now has an associated UnstructuredModel called UnstructuredYoloXModel
    * The output of YoloX inference is now a layoutparser Layout object, like the other UnstructuredModels so that it can integrate with the DocumentLayout, PageLayout, and LayoutElement classes
    * Other functionality is provided by the DocumentLayout, PageLayout, and LayoutElement classes
* Removed jsons dependency that was used in testing and updated deps. The dependency had a cool feature that allowed it to construct non-json-serializable classes from a json, but since that was being used to check content, content could be checked through another method.
* One piece of functionality that was in the code prior to this change and isn't now is the ability to create test artifacts that can be viewed for debugging purposes. This can be added back in, but artifacts must be created from the new outputs of the model (either a layoutparser Layout object or PageLayout object).
This PR also allows the capability to create a PageLayout with a fixed layout, i.e. the layout and location of text elements is specified at construction rather than inferred by model. This is useful for use cases where the layout of a particular form is known.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-02-24 19:32:17-06:00,21600,2023-02-24 19:32:17-06:00,21600,True,False,"['.gitignore', 'CHANGELOG.md', 'pytest.ini', 'base.txt', 'dev.txt', 'test.txt', 'setup.py', 'test_layout.py', 'test_yolox.py', 'test_api.py', 'test_visualization.py', '__version__.py', 'api.py', 'layout.py', 'base.py', 'yolox.py', 'visualize.py']",['90875b1a80ac9ff1a4faa1eeb8ea7d0eb421cf2a'],591,612,1203,17,1.0,1.0,0.38461538461538464
bae09484e4a45e32d8ba7643970e67941774602c,"chore(deps): Bump starlette from 0.22.0 to 0.25.0 in /requirements (#57)

* chore(deps): Bump starlette from 0.22.0 to 0.25.0 in /requirements

Bumps [starlette](https://github.com/encode/starlette) from 0.22.0 to 0.25.0.
- [Release notes](https://github.com/encode/starlette/releases)
- [Changelog](https://github.com/encode/starlette/blob/master/docs/release-notes.md)
- [Commits](https://github.com/encode/starlette/compare/0.22.0...0.25.0)

---
updated-dependencies:
- dependency-name: starlette
  dependency-type: direct:production
...

Signed-off-by: dependabot[bot] <support@github.com>

* Update base.txt

Updated fastapi

* Update base.txt

Corrected version from 0.92.9 to 0.92.0

---------

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: Benjamin Torres <benjats07@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-02-27 17:15:51+00:00,0,2023-02-27 17:15:51+00:00,0,True,False,[],['f2ad4ae4d8d7fa30dd227fadd9fa5c57c7cddd3c'],0,0,0,0,,,
d332b6553c8a6c8c1b3a668904fff6d9332e55b7,"fix: removes multithreading for OCR (#65)

* fix: removes multithreading for OCR

* fix: added missing execution provider for ONNX

* Removed unused dependencies

* fix: removed MockPool as Pool object isn't used anymore

* Version updated",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-03-02 20:48:03-06:00,21600,2023-03-03 13:48:03+11:00,-39600,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py', 'yolox.py']",['bae09484e4a45e32d8ba7643970e67941774602c'],17,10,27,5,1.0,0.0,0.0
237d69dae32292e141861b6d61210052487f33ed,"fix: removing control characters (#66)

Tesseract is putting some control characters in out_text, this commit just delete all of them

* Style correction

* Version sync",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-03-07 13:37:51-06:00,21600,2023-03-07 13:37:51-06:00,21600,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py']",['d332b6553c8a6c8c1b3a668904fff6d9332e55b7'],2,20,22,4,1.0,0.8571428571428571,0.8571428571428571
4814a72c7d81b54537dd70749acfd98a5a96d5b9,"fix: ocr when no elements are found in block (#68)

Stopgap fix for a bug that causes the parsing procedure to ignore pdf elements that are not contained within the bounds of an inferred/specified layout element.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-03-10 11:13:34-06:00,21600,2023-03-10 11:13:34-06:00,21600,True,False,"['CHANGELOG.md', 'version-sync.sh', 'test_layout.py', '__version__.py', 'layout.py']",['237d69dae32292e141861b6d61210052487f33ed'],2,25,27,5,0.0,1.0,0.5454545454545454
f23a13af897d8e7348b7948bd4b237f5bd0722e6,"Fix: RGBA images (#69)

* fix: correctly process RGBA images

* Added tests for RGBA",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-03-10 23:07:24-06:00,21600,2023-03-10 23:07:24-06:00,21600,True,False,"['CHANGELOG.md', 'README.md', 'RGBA_image.png', 'test_api.py', '__version__.py', 'layout.py']",['4814a72c7d81b54537dd70749acfd98a5a96d5b9'],3,23,26,6,1.0,1.0,1.0
99d96960722bb1c1a24f55dcfdc46de68431b483,"chore(deps): Bump actions/checkout from 2 to 3 (#61)

Bumps [actions/checkout](https://github.com/actions/checkout) from 2 to 3.
- [Release notes](https://github.com/actions/checkout/releases)
- [Changelog](https://github.com/actions/checkout/blob/main/CHANGELOG.md)
- [Commits](https://github.com/actions/checkout/compare/v2...v3)

---
updated-dependencies:
- dependency-name: actions/checkout
  dependency-type: direct:production
  update-type: version-update:semver-major
...

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: Benjamin Torres <benjats07@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-03-15 10:28:37-05:00,18000,2023-03-15 10:28:37-05:00,18000,True,False,['ci.yml'],['f23a13af897d8e7348b7948bd4b237f5bd0722e6'],1,1,2,1,,,
3b58bcf5728a388a0179a1df22439145ce992698,"feat: add logging config (#67)

Adds standard FastAPI logging config

---------

Co-authored-by: qued <64741807+qued@users.noreply.github.com>
Co-authored-by: Crag Wolfe <crag@unstructured.io>",natygyoon,59327875+natygyoon@users.noreply.github.com,GitHub,noreply@github.com,2023-03-16 09:54:47+09:00,-32400,2023-03-15 17:54:47-07:00,25200,True,False,"['Dockerfile', 'Makefile', 'logger_config.yaml']",['99d96960722bb1c1a24f55dcfdc46de68431b483'],2,46,48,3,,,
533fd471549152296396f84fe836c302e0a8dcef,"chore(deps): Bump onnxruntime from 1.13.1 to 1.14.1 in /requirements (#63)

* chore(deps): Bump onnxruntime from 1.13.1 to 1.14.1 in /requirements

Bumps [onnxruntime](https://github.com/microsoft/onnxruntime) from 1.13.1 to 1.14.1.
- [Release notes](https://github.com/microsoft/onnxruntime/releases)
- [Changelog](https://github.com/microsoft/onnxruntime/blob/main/docs/ReleaseManagement.md)
- [Commits](https://github.com/microsoft/onnxruntime/commits)

---
updated-dependencies:
- dependency-name: onnxruntime
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>

* chore(deps-dev): Bump ipython from 8.10.0 to 8.11.0 in /requirements (#60)

Bumps [ipython](https://github.com/ipython/ipython) from 8.10.0 to 8.11.0.
- [Release notes](https://github.com/ipython/ipython/releases)
- [Commits](https://github.com/ipython/ipython/compare/8.10.0...8.11.0)

---
updated-dependencies:
- dependency-name: ipython
  dependency-type: direct:development
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>

* chore(deps): Bump python-multipart from 0.0.5 to 0.0.6 in /requirements (#59)

Bumps [python-multipart](https://github.com/andrew-d/python-multipart) from 0.0.5 to 0.0.6.
- [Release notes](https://github.com/andrew-d/python-multipart/releases)
- [Changelog](https://github.com/andrew-d/python-multipart/blob/master/CHANGELOG.md)
- [Commits](https://github.com/andrew-d/python-multipart/compare/0.0.5...0.0.6)

---
updated-dependencies:
- dependency-name: python-multipart
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>

* chore(deps): Bump opencv-python in /requirements (#58)

Bumps [opencv-python](https://github.com/opencv/opencv-python) from 4.6.0.66 to 4.7.0.72.
- [Release notes](https://github.com/opencv/opencv-python/releases)
- [Commits](https://github.com/opencv/opencv-python/commits)

---
updated-dependencies:
- dependency-name: opencv-python
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>

---------

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: Benjamin Torres <benjats07@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-03-17 12:40:45-05:00,18000,2023-03-17 12:40:45-05:00,18000,True,False,"['base.txt', 'dev.txt']",['3b58bcf5728a388a0179a1df22439145ce992698'],27,7,34,2,,,
4a52922f5dadb536c87132b4a1af46bf8716c5ca,"feat: better image support (#71)

Updated the OCR logic to be aware of image elements.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-03-25 18:06:07-05:00,18000,2023-03-25 18:06:07-05:00,18000,True,False,"['CHANGELOG.md', 'base.txt', 'dev.txt', 'test.in', 'test.txt', 'loremipsum-flat.pdf', 'setup.cfg', 'test_layout.py', 'test_detectron2.py', '__version__.py', 'api.py', 'elements.py', 'layout.py', 'detectron2.py', 'donut.py', 'unstructuredmodel.py', 'yolox.py']",['533fd471549152296396f84fe836c302e0a8dcef'],211,436,647,17,0.06382978723404255,0.6595744680851063,0.4574468085106383
a50161625619791af7471cdf67c72d89f6ee2d8e,"Table processing (#72)

* First commit

* Table processing in document layout

* Platform x86_64 check'

* PaddleOCR integrated

* Deactivate show_log in paddleocr

* Utilize layout updates

* Formatting and linting

* Correct how linting ignores are accumulated

* Removed fitz

* Bug fixed in intersect_rect

* Bump to default 200 dpi

* Updated README with instructions to install paddleocr

* Fixed typo

* Deal with empty case

* Formatting

* Updates to pass flake8

* Added table test

* Fixed test

* Typing changes

* formatting for large fixture

* Up pixel to reflect new dpi

* Make table extraction opt-in

* Change content to check for

* Add install targets for paddleocr

* Add optional pip install for paddleocr

* Update README.md

Updated paddleocr installation instructions

* Remove unused functions

* New image for table testing

* Remove non-unique assignment case

* Correct slot_into_contains arguments

* Test for nms

* update fixtures

* Added test for nms

* fix for disable table extraction by default

* Revised test

* Update old tests

* reuse postprocess

* Additional tests

* More rect tests, extract_text_from_spans

* Remove unused code

* Align supercells test

* Updated removal supercell test

* header_supercell_tree test

* name change to forked paddleocr

* Updated installation and removel of a print statement

* tidied file

* Version update

* linting

* Updated test

* Changed Makefile

---------

Co-authored-by: Antonio Jimeno Yepes <antonio@unstructured.io>
Co-authored-by: Alan Bertl <alan@unstructured.io>",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-03-29 12:44:42+11:00,-39600,2023-03-29 12:44:42+11:00,-39600,True,False,"['CHANGELOG.md', 'Makefile', 'README.md', 'example_table.jpg', 'setup.cfg', 'setup.py', 'test_layout.py', 'test_tables.py', 'test_yolox.py', '__version__.py', 'layout.py', 'paddle_ocr.py', 'table_postprocess.py', 'tables.py']",['4a52922f5dadb536c87132b4a1af46bf8716c5ca'],13,1894,1907,14,0.19489795918367347,0.38571428571428573,0.610204081632653
43887e65a59fccf6c5668e1a4b1b103bb81fe642,"chore: remove tqdm output (#73)

Removes progress bar output while processing pdfs and image elements.

Co-authored-by: cragwolfe <crag@unstructured.io>",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-03-29 14:18:48-05:00,18000,2023-03-29 19:18:48+00:00,0,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py']",['a50161625619791af7471cdf67c72d89f6ee2d8e'],8,10,18,3,0.0,0.0,0.0
db173d0a82652c9e859639ad175e9e98ad3ec54a,"fix: convert to pixels (#74)

Fixed failure to convert points to pixels when loading embedded elements in PDF. Alse added paddleocr dependency for x86_64 machines, and corrected an incompatibility between `LayoutElement` and its `unstructured` equivalent.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-03-29 18:56:49-05:00,18000,2023-03-29 18:56:49-05:00,18000,True,False,"['CHANGELOG.md', 'base.txt', 'dev.txt', 'test.txt', 'setup.py', '__version__.py', 'elements.py', 'layout.py']",['43887e65a59fccf6c5668e1a4b1b103bb81fe642'],27,59,86,8,0.4375,1.0,0.4375
dd32ab15c4d9733047ec60a3e2f19569aa1b882e,"fix: make paddleocr install optional (#75)

* Pin protobuf to avoid error
* Add pin note
* Bump version and release
* Stop importing paddleocr unless needed
* make paddleocr optional
* update reqs",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-03-31 11:10:55-05:00,18000,2023-03-31 11:10:55-05:00,18000,True,False,"['CHANGELOG.md', 'dev.txt', 'setup.py', '__version__.py', 'paddle_ocr.py']",['db173d0a82652c9e859639ad175e9e98ad3ec54a'],7,30,37,5,1.0,1.0,1.0
148b268c48f093f2bddbb42f6115de937a593d5b,"feat: extend extract tables through interface (#76)

Allows extract_tables parameter to be passed from higher level functions process_file_with_model and process_data_with_model.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-03-31 17:46:48-05:00,18000,2023-03-31 17:46:48-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py']",['dd32ab15c4d9733047ec60a3e2f19569aa1b882e'],4,17,21,3,0.0,1.0,0.0
4275c8ac66b7261dfe3a8950fa270d67327dff0e,"build: update detectron2 version (#79)

* Updated detectron2 version
* Updated detectron2 version in Dockerfile
* Updated detectron2 version in README",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-04-03 18:54:42-05:00,18000,2023-04-03 18:54:42-05:00,18000,True,False,"['CHANGELOG.md', 'Dockerfile', 'Makefile', 'README.md', '__version__.py']",['148b268c48f093f2bddbb42f6115de937a593d5b'],4,8,12,5,,,
c20fcaf6adaeef768b2052bc014945801e992681,"build: packaging (#78)

Updated the way dependencies are handled in packaging:
- Base dependencies are stored in `base.in` and pulled in to `setup.py`
- The layered dependency structure `base -> test -> dev` is handled so that each layer is constrained by its predecessor. This should help avoid conflicts and ensure the dev environment is consistent with the production environment.
- Clean up:
  - Removed dependencies that as far as I can tell, weren't being utilized
  - Made PaddleOCR dependencies platform dependent to be consistent with PaddleOCR",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-04-04 18:41:57-05:00,18000,2023-04-04 18:41:57-05:00,18000,True,False,"['CHANGELOG.md', 'MANIFEST.in', 'Makefile', 'base.in', 'base.txt', 'dev.in', 'dev.txt', 'test.in', 'test.txt', 'setup.py', '__version__.py']",['4275c8ac66b7261dfe3a8950fa270d67327dff0e'],86,136,222,11,1.0,1.0,1.0
6925adaefc568c3ed794a988b30fd955ccd51535,"fix: image location (#80)

Fixed bug where wrong location keys were being used to vertically locate image objects, causing the images' vertical coordinates to be given in terms of distance from the bottom of the document while text elements had vertical coordinates in terms of distance from the top of the document.

Added test that fails before change, passes after change.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-04-10 16:34:49-05:00,18000,2023-04-10 16:34:49-05:00,18000,True,False,"['CHANGELOG.md', 'layout-parser-paper.pdf', 'test_layout.py', '__version__.py', 'elements.py', 'layout.py']",['c20fcaf6adaeef768b2052bc014945801e992681'],9,20,29,6,1.0,1.0,1.0
a9f12556c7bc3bfbbc7b497f328867e9531835e8,"fix: Corrected endpoints in README (#81)

Corrections to endpoints in README",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-04-10 15:54:05-06:00,21600,2023-04-10 21:54:05+00:00,0,True,False,['README.md'],['6925adaefc568c3ed794a988b30fd955ccd51535'],4,4,8,1,,,
4e7464f62c63877abb5baf0e010481bf6ff52f31,"refactor: partition in elements (#84)

Added the capability to partition granular-scale elements that have been identified (words, characters) by proximity using the word/character height as a reference. In many cases this does a good job of grouping text blocks. Also moved logic for extracting text from a region into the region itself, so in the future different logic can be used for embedded text and images.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-04-14 16:21:23-05:00,18000,2023-04-14 16:21:23-05:00,18000,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_elements.py', '__version__.py', 'elements.py', 'layout.py', 'layoutelement.py', 'detectron2.py', 'yolox.py']",['a9f12556c7bc3bfbbc7b497f328867e9531835e8'],213,491,704,9,0.8170731707317073,1.0,0.774390243902439
f704f26a1ce20b63675bd238dc4af12b3e499001,chore: auto create jira issues issues (#85),qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-04-18 13:53:38-05:00,18000,2023-04-18 13:53:38-05:00,18000,True,False,['create_issue.yml'],['4e7464f62c63877abb5baf0e010481bf6ff52f31'],0,34,34,1,,,
f986f139fa1e19ee1ddc2630cba5a9439ea799c9,"feat: add ability to pass languages to OCR agent (#86)

* add language parameter to tesseract

* pass language into elements and layout

* enable loading multiple language agents

* update tests to include ocr languages

* test ocr load

* changelog and version

* version bump for release",Matt Robinson,mrobinson@unstructured.io,GitHub,noreply@github.com,2023-04-20 13:13:52-04:00,14400,2023-04-20 17:13:52+00:00,0,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_tesseract.py', '__version__.py', 'elements.py', 'layout.py', 'layoutelement.py', 'tesseract.py']",['f704f26a1ce20b63675bd238dc4af12b3e499001'],24,81,105,8,0.0,0.9767441860465116,0.0
b97e406530aac6ea1e077ba79aee811b77b53505,sync version-sync.sh with other repos (#87),natygyoon,59327875+natygyoon@users.noreply.github.com,GitHub,noreply@github.com,2023-04-21 08:28:05+09:00,-32400,2023-04-20 18:28:05-05:00,18000,True,False,"['Makefile', 'version-sync.sh']",['f986f139fa1e19ee1ddc2630cba5a9439ea799c9'],27,106,133,2,,,
86bbb37af35cd382dff05499c42260cf40cd3505,"feat: move table extraction output (#88)

Changed the table extraction interface. Instead of outputting the HTML table structure to the text property, the HTML structure is now stored in html_as_text, while the contents of text is the normal result of text extraction from an element.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-04-20 23:03:15-05:00,18000,2023-04-20 23:03:15-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py', 'layoutelement.py']",['b97e406530aac6ea1e077ba79aee811b77b53505'],17,20,37,4,,,
854abdb26dd71264e813d4cb9fccdc78735f2c3c,build: pip bump (#89),natygyoon,59327875+natygyoon@users.noreply.github.com,GitHub,noreply@github.com,2023-04-27 01:54:28+09:00,-32400,2023-04-26 09:54:28-07:00,25200,True,False,['Makefile'],['86bbb37af35cd382dff05499c42260cf40cd3505'],1,1,2,1,,,
09e03979de0692e3fd8c918356742e3c5719b729,"fix: patch pdfminer (#98)

Patches pdfminer.six, which is not parsing keywords if the end of the keyword coincides with the end of a stream of PDF operations.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-05-04 14:43:12-05:00,18000,2023-05-04 14:43:12-05:00,18000,True,False,"['CHANGELOG.md', 'IRS-form-1987.pdf', 'test_layout.py', '__version__.py', 'layout.py', 'pdfminer.py']",['854abdb26dd71264e813d4cb9fccdc78735f2c3c'],4,42,46,6,0.09523809523809523,1.0,0.09523809523809523
b65adef6745869e3e68833240e51b84df5a2d0e1,fix: add __init__ to allow import by layout.py: (#100),Dimitri Roche,635121+dimroc@users.noreply.github.com,GitHub,noreply@github.com,2023-05-04 18:51:35-07:00,25200,2023-05-04 20:51:35-05:00,18000,True,False,['__init__.py'],['09e03979de0692e3fd8c918356742e3c5719b729'],0,0,0,1,,,
60390c861955d4220f24c3fbaa2cc8d3735ec447,chore: move to release version (#101),qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-05-04 20:55:10-05:00,18000,2023-05-04 20:55:10-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py']",['b65adef6745869e3e68833240e51b84df5a2d0e1'],1,5,6,2,,,
453132b40185e6b3deeb396012a2a2be889b0e7f,build(deps): bump pip (#92),natygyoon,59327875+natygyoon@users.noreply.github.com,GitHub,noreply@github.com,2023-05-08 04:54:08+09:00,-32400,2023-05-07 12:54:08-07:00,25200,True,False,['Makefile'],['60390c861955d4220f24c3fbaa2cc8d3735ec447'],1,1,2,1,,,
5d10b1f4cf45b6ca90fc8c792a763f67093a4600,fix: pip-compile test before dev (#106),qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-05-09 17:35:17-05:00,18000,2023-05-09 16:35:17-06:00,21600,True,False,['Makefile'],['453132b40185e6b3deeb396012a2a2be889b0e7f'],1,1,2,1,,,
ce402d843247974af5b97dcfb819de7f6290edb7,"Added ONNX model for detectron2 (#103)

* Added ONNX model for detectron2

* Update tests

* Add comments

* Make original detectron2 and onnx separate models

* Deletes detectron2 dependency from Makefile

---------

Co-authored-by: qued <64741807+qued@users.noreply.github.com>
Co-authored-by: Alan Bertl <alan@unstructured.io>",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-05-10 16:32:07-06:00,21600,2023-05-10 17:32:07-05:00,18000,True,False,"['CHANGELOG.md', 'test_detectron2onnx.py', '__version__.py', 'base.py', 'detectron2onnx.py']",['5d10b1f4cf45b6ca90fc8c792a763f67093a4600'],1,201,202,5,0.5963302752293578,1.0,0.6146788990825688
1c9d9c7e3984f82914ce761dd9d54a227551e0df,"enhancement: preserve image format (#107)

PIL records the filetype of the image when it's loaded, but the way we were handling the image destroyed the format metadata. This change keeps the image format metadata so that it can be recovered downstream.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-05-12 09:19:53-05:00,18000,2023-05-12 09:19:53-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py']",['ce402d843247974af5b97dcfb819de7f6290edb7'],3,7,10,3,0.0,1.0,0.0
5a8237f4bee7aa77804d4f6b34a764c1eba92a87,"enhancement: make detectron2_onnx default (#108)

Makes the ONNX version of detectron2 the default model. This means users can use it without the pain of installing detectron2. I also cleaned up a few things.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-05-18 09:33:37-05:00,18000,2023-05-18 14:33:37+00:00,0,True,False,"['ci.yml', 'CHANGELOG.md', 'README.md', 'setup.py', 'test_layout.py', 'test_detectron2.py', '__version__.py', 'base.py', 'detectron2.py', 'detectron2onnx.py', 'donut.py', 'unstructuredmodel.py']",['1c9d9c7e3984f82914ce761dd9d54a227551e0df'],20,78,98,12,0.0,0.0,1.0
c295a509cfb4402364ac9cc4ba10a08e28361846,"feat!: remove api (#111)

Removed code related to the unstructured-inference api, as we are doing inference purely through the general unstructured API, and if we were to again serve an inference-only API, we wouldn't do it through this code, or store the code in this repo.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-05-18 14:07:59-05:00,18000,2023-05-18 14:07:59-05:00,18000,True,False,"['.gitignore', 'CHANGELOG.md', 'Dockerfile', 'Makefile', 'README.md', 'base.in', 'base.txt', 'dev.in', 'dev.txt', 'test.txt', 'test_api.py', '__version__.py', 'api.py']",['5a8237f4bee7aa77804d4f6b34a764c1eba92a87'],518,84,602,13,0.2152777777777778,0.2152777777777778,0.3125
56ce657c63b5affce5ba1e699eac523e138fe94a,"fix: correct column ordering for multi-column documents (#112)

* first pass on ordering algorithm

* doc strings and type hints

* added test for multicolumn layouts

* version and changelog

* handling for empty layout

* update version",Matt Robinson,mrobinson@unstructured.io,GitHub,noreply@github.com,2023-05-18 15:46:24-04:00,14400,2023-05-18 15:46:24-04:00,14400,True,False,"['CHANGELOG.md', 'design-thinking.pdf', 'test_layout.py', 'test_tables.py', 'elements.py', 'layout.py', 'ordering.py']",['c295a509cfb4402364ac9cc4ba10a08e28361846'],4,128,132,7,0.4945054945054945,0.4945054945054945,1.0
eafbb288ac251b93f70085069e74f74c2859575d,"build(deps): pin transformers (#115)

Pinning transformers at >=4.25.1. Testing on Windows, pip install unstructured-inference ended up with transformers==4.24.x, which caused an ImportError when running a smoke test due to not having a class we import. That class didn't appear until 4.25.1.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-05-19 08:26:49-05:00,18000,2023-05-19 08:26:49-05:00,18000,True,False,['base.in'],['56ce657c63b5affce5ba1e699eac523e138fe94a'],1,2,3,1,,,
4dcbd9b570099739a7a962654cd09b78fcf76b91,"fix: Exception handling for ONNX runtime on blank pages (#119)

This PR adds a try-catch during the inference with ONNX detectron2.
A definitive solution would be to modify the ONNX model, however, doesn't seem like an easy change, and handling this error will allow the users to keep using the model.",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-05-19 17:20:06-06:00,21600,2023-05-19 23:20:06+00:00,0,True,False,"['CHANGELOG.md', '__version__.py', 'detectron2onnx.py']",['eafbb288ac251b93f70085069e74f74c2859575d'],2,10,12,3,1.0,1.0,1.0
ff96a97cc369f81000a39cf30d7be6e48bd27309,"fix: store page no (#118)

Fixes page numbers not being correctly stored in the PageLayout objects.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-05-19 19:36:00-05:00,18000,2023-05-20 00:36:00+00:00,0,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py']",['4dcbd9b570099739a7a962654cd09b78fcf76b91'],4,16,20,4,0.7777777777777778,1.0,0.7777777777777778
42139eb45b446121eddc2de88b988d88a2ae475f,"feat: page annotation (#105)

Add capability for PageLayout to output annotated image.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-05-25 16:32:11-05:00,18000,2023-05-25 16:32:11-05:00,18000,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_visualization.py', '__version__.py', 'layout.py', 'yolox.py', 'visualize.py']",['ff96a97cc369f81000a39cf30d7be6e48bd27309'],260,166,426,7,0.6363636363636364,0.7636363636363637,0.8727272727272727
6494128a6cedeac8b482f6eff7c0547aa0441ea7,"fix: temporarily disable multicolumn logic (#120)

Temporarily short circuiting the new multi-column ordering logic after seeing examples of it misordering elements where it wasn't before.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-05-30 16:05:45-05:00,18000,2023-05-30 21:05:45+00:00,0,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'ordering.py']",['42139eb45b446121eddc2de88b988d88a2ae475f'],72,29,101,4,0.65625,1.0,0.0
5419dbc74762f1b11566a1df683908fa02b20b6d,build: add ruff and format (#124),qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-06-06 13:37:37-05:00,18000,2023-06-06 13:37:37-05:00,18000,True,False,"['CHANGELOG.md', 'Makefile', 'base.txt', 'dev.txt', 'test.in', 'test.txt', 'setup.py', 'test_layout.py', 'test_detectron2.py', 'test_detectron2onnx.py', 'test_donut.py', 'test_tables.py', 'test_tesseract.py', 'test_yolox.py', 'test_elements.py', 'test_utils.py', 'test_visualization.py', '__version__.py', 'elements.py', 'layout.py', 'layoutelement.py', 'base.py', 'detectron2.py', 'detectron2onnx.py', 'donut.py', 'table_postprocess.py', 'tables.py', 'tesseract.py', 'unstructuredmodel.py', 'yolox.py', 'pdfminer.py', 'utils.py', 'visualize.py']",['6494128a6cedeac8b482f6eff7c0547aa0441ea7'],217,303,520,33,0.8378378378378378,0.9459459459459459,0.7567567567567568
dd08038445e88961969ff0acd40959c1d64ff374,"build: add test for integration with unstructured to CI (#125)

Added to CI a test that grabs the latest version of unstructured, installs the ref version of unstructured-inference along with the other unstructured dependencies, and runs the ingest tests.

The idea is to catch errors or changes that cause issues downstream before we bump the inference version in unstructured.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-06-06 14:42:04-05:00,18000,2023-06-06 14:42:04-05:00,18000,True,False,['ci.yml'],['5419dbc74762f1b11566a1df683908fa02b20b6d'],2,48,50,1,,,
4e1ae5c71d5765a31f04ea70e597cb469856a361,"enhancement: combine layouts (#123)

Add logic to combine inferred elements with extracted elements.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-06-09 09:48:40-05:00,18000,2023-06-09 09:48:40-05:00,18000,True,False,"['CHANGELOG.md', 'setup.py', 'test_layout.py', 'test_yolox.py', 'test_elements.py', '__version__.py', 'elements.py', 'layout.py', 'layoutelement.py']",['dd08038445e88961969ff0acd40959c1d64ff374'],104,463,567,9,0.2736842105263158,0.775438596491228,1.0
42f39200d14247a002f81b31e06db8cc49b5e2b3,chore: update all bash scripts to use shebang: /usr/bin/env bash (#128),ryannikolaidis,1208590+ryannikolaidis@users.noreply.github.com,GitHub,noreply@github.com,2023-06-20 21:23:18-07:00,25200,2023-06-20 21:23:18-07:00,25200,True,False,"['docker-build.sh', 'shellcheck.sh', 'version-sync.sh']",['4e1ae5c71d5765a31f04ea70e597cb469856a361'],3,3,6,3,,,
a8fefc23733c1467a2ebf95a02493d15ba0ede2d,chore: bump for release (#129),qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-06-21 17:20:04-05:00,18000,2023-06-21 17:20:04-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py']",['42f39200d14247a002f81b31e06db8cc49b5e2b3'],2,2,4,2,,,
47c116acacbca29eb549450c0a9cc0ae4400c59a,"Fall back to pytesseract if paddleocr fails (#127)

* Fall back to pytesseract if paddleocr fails

* Add docstring and bump version

* change new label in changelog

* update changelog to fold current change into existing version

* Set the version to 0.5.2

* add generated pycharm files to gitignore

---------

Co-authored-by: cragwolfe <crag@unstructured.io>",Roman Isecke,136338424+rbiseck3@users.noreply.github.com,GitHub,noreply@github.com,2023-06-21 19:45:29-04:00,14400,2023-06-21 19:45:29-04:00,14400,True,False,"['.gitignore', 'CHANGELOG.md', 'tables.py']",['a8fefc23733c1467a2ebf95a02493d15ba0ede2d'],48,63,111,3,0.0,0.0,1.0
ce1242c482ad496467a8e59a2f36cdee474b2d95,Update README.md (#130),cragwolfe,crag@unstructured.io,GitHub,noreply@github.com,2023-06-27 23:39:21-07:00,25200,2023-06-27 23:39:21-07:00,25200,True,False,['README.md'],['47c116acacbca29eb549450c0a9cc0ae4400c59a'],3,6,9,1,,,
bd6129281ad57c2d96d39675f1bf85d11849507c,"feat: large model (#132)

Added large model to accessible models. This required adding a new code path for this type of model. I compensated for the fact that elements from this model don't have location data by adding a new class LocationlessLayoutElement, but long term I think we should alter the TextRegion to have a bbox property instead of subclassing Rectangle.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-06-29 09:32:48-05:00,18000,2023-06-29 09:32:48-05:00,18000,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_largemodel.py', '__version__.py', 'layout.py', 'layoutelement.py', 'base.py', 'largemodel.py', 'unstructuredmodel.py', 'yolox.py']",['ce1242c482ad496467a8e59a2f36cdee474b2d95'],40,541,581,10,0.41721854304635764,0.8245033112582781,0.6423841059602649
99c8196caf484fb9a81845e562ddbacde1696359,"fix: deterministic ordering (#135)

Updated ordering method to rely on upper-left x-coordinate in case of a y-coordinate tie.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-06-29 17:19:59-05:00,18000,2023-06-29 17:19:59-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py', 'ordering.py']",['bd6129281ad57c2d96d39675f1bf85d11849507c'],2,6,8,3,,,
46a19495abeba930319f1d232efdc67e80db7517,"Warning suppression during onnx-detectron2 inference on an empty page (#133)

* Suppression of warning during onnx-detectron2 inference on empty page

* More detailed error when error arised on blank page (at debug level now)

* Add tests for logging

---------

Co-authored-by: Alan Bertl <alan@unstructured.io>",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-06-30 15:44:05-06:00,21600,2023-06-30 15:44:05-06:00,21600,True,False,"['CHANGELOG.md', 'test_logger.py', '__version__.py', 'logger.py', 'detectron2onnx.py']",['99c8196caf484fb9a81845e562ddbacde1696359'],3,46,49,5,1.0,1.0,1.0
3f91722e1ca2ab404ad26cc29bc6af17c053ca47,"chore(deps): Bump onnxruntime from 1.15.0 to 1.15.1 in /requirements (#140)

Bumps [onnxruntime](https://github.com/microsoft/onnxruntime) from 1.15.0 to 1.15.1.
- [Release notes](https://github.com/microsoft/onnxruntime/releases)
- [Changelog](https://github.com/microsoft/onnxruntime/blob/main/docs/ReleaseManagement.md)
- [Commits](https://github.com/microsoft/onnxruntime/compare/v1.15.0...v1.15.1)

---
updated-dependencies:
- dependency-name: onnxruntime
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-07-04 13:07:46-06:00,21600,2023-07-04 13:07:46-06:00,21600,True,False,['base.txt'],['46a19495abeba930319f1d232efdc67e80db7517'],11,23,34,1,,,
2a4f17043d30e298e42f57c97ade62114dbc0678,"chore(deps): Bump mypy from 1.3.0 to 1.4.1 in /requirements (#139)

Bumps [mypy](https://github.com/python/mypy) from 1.3.0 to 1.4.1.
- [Commits](https://github.com/python/mypy/compare/v1.3.0...v1.4.1)

---
updated-dependencies:
- dependency-name: mypy
  dependency-type: direct:production
  update-type: version-update:semver-minor
...

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: Benjamin Torres <benjats07@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-07-04 13:39:02-06:00,21600,2023-07-04 13:39:02-06:00,21600,True,False,['test.txt'],['3f91722e1ca2ab404ad26cc29bc6af17c053ca47'],37,26,63,1,,,
94194c0699de0effbcf2411cf5f772ae40808870,"chore(deps): Bump ruff from 0.0.270 to 0.0.276 in /requirements (#141)

Bumps [ruff](https://github.com/astral-sh/ruff) from 0.0.270 to 0.0.276.
- [Release notes](https://github.com/astral-sh/ruff/releases)
- [Changelog](https://github.com/astral-sh/ruff/blob/main/BREAKING_CHANGES.md)
- [Commits](https://github.com/astral-sh/ruff/compare/v0.0.270...v0.0.276)

---
updated-dependencies:
- dependency-name: ruff
  dependency-type: direct:production
  update-type: version-update:semver-patch
...

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-07-04 14:17:21-06:00,21600,2023-07-04 14:17:21-06:00,21600,True,False,['test.txt'],['2a4f17043d30e298e42f57c97ade62114dbc0678'],1,1,2,1,,,
38ea28918480d7a747094d694e68380675e50c15,build: update connector installs (#144),qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-07-05 17:28:41-05:00,18000,2023-07-05 17:28:41-05:00,18000,True,False,['ci.yml'],['94194c0699de0effbcf2411cf5f772ae40808870'],0,5,5,1,,,
5984a1ed105d41cb0c715725e871e2677b40912e,"Added execution providers for TensorRT and CUDA (#102)

* Added execution providers for TensorRT and CUDA

* Changelog update

---------

Co-authored-by: Alan Bertl <alan@unstructured.io>
Co-authored-by: qued <64741807+qued@users.noreply.github.com>",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-07-06 12:16:53-06:00,21600,2023-07-06 12:16:53-06:00,21600,True,False,"['CHANGELOG.md', '__version__.py', 'detectron2onnx.py', 'yolox.py']",['38ea28918480d7a747094d694e68380675e50c15'],4,19,23,4,0.0,1.0,0.0
1428eb3d76e65781f830f292ada3fcb2fb281a76,"Table bug (#143)

* Table bug

* Updated CHANGELOG.md

---------

Co-authored-by: Antonio Jimeno Yepes <antonio@unstructured.io>
Co-authored-by: Benjamin Torres <benjats07@users.noreply.github.com>
Co-authored-by: Benjamin Torres <benjamin@unstructured.io>",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-07-07 05:35:59+10:00,-36000,2023-07-06 13:35:59-06:00,21600,True,False,"['CHANGELOG.md', '__version__.py', 'table_postprocess.py']",['5984a1ed105d41cb0c715725e871e2677b40912e'],11,22,33,3,0.0,0.0,0.0
e682ab1554bd2b62a40da84470c312ed335d8619,"Fix/pdf2image-memeory-error (#136)

This PR is for https://github.com/Unstructured-IO/unstructured/issues/521

- Add functionality to convert a PDF in small chunks of pages at a time for pdf2image.convert_from_path
- Add functionality to write images to computer storage temporarily instead of keeping them in memory for pdf2image.convert_from_path",Christine Straub,christinestraub0720@gmail.com,GitHub,noreply@github.com,2023-07-06 15:14:39-07:00,25200,2023-07-06 17:14:39-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py']",['1428eb3d76e65781f830f292ada3fcb2fb281a76'],6,21,27,3,0.0,0.0,0.0
41cb7a73689c00fc682879b71ae089ce6d51322a,"rename large model to chipper (#145)

* rename large model to chipper

---------

Co-authored-by: Benjamin Torres <benjats07@users.noreply.github.com>",Roman Isecke,136338424+rbiseck3@users.noreply.github.com,GitHub,noreply@github.com,2023-07-06 19:45:01-04:00,14400,2023-07-06 17:45:01-06:00,21600,True,False,"['CHANGELOG.md', 'test_chippermodel.py', '__version__.py', 'base.py', 'chipper.py']",['e682ab1554bd2b62a40da84470c312ed335d8619'],22,23,45,5,,,
84de4635d7efcff411b000dae92bdaa36c7227d0,"fix installation with python 3.8.17 (#146)

Make pip-compile executed.",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-07-10 21:39:59-06:00,21600,2023-07-10 22:39:59-05:00,18000,True,False,"['base.txt', 'dev.txt', 'test.txt']",['41cb7a73689c00fc682879b71ae089ce6d51322a'],102,115,217,3,,,
ffed03b5eeff2002071f4b530aae8daba776b0e0,"chore: beta warning for chipper (#150)

* chore: beta warning for chipper

* changelog and version

* fix typo!

Co-authored-by: qued <64741807+qued@users.noreply.github.com>

---------

Co-authored-by: qued <64741807+qued@users.noreply.github.com>",Matt Robinson,mrobinson@unstructured.io,GitHub,noreply@github.com,2023-07-13 15:56:37-04:00,14400,2023-07-13 19:56:37+00:00,0,True,False,"['CHANGELOG.md', 'test_model.py', '__version__.py', 'base.py']",['84de4635d7efcff411b000dae92bdaa36c7227d0'],3,26,29,4,0.5,0.5,1.0
66590e39ce904fd74404ffc1c866b5a4450f13eb,"enhancement: expose dpi (#151)

Exposed pdf-to-image conversion dpi parameter to higher level functions so this parameter can be set externally.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-07-14 16:21:47-05:00,18000,2023-07-14 16:21:47-05:00,18000,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py']",['ffed03b5eeff2002071f4b530aae8daba776b0e0'],3,17,20,4,0.4,1.0,0.0
24d8673201f46ba42e5cf9afe3910c7e41cdea7e,"build(deps): update detectron2 (#154)

I noticed an issue that basic operations in this library were causing import errors. This turned out to be caused by the new version of PIL completing deprecation of certain references (specifically PIL.Image.LINEAR) used in the pinned version of detectron2 that we've been using. Updating to the latest commit of detectron2 fixes the problem.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-07-21 06:29:23-07:00,25200,2023-07-21 08:29:23-05:00,18000,True,False,"['CHANGELOG.md', 'Makefile', 'README.md', '__version__.py']",['66590e39ce904fd74404ffc1c866b5a4450f13eb'],4,5,9,4,,,
4a66b6d1b63b5a9cce274c23b7c3f4099167ef48,"fix: pdf2image too many open files (#152)

This PR is to fix the too many open files issue when loading pdf and to add functionality to set page.image to None to reduce memory usage.

* update load_pdf to return either Image objects or Image paths
* update DocumentLayout.from_file to open only one image
* add image_metadata attribute to PageLayout Class & set page.image to None to reduce memory usage
* add functionality to store pdf images for later use
* update the annotate and _get_image_array methods of PageLayout to get the image from the image_path property if the image property is None",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-07-22 22:50:26-07:00,25200,2023-07-23 00:50:26-05:00,18000,True,False,"['CHANGELOG.md', 'pdf2image-memory-error-test-400p.pdf', 'test_layout.py', 'layout.py']",['24d8673201f46ba42e5cf9afe3910c7e41cdea7e'],89,230,319,4,0.24324324324324326,0.7027027027027027,0.6756756756756757
06c0057fc322d5a2ff48d218d128e91ae91e96f2,Cut 0.5.6 release (#156),Roman Isecke,136338424+rbiseck3@users.noreply.github.com,GitHub,noreply@github.com,2023-07-24 15:08:39-04:00,14400,2023-07-24 15:08:39-04:00,14400,True,False,"['CHANGELOG.md', '__version__.py']",['4a66b6d1b63b5a9cce274c23b7c3f4099167ef48'],2,2,4,2,,,
64870dee4bd532ad02a5cf36986f6dab463e2f85,"Update os dir naming for images (#157)

* Update os dir naming for images

* update changelog

* Add Docker approach to testing

* Add unit test to check no ext case",Roman Isecke,136338424+rbiseck3@users.noreply.github.com,GitHub,noreply@github.com,2023-07-25 14:20:15-04:00,14400,2023-07-25 14:20:15-04:00,14400,True,False,"['.gitignore', 'CHANGELOG.md', 'Dockerfile', 'Makefile', 'docker-build.sh', 'test_layout.py', '__version__.py', 'layout.py']",['06c0057fc322d5a2ff48d218d128e91ae91e96f2'],5,82,87,8,1.0,1.0,1.0
774409eaceb47d37c3916678a1df63686f1e028a,"doc: fix example snippet

In the section 'Using a non-default model', the argument name must be 'detection_model' instead of 'model'",anukurian16,anukurian16@gmail.com,GitHub,noreply@github.com,2023-07-27 18:38:49-07:00,25200,2023-07-27 18:38:49-07:00,25200,True,False,['README.md'],['64870dee4bd532ad02a5cf36986f6dab463e2f85'],1,1,2,1,,,
319859d68dabd7143ed8ff1eaaa54b183f48e934,"Updated detectron2 repo (#161)

Due breaking update in Pillow library, detectron2 repo is updated",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-07-28 14:05:36-06:00,21600,2023-07-28 14:05:36-06:00,21600,True,False,"['Makefile', 'README.md']",['774409eaceb47d37c3916678a1df63686f1e028a'],2,2,4,2,,,
d185e646bfdbe31e8ccaa34bdfdfee82f660f50a,update makefile pip version (#158),shreyanid,42684285+shreyanid@users.noreply.github.com,GitHub,noreply@github.com,2023-07-28 16:38:33-07:00,25200,2023-07-28 16:38:33-07:00,25200,True,False,"['CHANGELOG.md', 'Makefile', 'base.txt', 'dev.in', 'dev.txt', 'test.txt', '__version__.py']",['319859d68dabd7143ed8ff1eaaa54b183f48e934'],91,148,239,7,,,
8913620f42137ccb00e11ed873c6e189910e9819,"enhancement: cache named models (#155)

Fixes the memory issue that was discovered in #152.

* Caches named models as they are loaded to prevent reloading or creating multiple copies.
* Adds test that fails if model is initialized more than once (fails on main).
* This should also address concerns that Chipper was being loaded multiple times.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-08-01 15:32:24-05:00,18000,2023-08-01 15:32:24-05:00,18000,True,False,"['CHANGELOG.md', 'test_detectron2.py', 'test_detectron2onnx.py', 'test_model.py', '__version__.py', 'base.py']",['d185e646bfdbe31e8ccaa34bdfdfee82f660f50a'],8,53,61,6,0.8181818181818182,0.8181818181818182,1.0
04b2e6fe5bf9506551714f11ffdbd1abfc28ea13,"Feat/detectron2 mask rcnn x101 (#149)

* Update CHANGELOG
* Added alternative model for detectron2
* Added script for showing results
* Corrected index at getting output from detectron2
* Version sync
* Detectron2 with architecture mask-rcnn-x101 is now the default model
* Change default values during test for detectron2onnx
* Format changes
* Changed type of stored model_path

Signed-off-by:  Benjamin Torres <benjamin@unstructured.io>
Co-authored-by: Alan Bertl <alan@unstructured.io>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>

* chore(deps-dev): Bump ipython from 8.12.2 to 8.14.0 in /requirements
* chore(deps): Bump transformers from 4.29.2 to 4.30.2 in /requirements (#142)
* chore(deps): Bump transformers from 4.29.2 to 4.30.2 in /requirements
* chore(deps): Bump opencv-python from 4.7.0.72 to 4.8.0.74 in /requirements (#137)
* chore(deps): Bump opencv-python in /requirements

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: Benjamin Torres <benjats07@users.noreply.github.com>",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-08-03 10:42:45-06:00,21600,2023-08-03 16:42:45+00:00,0,True,False,"['CHANGELOG.md', 'dev.txt', 'test_detectron2onnx.py', '__version__.py', 'base.py', 'detectron2onnx.py']",['8913620f42137ccb00e11ed873c6e189910e9819'],26,46,72,6,0.0,1.0,0.75
68f3812c0b4e39b4628e3008aa91d0657a68187d,"build: don't exit after first ingest test failure (#166)

so more diff's may be inspected.",cragwolfe,crag@unstructured.io,GitHub,noreply@github.com,2023-08-09 11:43:00-07:00,25200,2023-08-09 18:43:00+00:00,0,True,False,"['ci.yml', 'test-unstructured-ingest-helper.sh']",['04b2e6fe5bf9506551714f11ffdbd1abfc28ea13'],1,36,37,2,,,
9a53178242ad314b83ff8021325062e410238872,"build: revert default model, cut release (#168)",cragwolfe,crag@unstructured.io,GitHub,noreply@github.com,2023-08-09 12:22:50-07:00,25200,2023-08-09 12:22:50-07:00,25200,True,False,"['CHANGELOG.md', '__version__.py', 'base.py']",['68f3812c0b4e39b4628e3008aa91d0657a68187d'],4,4,8,3,,,
203f7ab75b1644b938f6bae1e81c8365d274f35d,"fix: handle errors from Tesseract (#165)

* fix: handle errors from Tesseract

Certain regions of a document are failing ocr with this error:

`pytesseract.pytesseract.TesseractError: (-8, 'Estimating resolution as 1250')`

When I try the same region on the CLI, I get:

```
$ tesseract bad_tile.jpeg output
Estimating resolution as 1813
Floating point exception
```

Whatever the root cause, let's catch this error and return an empty string.

* fix lint error

* more lint stuff

* temporary bump to dev0 version for debugging

* release version

---------

Co-authored-by: Crag Wolfe <crag@unstructuredai.io>
Co-authored-by: shreyanid <42684285+shreyanid@users.noreply.github.com>",Austin Walker,awalk89@gmail.com,GitHub,noreply@github.com,2023-08-09 19:53:02-04:00,14400,2023-08-09 23:53:02+00:00,0,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'elements.py', 'tesseract.py']",['9a53178242ad314b83ff8021325062e410238872'],2,28,30,5,1.0,1.0,0.7692307692307693
15bbc564c67ae1f1b524918978cdb29010f89647,"Feat/147 ocr entire page (#159)

Addresses Github issue #147

* Add functionality to Extracts the text aggregated from the regions of the ocr layout that lie within the given
block
* Add functionality to merge inferred layout with ocr layout
* Add functionality to populate inferred region text with ocr text when merging inferred layout with embedded layout
* Populate inferred region text with ocr text only for inferred regions that are not populated with text
* Make entire-page OCR optional
* Update the evaluation script",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-08-11 01:17:19-07:00,25200,2023-08-11 01:17:19-07:00,25200,True,False,"['CHANGELOG.md', 'engine.py', '.gitignore', 'requirements.txt', 'validate_ocr_performance.py', '2023-Jan-economic-outlook.pdf', 'Silent-Giant.pdf', 'layout-parser-paper-fast.jpg', 'layout-parser-paper-fast.pdf', 'recalibrating-risk-report.pdf', 'test_layout.py', '__version__.py', 'layout.py', 'layoutelement.py']",['203f7ab75b1644b938f6bae1e81c8365d274f35d'],12,499,511,14,0.10140845070422536,0.36338028169014086,0.16056338028169015
c337a95be33571c5f0dc37d2f45c0cec9d082d92,"enhancement: warn if low dpi chipper (#171)

Adds a warning if Chipper is used with DPI less than 300.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-08-14 22:37:04-05:00,18000,2023-08-14 22:37:04-05:00,18000,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_model.py', '__version__.py', 'layout.py']",['15bbc564c67ae1f1b524918978cdb29010f89647'],4,27,31,5,0.6666666666666666,0.0,0.6666666666666666
4b7276a7e26c6116b4d8e5c6b985f2b16e053734,"enhancement: make DPI default 300 when using chipper (#174)

Made `pdf_image_dpi` default to `None` to allow for conditional default, 300 when using chipper, 200 otherwise.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-08-16 00:24:03-05:00,18000,2023-08-16 05:24:03+00:00,0,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py']",['c337a95be33571c5f0dc37d2f45c0cec9d082d92'],4,7,11,3,0.0,0.0,0.0
ae73cf8c8d2d956f02022077e7cee0e4b2fc4e2c,"fix: Fix pdfminer error when using process_data_with_model (#178)

When a pdf page doesn't have much data, it may get buffered in the write to a tempfile. If this happens, we'll hit an error reading the file back. This fixes the error by flushing the temp buffer.",Austin Walker,austin@unstructured.io,GitHub,noreply@github.com,2023-08-16 17:13:15-04:00,14400,2023-08-16 16:13:15-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py']",['4b7276a7e26c6116b4d8e5c6b985f2b16e053734'],1,6,7,3,0.0,1.0,0.0
de19ace101632ed5a8b8e0fed62cef0795fd55ac,"fix: skip extracted images during element merge (#175)

When merging extracted elements with inferred elements, extracted elements have a certain priority because they tend to have the exact text and bounding boxes. However this is not true when the extracted element is an image. In this case the element provides no insight into where in the region the text might be (if there is text in the image) and what the text is.

This is particularly bad when the pdf contains a single full-page embedded image.

This PR fixes that by skipping the embedded images during merging.

Note that the unintended behavior did provide one benefit in certain cases -- when a document contains elements with embedded images that contain text, and the detection model is unable to find the text (Examples are some scanned documents or 2023-Jan-economic-outlook.pdf), keeping the Image element forced us to OCR the appropriate area, which captured more of the text.

We should be able to intentionally get this behavior by utilizing the full page OCR mode, and when we find text elements via OCR that don't have corresponding elements from the detected layout, adding them to the list. See #176 .",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-08-16 23:06:41-05:00,18000,2023-08-16 21:06:41-07:00,25200,True,False,"['CHANGELOG.md', '__version__.py', 'layoutelement.py']",['ae73cf8c8d2d956f02022077e7cee0e4b2fc4e2c'],1,9,10,3,0.0,0.0,0.0
d162c56bfc42e73fd20a71e69648baee42153ddc,"Klaijan/add tiff image file support case in from_image_file function (#173)

feat: supports multipage image (TIFF) in DocumentLayout

style: change viz to f-string formatting

style: change type comparison from == to is

test: add test tiff file and tiff test in test_layout
---------

Co-authored-by: qued <64741807+qued@users.noreply.github.com>",Klaijan,klaijan@unstructured.io,GitHub,noreply@github.com,2023-08-18 13:02:55-04:00,14400,2023-08-18 13:02:55-04:00,14400,True,False,"['CHANGELOG.md', 'loremipsum.tiff', 'test_layout.py', 'test_donut.py', 'test_tables.py', '__version__.py', 'layout.py', 'visualize.py']",['de19ace101632ed5a8b8e0fed62cef0795fd55ac'],22,33,55,8,0.0,0.0,0.0
ea0831fd2a019be3dd86df5208ae2c2e2b99c8e8,"fix: handle potential errors from tesseract call (#183)

We've seen a 500 error in `unstructured-api` due to an uncaught
TesseractError in the `entire_page` path. I can't reproduce it, but we
can at least add a try catch. The last fix was too aggessive, which
we're tracking
[here](https://github.com/Unstructured-IO/unstructured/issues/1086), so
we may need to adjust this fix as well.

Closes #179",Austin Walker,austin@unstructured.io,GitHub,noreply@github.com,2023-08-22 13:30:03-04:00,14400,2023-08-22 13:30:03-04:00,14400,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'elements.py', 'layout.py']",['d162c56bfc42e73fd20a71e69648baee42153ddc'],7,36,43,5,0.8,0.8,0.95
9b6aa8ec1e43bba54b743d28578bef370a073533,"fix: use temporary instead of fixed directories for storing images of pdfs being processed (#184)

**Summary**

- Replaces using a created directory for storing image outputs with a
temporary directory
- Deprecates `create_image_output_dir` method
- Adds hot-loading for annotating images because images are no longer
stored long-term in a directory
- Adds a document_filename keyword arg to the PageLayout to enable
hot-loading

**Tests**

Removes tests associated with `create_image_output_dir`",Newel H,37004249+newelh@users.noreply.github.com,GitHub,noreply@github.com,2023-08-22 23:55:59-04:00,14400,2023-08-22 20:55:59-07:00,25200,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py']",['ea0831fd2a019be3dd86df5208ae2c2e2b99c8e8'],88,97,185,4,0.0,0.0,0.0
080ccfaa3d47a4cb33418ca84ab5c2b8927f0a06,"fix: Set OMP_THREAD_LIMIT for better tesseract performance (#185)

I've spent some time playing with this var, and I came up with [this
gist](https://gist.github.com/awalker4/8581d76d373c1bc51e0f2676a6ad816c).
I ran this on a 4 core EC2 instance. Processing 3 pages without the
limit takes 153s. With the limit is 5s 😍 . When the number of pages is
higher than number of cores, it just hangs without this var.",Austin Walker,austin@unstructured.io,GitHub,noreply@github.com,2023-08-25 18:10:17-04:00,14400,2023-08-25 18:10:17-04:00,14400,True,False,"['CHANGELOG.md', '__version__.py', 'tesseract.py']",['9b6aa8ec1e43bba54b743d28578bef370a073533'],1,11,12,3,,,
b139d3b05c8a94252aa55c18ea3030cbd0b0eff7,"Fix for wrong type assignation at ingest-test (#172)

This PR restores some thresholds for getting the ingest test correct at
`unstructured`, however, the thresholds keep being distinct for detectron2_mask_rcnn.

---------

Co-authored-by: Alan Bertl <alan@unstructured.io>",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-08-29 19:05:19-06:00,21600,2023-08-30 01:05:19+00:00,0,True,False,"['ci.yml', 'CHANGELOG.md', '__version__.py', 'layout.py']",['080ccfaa3d47a4cb33418ca84ab5c2b8927f0a06'],1,27,28,4,0.0,0.0,1.0
3d2045e0c7ae6e189a8d86bb941838f7d877a959,"Feat/176 elements detected by ocr supplement detected layout (#186)

Closes
[#176](https://github.com/Unstructured-IO/unstructured-inference/issues/176).

### Summary
- Add functionality to annotate any layout(extracted, inferred, OCR) on
a page
- Add a Python script and a Jupyter Notebook for annotating layout
elements
- Add functionality to get layout elements from OCR regions
- Add functionality to supplement detected layout with elements from the
full-page OCR
- Add the utility function `annotate_layout_elements()`
- Add a Python script and a Jupyter Notebook to evaluate the feature
implemented in this branch

### Testing
```
from unstructured_inference.inference.layout import DocumentLayout

# pdf
doc = DocumentLayout.from_file(""sample-docs/patent-1p.pdf"")

# image
doc = DocumentLayout.from_image_file(""sample-docs/layout-parser-paper-fast.jpg"")
```
### Evaluation
A Python script and a Jupyter Notebook were added for evaluation.
```
PYTHONPATH=. python examples/ocr_layout_supplement/ocr_layout_supplement.py <file_path> <file_type>
```
For example,
```
PYTHONPATH=. python examples/ocr_layout_supplement/ocr_layout_supplement.py sample-docs/patent-1p.pdf pdf
```",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-08-31 19:12:06-07:00,25200,2023-08-31 19:12:06-07:00,25200,True,False,"['.gitignore', 'CHANGELOG.md', 'README.md', 'requirements.txt', 'visualization.ipynb', 'visualization.py', 'README.md', 'ocr_layout_supplement.ipynb', 'ocr_layout_supplement.py', 'base.txt', 'dev.in', 'dev.txt', 'test.txt', 'patent-1p.pdf', 'patent.pdf', 'conftest.py', 'test_layout.py', 'test_layout_element.py', 'test_model.py', 'test_elements.py', 'test_utils.py', 'test_visualization.py', '__version__.py', 'constants.py', 'layout.py', 'layoutelement.py', 'utils.py', 'visualize.py']",['b139d3b05c8a94252aa55c18ea3030cbd0b0eff7'],184,1091,1275,28,0.36443148688046645,0.717201166180758,0.7900874635568513
351dbcfd3c0522152e81f9b5ed619b3d6ec17d1d,"Feat: onnx quantization (#182)

This PR adds ""yolox_quantized"" model as an alternative detection model,
leveraging a similar speed to detectron2_onnx.
Also adds ""detectron2_quantized"" model as a quantized model for
""detectron2_onnx"".
Both models are generated at first usage.",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-09-01 21:34:52-06:00,21600,2023-09-01 20:34:52-07:00,25200,True,False,"['CHANGELOG.md', 'base.in', 'base.txt', '__version__.py', 'detectron2onnx.py', 'yolox.py']",['3d2045e0c7ae6e189a8d86bb941838f7d877a959'],8,63,71,6,0.0,1.0,0.2
e931bef4d952a6eee3d39ec47a9b2998d5052c85,"add protection to division by 0 (#193)

This PR resolves #192 by adding a helper function to perform division
`a/b` and replace `b` with machine precision for float when `b==0` to
avoid division by 0.

## further discussion

Do we want to also have the division be type conscious (do not auto
convert integers into float, i.e., if int/int we should expect int as
output?)",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-09-03 10:48:57-05:00,18000,2023-09-03 10:48:57-05:00,18000,True,False,"['CHANGELOG.md', 'test_math.py', '__version__.py', 'elements.py', 'math.py']",['351dbcfd3c0522152e81f9b5ed619b3d6ec17d1d'],4,42,46,5,1.0,1.0,0.8666666666666667
5c295c53292211bf68e74c348349d2d3ee7ad210,"Update unstructured inference detection models to output class probs (#191)

Updated the detection models we currently support to output
classification probabilities and persist those through
unstructured-inference LayoutElement. Next step once this version is
released is to update Unstructured package to allow the probabilities
from unstructured-inference to persist all the way to the end of
partition through metadata.

---------

Co-authored-by: Alan Bertl <alan@unstructured.io>",pravin-unstructured,129794394+pravin-unstructured@users.noreply.github.com,GitHub,noreply@github.com,2023-09-05 12:43:12-04:00,14400,2023-09-05 12:43:12-04:00,14400,True,False,"['CHANGELOG.md', 'test_detectron2onnx.py', 'test_model.py', 'test_yolox.py', '__version__.py', 'layoutelement.py', 'detectron2onnx.py', 'yolox.py']",['e931bef4d952a6eee3d39ec47a9b2998d5052c85'],6,59,65,8,0.4897959183673469,1.0,0.9795918367346939
bdee10268ad056bd3e4313769dcc5a5ef1362155,"fix: bring back embedded images in pdf (#198)

### Summary
- Fix inferred layout visualization
- Add functionality to check if the extracted image is a full-page image

### Testing
from unstructured_inference.inference.layout import DocumentLayout
doc = DocumentLayout.from_file(""sample-docs/embedded-images.pdf"")

### Evaluation
The Python script (or Jupyter Notebook) for ""layout analysis"" can be
used to evaluate the feature implemented in this branch.

PYTHONPATH=. python examples/layout_analysis/visualization.py sample-docs/embedded-images.pdf",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-09-07 10:38:13-07:00,25200,2023-09-07 10:38:13-07:00,25200,True,False,"['CHANGELOG.md', 'embedded-images.pdf', 'conftest.py', 'test_layout_element.py', 'test_elements.py', '__version__.py', 'constants.py', 'layout.py', 'layoutelement.py']",['5c295c53292211bf68e74c348349d2d3ee7ad210'],15,201,216,9,0.4628099173553719,0.7355371900826446,0.7851239669421488
7cd724a37a4ad476f17d523ffdf27d8693ded8fc,"remove cv2 preprocessing (#204)

This PR removes `cv2` preprocessing before OCR step in table
transformer.

The preprocessing in practice tend to lead to lower recall from OCR
results. For example this image:


![table-multi-row-column-cells](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/baffd3bd-d34d-404f-83f2-b29f3c42fb6e)


with current code:

```python
from unstructured_inference.models.tables import UnstructuredTableTransformerModel
from PIL import Image

model = UnstructuredTableTransformerModel()
model.initialize(""microsoft/table-transformer-structure-recognition"")
prediction = model.predict(Image.open('table.png'))
```

produces 

![Screenshot 2023-09-08 at 9 39 07
AM](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/00857b02-c75e-446c-8c34-0b6e2d42b0f7)

after removing the preprocessing (this PR):

![Screenshot 2023-09-08 at 12 15 13
PM](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/2171570c-641a-46a1-9be7-4664497d7727)",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-09-08 20:02:58-05:00,18000,2023-09-09 01:02:58+00:00,0,True,False,"['CHANGELOG.md', 'table-multi-row-column-cells.png', 'test_tables.py', '__version__.py', 'tables.py']",['bdee10268ad056bd3e4313769dcc5a5ef1362155'],129,92,221,5,0.9148936170212766,0.11702127659574468,0.0851063829787234
52c5bea0768565318b30d412da2ba71f83e221bb,"fix table to html bug (#203)

This PR fixes a bug where tables with cells that spans multiple rows can
cause the rows below/aligned with them position incorrectly. The
original code assumes the first cell from a row (i.e., the cell that
increments the row number) is also the first column. But for tables like
the one below (also in this PR as a new sample doc):


![table-multi-row-column-cells](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/2a664afd-58c5-4a34-afb3-fbb3f1305e43)

The last first 4 columns has headers spanning two rows but the last two
columns have headers that has two rows. With the current code the second
row (the subheaders) of the last two columns are treated as the
subheaders for the first two columns:

![Screenshot 2023-09-08 at 11 59 32
AM](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/186ec1d2-8621-4a3d-9025-fe8ca05876e7)

This PR fixes this bug by filling in cells with empty text to occupy the
cells at row 2, columns 1 through 4. Those are the cells that are
compounded into the header. And the resulting html represents the table
structure better:

![Screenshot 2023-09-08 at 12 01 26
PM](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/aaa872bd-9e5a-4b25-8973-29335ec60af5)

---------

Co-authored-by: Cloud User <rocky@ip-10-4-124-58.us-east-2.compute.internal>",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-09-08 20:23:43-05:00,18000,2023-09-08 20:23:43-05:00,18000,True,False,"['CHANGELOG.md', 'test_tables.py', '__version__.py', 'tables.py']",['7cd724a37a4ad476f17d523ffdf27d8693ded8fc'],6,55,61,4,0.75,1.0,1.0
5bc67b5622524a3d8a4dfaca6dfde7c8d0266178,"chore: support paddle with both cpu and gpu if it is installed (#207)

address:
https://github.com/Unstructured-IO/unstructured-inference/issues/200

### Summary
* Before this PR, we only used paddle if the platform is `x86_64`,
remove this platform check and just assume that paddle and paddle OCR is
already installed on user's platform
* Introduce an env variable `TABLE_OCR` that can be used to specify if
we use paddle/tesseract for table extraction, default is tesseract
* Add logic for parameter `use_gpu` while setting up paddle ocr
instance, if there is gpu advices available, paddle will use gpu

### Test
* paddle on CPU: please check unit test `test_table_prediction_paddle`,
the result is not good (can use gdb to print value of `prediction`) but
can prove that paddle ocr is running in CI tests
* paddle on GPU: on a gpu instance:
* rerun test `PYTHONPATH=. pytest
test_unstructured_inference/models/test_tables.py::test_table_prediction_paddle`
and run
* from another terminal run `nvidia-smi -l 1` to monitor gpu usage, and
you can see the python test is using gpu memory",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2023-09-12 14:16:57-04:00,14400,2023-09-12 14:16:57-04:00,14400,True,False,"['CHANGELOG.md', 'Makefile', 'README.md', 'setup.py', 'test_tables.py', '__version__.py', 'paddle_ocr.py', 'tables.py']",['52c5bea0768565318b30d412da2ba71f83e221bb'],96,127,223,8,0.34375,1.0,1.0
d6ccdc17b5beb25195cf75b70be4845e064ffbd8,"add padding before structure detection (#205)

Experiments show that structure detection model works better when
padding is added around the image:
https://www.notion.so/Investigate-structure-detection-model-9cf53d2aeb6c4a63b44c5324217f7adf

For example, this sample table image (part of this PR) represents a
typical input into the structure detection model: a crop of a table that
is relatively tightly bounded around the table content.


![ilpa-example-1](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/7a462e94-b47e-4687-b9fe-a2282c34f444)

Without padding (current method), we got extraction html result on this
image like:
![Screenshot 2023-09-08 at 3 20 49
PM](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/17b023c0-23e8-4465-8a3f-5debe8c4b740)
which misses a few rows that on the top and bottom of the image.

However, once padding is added (this PR, default to 25 pixels on each
side) we are able to increase the recall of the structure detection
model:
![Screenshot 2023-09-08 at 3 22 10
PM](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/768b4b0e-6315-4505-b96f-65bce25d3b7a)

## testing

Please experiment with changing the `pad_for_structure_detection` value
and see different results by running

```python
from unstructured_inference.models.tables import UnstructuredTableTransformerModel
from PIL import Image

model = UnstructuredTableTransformerModel()
model.initialize(""microsoft/table-transformer-structure-recognition"")
prediction = model.predict(Image.open('table.png'))
```

and view the generated html in a browser

## open questions

1. do we want to make this parameter tunable with env variable? are we
overdue for a config file?
2. do we want to explore automatically choosing a good padding by
experimenting with different images?

---------

Co-authored-by: qued <64741807+qued@users.noreply.github.com>",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-09-12 16:34:46-05:00,18000,2023-09-12 21:34:46+00:00,0,True,False,"['CHANGELOG.md', 'ilpa-example-1.jpg', 'test_utils.py', '__version__.py', 'tables.py', 'utils.py']",['5bc67b5622524a3d8a4dfaca6dfde7c8d0266178'],10,64,74,6,0.0,0.868421052631579,0.0
173f63341a485f89923c43746b813b3eeed199e9,"Chore: add env `ENTIRE_PAGE_OCR` to specify paddle/tesseract for entire page ocr (#209)

### Summary

We need a way to use paddle for the entire page OCR since the OCR result
could be better than tesseract, which has shown on some image files with
tables. This PR adds an environment variable `ENTIRE_PAGE_OCR` that can
be set to `paddle` or `tesseract`. We still use tesseract as default
since paddle performs poorly on entire-page English PDF files.

### Test
if you are on x86 arch, please run this snippet to install paddle
(paddle still doesn't work on m1/m2 chip locally):
```
pip install paddlepaddle #or pip install unstructured.paddlepaddle if on aarch64 arch
pip install unstructured_paddleocr
export LD_LIBRARY_PATH=/usr/local/lib:/usr/local/lib64
```
run the following script to see different entire page result from paddle
and tesseract
```
from unstructured_inference.inference.layout import DocumentLayout
import os 

def get_layout_from_image(ocr_languages):
    layout = DocumentLayout.from_image_file(""sample-docs/table-multi-row-column-cells.png"", ocr_languages=ocr_languages)
    # Create a list to store the layout elements with only ""text"" and ""type"" fields
    elements_dict_list = []
        
    for page in layout.pages:
        for element in page.elements:
            element_dict = {
                ""text"": element.text,
                ""type"": element.type
            }
            elements_dict_list.append(element_dict)
    return elements_dict_list


# default is tesseract
os.environ['ENTIRE_PAGE_OCR'] = ""tesseract""
tesseract_elements = get_layout_from_image(ocr_languages=""eng"")

# set env to use paddle and call function agin
os.environ['ENTIRE_PAGE_OCR'] = ""paddle""
paddle_elements = get_layout_from_image(ocr_languages=""en"")

# should expect difference
assert tesseract_elements != paddle_elements
# compare result
print(tesseract_elements)
print(paddle_elements)
```

### Note
There are different language code between tesseract and paddle on the
same language i.e, `en` in paddle and `eng` in tesseract for English.
This can be addressed once we introduce the language mappings from
standard language code to tesseract and to paddle respectively. However,
unlike tesseract, paddle does support passing in multiple languages, and
we will fallback to tesseract if thats the case (future PR).",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2023-09-14 18:46:54-04:00,14400,2023-09-14 18:46:54-04:00,14400,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_tables.py', 'test_elements.py', '__version__.py', 'elements.py', 'layout.py', 'paddle_ocr.py', 'tables.py']",['d6ccdc17b5beb25195cf75b70be4845e064ffbd8'],48,174,222,9,0.0,0.24742268041237114,0.8865979381443299
bfb90e32df86d7798fab26582f6561bd7dc7beca,"chore: skip paddle unittests local for mac (#214)

## Summary

Paddle still hanging on mac so unittests related to it will fail/hang,
skip those tests for local `make test`
* Added `@pytest.mark.skipif(skip_outside_ci)` check for any test that
use paddle

## Test

Run `make test` on m1 chip and test will pass (tho coverage will drop
from 95% to 93%)",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2023-09-19 18:07:36-04:00,14400,2023-09-19 18:07:36-04:00,14400,True,False,"['ci.yml', 'CHANGELOG.md', 'Makefile', 'test_layout.py', 'test_tables.py', 'test_elements.py', '__version__.py']",['173f63341a485f89923c43746b813b3eeed199e9'],11,60,71,7,0.0,1.0,1.0
5c2acc4de0fca337e6cc7083d8c85944b99f0b50,"feat: add evaluation metric for table extraction (#216)

## Summary

This PR resolves
[CORE-1930](https://unstructured-ai.atlassian.net/browse/CORE-1930). It
adds helpers to compute token ratios between two tables' (actual vs.
prediction). This score goes from 0 (no match at all) to 100 (fully
matched).

## metric sketch

1. represent tables as rows and columns data, with cells spanning
multiple columns or rows occupying the left upper most position while
leaving the rest of the positions empty
2. join the table together as a long string of text by `tab_token`
(often `\t` ) in a row then `row_break_token` (often `\n`) between rows
3. compare the string representations’
`rapidfuzz.fuzz.partial_token_ratio` with tokenizer that tokenizes words
and each number is its own token
4. do 2-3 again but this time join text along the columns instead of
rows (in practice just take the transpose of both pred and actual
tables)

e.g., 

This table:

![table-multi-row-column-cells](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/4e5bc0c9-9cc9-4cc3-a64b-6a229dd33931)

Would be represented as table

```python

Disability Category  Participants  Ballots Completed  Ballots Incomplete/Terminated                 Results                           None
               None          None               None                           None                Accuracy               Time to complete
              Blind             5                  1                              4              34.5%, n=1                  1199 sec, n=1
         Low Vision             5                  2                              3  98.3% n=2 (97.7%, n=3)  1716 sec, n=3 (1934 sec, n=2)
          Dexterity             5                  4                              1              98.3%, n=4                1672.1 sec, n=4
           Mobility             3                  3                              0              95.4%, n=3                  1416 sec, n=3
```

then as string by row

```python
('Disability Category\tParticipants\tBallots Completed\tBallots '
 'Incomplete/Terminated\tResults\t\n'
 '\t\t\t\tAccuracy\tTime to complete\n'
 'Blind\t5\t1\t4\t34.5%, n=1\t1199 sec, n=1\n'
 'Low Vision\t5\t2\t3\t98.3% n=2 (97.7%, n=3)\t1716 sec, n=3 (1934 sec, n=2)\n'
 'Dexterity\t5\t4\t1\t98.3%, n=4\t1672.1 sec, n=4\n'
 'Mobility\t3\t3\t0\t95.4%, n=3\t1416 sec, n=3')
```

string by column

```python
('Disability Category\t\tBlind\tLow Vision\tDexterity\tMobility\n'
 'Participants\t\t5\t5\t5\t3\n'
 'Ballots Completed\t\t1\t2\t4\t3\n'
 'Ballots Incomplete/Terminated\t\t4\t3\t1\t0\n'
 'Results\tAccuracy\t34.5%, n=1\t98.3% n=2 (97.7%, n=3)\t98.3%, n=4\t95.4%, '
 'n=3\n'
 '\tTime to complete\t1199 sec, n=1\t1716 sec, n=3 (1934 sec, n=2)\t1672.1 '
 'sec, n=4\t1416 sec, n=3')
```

## rational

1. This metric choose to represent tables as long strings. This is
intentional because we intent to run follow up tasks that treats tables
as text (RAG with LLM)
2. we use token ration instead of ratio so that numbers are compared as
a whole instead of comparing digits. This also ensures that if a word is
split by either OCR or table structure detection it is considered in the
metric as negative

Use the example above, we examine a few predictions and their scores

- predict 1 [pre surge]: lots of structural errors and mistakes in OCR:
**row: 58, column: 61**

![Screenshot 2023-09-19 at 8 46 28
AM](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/381cf7a7-625d-40ea-9e25-ec6911b633a5)

- predict 2 [post surge]: perfect structural extraction but mistakes in
OCR: **row: 92, column: 85**

![Screenshot 2023-09-20 at 9 01 56
AM](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/20498ca8-c3b6-457e-bdea-f131efc867fc)

- predict 3 [chipper]: incorrect structure on multi-row cells and
multi-line cells, but perfect OCR: **row: 84, column: 86**

![Untitled](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/78042969-01a9-4e9a-840c-1741f7ff71a2)



[CORE-1930]:
https://unstructured-ai.atlassian.net/browse/CORE-1930?atlOrigin=eyJpIjoiNWRkNTljNzYxNjVmNDY3MDlhMDU5Y2ZhYzA5YTRkZjUiLCJwIjoiZ2l0aHViLWNvbS1KU1cifQ",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-09-20 15:07:51-05:00,18000,2023-09-20 15:07:51-05:00,18000,True,False,"['CHANGELOG.md', 'base.in', 'base.txt', 'dev.txt', 'test.txt', 'easy_table.jpg', 'test_eval.py', '__version__.py', 'layoutelement.py', 'eval.py', 'tables.py']",['bfb90e32df86d7798fab26582f6561bd7dc7beca'],72,374,446,11,0.1950207468879668,1.0,0.6804979253112033
b9f032c7568bde9b4384bd655ffb15cef1fa7d0d,"Feat/save embedded images in pdf (#208)

Addresses unstructured issue
[#1332](https://github.com/Unstructured-IO/unstructured/issues/1332).
This PR will work together with unstructured PR
[#1371](https://github.com/Unstructured-IO/unstructured/pull/1371).
This PR also addresses `""true"" embedded images` issue #215.

### Summary
- Add functionality to extract and save images from the page
  - add the `extract_images` method to the `PageLayout` class
  - pass parameters related to extracting images from the page
- add Python script to evaluate image extraction with various PDF
processing libraries
- Add functionality to get only ""true"" embedded images when extracting
elements from PDF pages
- add functionality to extract image objects (`LTImage`) from a `PDF
layout element` parsed by `pdfminer.high_level.extract_pages`
  - update logic to determine `ImageTextRegion` in `load_pdf()`
- Update the `layout visualization` script to be able to show only image
elements if need

The following documents can be used for testing and evaluation.
-
[Captur-1317-5_ENG-p23.pdf](https://utic-dev-tech-fixtures.s3.us-east-2.amazonaws.com/pastebin/Captur-1317-5_ENG-p23.pdf)
-
[23-BERKSHIRE.pdf](https://utic-dev-tech-fixtures.s3.us-east-2.amazonaws.com/pastebin/23-BERKSHIRE.pdf)
-
[main.PMC6312790-p1.pdf](https://github.com/Unstructured-IO/unstructured-inference/files/12675967/main.PMC6312790_1-1.pdf)

### Testing
```
from unstructured_inference.inference.layout import DocumentLayout

f_path = ""sample-docs/embedded-images.pdf""

# default image output directory
doc = DocumentLayout.from_file(
    filename=f_path,
    extract_images_in_pdf=True,
)

# specific image output directory
doc = DocumentLayout.from_file(
    filename=f_path,
    extract_images_in_pdf=True,
    image_output_dir_path=<directory_path>,
)
```
### Evaluation
```
// Extracting Images
$ PYTHONPATH=. python examples/image-extraction/embedded-image-extraction.py Captur-1317-5_ENG-p23.pdf unstructured

// Layout Visualziation
$ PYTHONPATH=. python examples/layout_analysis/visualization.py Captur-1317-5_ENG-p23.pdf image_oly
```
**NOTE:** To reproduce the original results for comparision, you need to
replace [the
lines](https://github.com/Unstructured-IO/unstructured-inference/blob/feat/save-embedded-images-in-pdf/unstructured_inference/inference/layout.py#L650-L659)
with the following code snippet
```
_text, element_class = (
    (element.get_text(), EmbeddedTextRegion)
    if hasattr(element, ""get_text"")
    else (None, ImageTextRegion)
)
```",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-09-20 22:09:05-07:00,25200,2023-09-20 22:09:05-07:00,25200,True,False,"['CHANGELOG.md', 'README.md', 'embedded-image-extraction.py', 'requirements.txt', 'README.md', 'visualization.py', 'test_layout.py', '__version__.py', 'layout.py', 'layoutelement.py', 'pdf.py']",['5c2acc4de0fca337e6cc7083d8c85944b99f0b50'],20,265,285,11,0.3308270676691729,0.5413533834586466,0.9172932330827067
bfdf35798762bd656acef2ef9ade0e9c780118e0,chore: changelog repair (#221),cragwolfe,crag@unstructured.io,GitHub,noreply@github.com,2023-09-20 22:53:28-07:00,25200,2023-09-20 22:53:28-07:00,25200,True,False,"['CHANGELOG.md', '__version__.py']",['b9f032c7568bde9b4384bd655ffb15cef1fa7d0d'],7,3,10,2,,,
5e73202530d1faa995652144cece8aa8804decf2,"feat: add config class (#218)

- add a dataclass that contains configrations for inference processes
- the parameters can be specified via env variables, which overrides the
default values; this allows for flexibly setup in different
applications/deployments
- currently contains specifications for table and layout related
parameters
- followup needed to identify other parameters that can be added to this
config class",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-09-21 08:55:38-05:00,18000,2023-09-21 13:55:38+00:00,0,True,False,"['CHANGELOG.md', 'test_config.py', 'test_utils.py', '__version__.py', 'config.py', 'elements.py', 'layoutelement.py', 'tables.py', 'utils.py']",['bfdf35798762bd656acef2ef9ade0e9c780118e0'],20,122,142,9,0.7647058823529411,1.0,0.7058823529411765
eaa8d65c69b4aab2c69545e3b556865bbb1d9ddd,"Fix/nested bounding boxes (#201)

This PR implements two major changes:
* Replaces detectron2 with Yolox_quantized as default model
* Introduces an algorithm for reducing nested elements detected by any
model. As a benefit of these now is possible to detect more diverse
element types.
* Adds a property to `Rectangle` class to register the origin of the
data.
* Adds functionality to `annotate` function, to skip elements of certain
origins
* Adds functionality to `annotate` function to print additional details
of bounding boxes
* Tests updates
---------

Co-authored-by: Alan Bertl <alan@unstructured.io>
Co-authored-by: qued <64741807+qued@users.noreply.github.com>
Co-authored-by: Yao You <theyaoyou@gmail.com>",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-09-21 10:02:40-06:00,21600,2023-09-21 10:02:40-06:00,21600,True,False,"['CHANGELOG.md', 'conftest.py', 'test_layout.py', 'test_layout_element.py', 'test_model.py', 'test_yolox.py', 'test_elements.py', 'test_visualization.py', '__version__.py', 'elements.py', 'layout.py', 'layoutelement.py', 'base.py', 'detectron2onnx.py', 'unstructuredmodel.py', 'yolox.py', 'utils.py', 'visualize.py']",['5e73202530d1faa995652144cece8aa8804decf2'],169,506,675,18,0.0,0.5306122448979592,0.8816326530612245
8c6d6693c3d80c11f19e5a4f4138822a6479406f,"feat: make table transformer parameters configurable (#224)

- refactor `tables.py` so that the structure element confidence
threshold values are loaded from `inference_config`
- refactor intersection over box area threshold in
`objects_to_structure` to config intead of using hardwired value of 0.5
(default is still 0.5)",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-09-22 13:37:59-05:00,18000,2023-09-22 13:37:59-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py', 'config.py', 'tables.py']",['eaa8d65c69b4aab2c69545e3b556865bbb1d9ddd'],12,63,75,4,0.6875,0.6875,0.75
35ebea7968fe6a30cb3606b0486f8dfe6d833a54,"feat: add pre commit hook (#220)

- add config yaml (copied from `unstructured` repo)
- helps with dev's Quality of Life",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-09-22 14:21:55-05:00,18000,2023-09-22 19:21:55+00:00,0,True,False,['.pre-commit-config.yaml'],['8c6d6693c3d80c11f19e5a4f4138822a6479406f'],0,38,38,1,,,
cb2aff2e31572f44147f69b7458eea548cd54a4f,fix: padded boxes are not rescaled/shifted correctly (#229),Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-09-25 12:55:16-05:00,18000,2023-09-25 12:55:16-05:00,18000,True,False,"['CHANGELOG.md', 'test_tables.py', '__version__.py', 'tables.py']",['35ebea7968fe6a30cb3606b0486f8dfe6d833a54'],20,67,87,4,0.625,1.0,1.0
c4d3e8b0bf4321caba817efd6e3384a573461aff,"feat: add autoscaling for table images (#210)

Auto scale table images so that the text height is optimum for
`tesseract` OCR inference. This functionality will scaling images where
the estimated mean text height based on the `inference_config` setup:
table images with text height below
`inference_config.TESSERACT_MIN_TEXT_HEIGHT` or above
`inference_config.TESSERACT_MAX_TEXT_HEIGHT` are scaled so that the text
height is at `inference_config.TESSERACT_OPTIMUM_TEXT_HEIGHT`.

This PR resolves
[CORE-1863](https://unstructured-ai.atlassian.net/browse/CORE-1863)

## test

- this PR adds a unit test to confirm auto scale is triggered
- test the tokens computed without zoom and with zoom with the attached
image: with zoom the tokens should include the correct text ""Japanese""
in the table on the page. Without zoom (call get_tokens using main) we
won't see this token and instead you might find a token that look like
""Inpanere"". For this specific document it is best to set
`TESSERACT_MIN_TEXT_HEIGHT` to 12.

![layout-parser-paper-with-table](https://github.com/Unstructured-IO/unstructured-inference/assets/647930/7963bba0-67cb-48ee-b338-52b1c2620fc0)


[CORE-1863]:
https://unstructured-ai.atlassian.net/browse/CORE-1863?atlOrigin=eyJpIjoiNWRkNTljNzYxNjVmNDY3MDlhMDU5Y2ZhYzA5YTRkZjUiLCJwIjoiZ2l0aHViLWNvbS1KU1cifQ",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-09-25 15:33:05-05:00,18000,2023-09-25 20:33:05+00:00,0,True,False,"['CHANGELOG.md', 'base.txt', 'dev.txt', 'test.in', 'test.txt', 'test_tables.py', '__version__.py', 'config.py', 'tables.py', 'tesseract.py']",['cb2aff2e31572f44147f69b7458eea548cd54a4f'],11,113,124,10,0.7704918032786885,0.7704918032786885,1.0
f4236c8b271a4d0bca3a9411a405001b64f604b6,"Fix/pdf miner source property (#228)

This PR adds three possible values for `source` field:
* `pdfminer` as source for elements directly obtained from PDFs.
* `OCR-tesseract` and `OCR-paddle` for elements obtained with the
respective OCR engines.

All those new values are stored in a new class `Source` in unstructured_inference>constants.py

This would help users filter certain elements depending on how were
obtained.",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-09-26 11:05:15-06:00,21600,2023-09-26 11:05:15-06:00,21600,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_layout_element.py', '__version__.py', 'constants.py', 'elements.py', 'layout.py', 'layoutelement.py', 'detectron2onnx.py', 'yolox.py']",['c4d3e8b0bf4321caba817efd6e3384a573461aff'],16,62,78,10,0.5714285714285714,0.5714285714285714,0.6666666666666666
00b493631bb9b20f2f8ee6b043577c0f02372e7d,"Feat/219 keep extracted image elements (#225)

update `merge_inferred_layout_with_extracted_layout` to keep extracted image elements",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-09-26 11:26:04-07:00,25200,2023-09-26 13:26:04-05:00,18000,True,False,"['CHANGELOG.md', 'requirements.txt', 'README.md', 'embedded-image-extraction.py', 'requirements.txt', 'layout.py', 'layoutelement.py']",['f4236c8b271a4d0bca3a9411a405001b64f604b6'],8,22,30,7,0.0,0.0,0.0
12ca9d91c6b1a066d94fc2858b904a62bf3ee814,"chore: changelog fix, cut release 0.6.5 (#230)",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-09-26 17:37:23-07:00,25200,2023-09-26 17:37:23-07:00,25200,True,False,"['CHANGELOG.md', '__version__.py']",['00b493631bb9b20f2f8ee6b043577c0f02372e7d'],3,3,6,2,,,
cf15726a99db843bc6dcab4849577eca51d08af3,"chore: stop passing language code from tesseract mapping to paddle (#226)

### Summary

A user is flagging the assertion error for paddle language code:
```
AssertionError: param lang must in dict_keys(['ch', 'en', 'korean', 'japan', 'chinese_cht', 'ta', 'te', 'ka', 'latin', 'arabic', 'cyrillic', 'devanagari']), but got eng
```
and tried setting the `ocr_languages` param to 'en' (the correct lang
code for english in paddle) but also didn't work.
The reason is that the `ocr_languages` uses the mapping for tesseract
code which will convert `en` to `eng` since thats the correct lang code
for english in tesseract.

The quick workaround here is stop passing the lang code to paddle and
let it use default `en`, and this will be addressed once we have the
lang code mapping for paddle.

### Test
looks like user used this branch and got the lang parameter working from
[linked
comments](https://github.com/Unstructured-IO/unstructured-api/issues/247#issuecomment-1731923667)
:)
on api repo:
```
pip install paddlepaddle
pip install ""unstructured.PaddleOCR""
export ENTIRE_PAGE_OCR=paddle
make run-web-app
```
* check error before this change:
```
curl  -X 'POST'  'http://localhost:8000/general/v0/general'   -H 'accept: application/json'  -F 'files=@sample-docs/english-and-korean.png'   -F 'ocr_languages=en'  | jq -C . | less -R
```
will see the error:
```
{
  ""detail"": ""param lang must in dict_keys(['ch', 'en', 'korean', 'japan', 'chinese_cht', 'ta', 'te', 'ka', 'latin', 'arabic', 'cyrillic', 'devanagari']), but got eng""
}
```
also in logger you will see `INFO Loading paddle with CPU on
language=eng...` since tesseract mapping converts `en` to `eng`.
* check after this change:

Checkout to this branch and install inference repo into your env (the
same env thats running api) with `pip install -e .`

Rerun `make run-web-app`

Run the curl command again, you won't get the result on m1 chip since
paddle doesn't work on it but from the logger info you can see
`2023-09-27 12:48:48,120 unstructured_inference INFO Loading paddle with
CPU on language=en...`, which means the lang parameter is using default
`en` (logger info is coming from [this
line](https://github.com/Unstructured-IO/unstructured-inference/blob/main/unstructured_inference/models/paddle_ocr.py#L22)).

---------

Co-authored-by: shreyanid <42684285+shreyanid@users.noreply.github.com>",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2023-09-27 19:46:19-04:00,14400,2023-09-27 16:46:19-07:00,25200,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py']",['12ca9d91c6b1a066d94fc2858b904a62bf3ee814'],5,8,13,3,,,
ffb1f0bcdcaae85e40da1146462d8de2881d57db,"Refactor: Remove OCR related code for entire page OCR (#231)

## Summary
One part of OCR refactor to move it from inference repo to unstructured
repo. This PR removes all OCR related code for entire page OCR, which
means all table related OCR still remain the same (will be moved after
table refactor to accept preprocessed OCR data)

## Test
Please see test description in
https://github.com/Unstructured-IO/unstructured/pull/1579, since those
two need to work together.

## Note
The ingest test won't pass until we merge the unstructured refactor PR

---------

Co-authored-by: christinestraub <christinemstraub@gmail.com>",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2023-10-05 14:23:35-04:00,14400,2023-10-05 11:23:35-07:00,25200,True,False,"['CHANGELOG.md', 'Dockerfile', 'visualization.py', 'conftest.py', 'test_layout.py', 'test_layout_element.py', 'test_model.py', 'test_tesseract.py', 'test_elements.py', '__version__.py', 'constants.py', 'elements.py', 'layout.py', 'layoutelement.py', 'paddle_ocr.py', 'tables.py', 'tesseract.py']",['cf15726a99db843bc6dcab4849577eca51d08af3'],1024,30,1054,17,0.9043478260869565,0.463768115942029,0.2391304347826087
66fb1796a202e353256665bbb3781900dda52438,"Feat/download quantized model (#242)

After this PR is merged two main changes will be done:

* `onnxruntime` will be pinned to be <1.16 due some changes in
quantization recently introduced not being compatible for the moment
with the library and model.
* yolox_quantized will be downloaded from HF instead being generated at
runtime.

In order to test you can execute:
```
from unstructured_inference.inference import layout
from unstructured_inference.models.base import get_model

file = ""sample-docs/example_table.jpg""
model = get_model(""yolox_quantized"")
doc = layout.DocumentLayout.from_image_file(
    file,
    model,
    supplement_with_ocr_elements=True,
    ocr_strategy=""never"",
)
```

And should show a download from HF downloading a file called
`yolox_l0.05_quantized.onnx`",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-10-06 13:47:23-05:00,18000,2023-10-06 13:47:23-05:00,18000,True,False,"['CHANGELOG.md', 'base.in', 'base.txt', 'dev.txt', 'test.txt', '__version__.py', 'yolox.py']",['ffb1f0bcdcaae85e40da1146462d8de2881d57db'],67,65,132,7,1.0,0.0,1.0
fd0cc54fe1eca53dd2f815ceb4b01d93b608e234,"Fix: sort elements extracted by `pdfminer` (#244)

### Summary
- sort elements extracted by `pdfminer` to get consistent results from
`aggregate_by_block()`
### Testing
PDF:
[recalibrating-risk-report_4-4.pdf](https://github.com/Unstructured-IO/unstructured-inference/files/12835342/recalibrating-risk-report_4-4.pdf)

```
f_path = ""dist/docs/recalibrating-risk-report_4-4.pdf""

layout = process_file_with_model(
    filename=f_path,
    model_name=None,
)

elements = layout.pages[0].elements
print(""\n\n"".join([str(el) for el in elements]))
print(len(elements))
```",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-10-06 13:47:48-07:00,25200,2023-10-06 13:47:48-07:00,25200,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py']",['66fb1796a202e353256665bbb3781900dda52438'],1,7,8,3,0.0,0.0,0.0
8ce5315fb4adf9a54000db21fafda725398b17f6,"enhancement: remove control characters from text in all layout elements (#245)

Currently, the `unstructured-inference` library removes control
characters only from text filled by
[aggregate_by_block()](https://github.com/Unstructured-IO/unstructured-inference/blob/ffb1f0b/unstructured_inference/inference/elements.py#L256).
This PR is intended to remove control characters from the text of all
layout elements to get clearer text.
This PR also fixes an issue of words being concatenated together when
there are spaces (e.g. `features Data` vs. `featuresData`) produced
after performing OCR refactoring (attached image).

![unknown_002](https://github.com/Unstructured-IO/unstructured-inference/assets/9475974/880e2403-c534-4a0d-9d4b-4c5a66ea26c8)

### Summary
- remove control characters from text in all layout elements
- update `remove_control_characters()` to replace a newline character
with a space
### Testing
PDF:
[main.PMC6312790_2-2.pdf](https://github.com/Unstructured-IO/unstructured-inference/files/12851045/main.PMC6312790_2-2.pdf)
```
layout = process_file_with_model(
    filename=""main.PMC6312790_2-2.pdf"",
    model_name=None,
)

elements = layout.pages[0].elements
print(""\n\n"".join([str(el) for el in elements]))
```",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-10-10 12:10:32-07:00,25200,2023-10-10 15:10:32-04:00,14400,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'elements.py']",['fd0cc54fe1eca53dd2f815ceb4b01d93b608e234'],4,12,16,4,1.0,1.0,0.0
f55671ceee7ad974b6d727fc08f6332b01edc378,"feat: chipper v2 (#232)

This PR adds chipper v2 to the library, leveraging inference speedup and
support for hierarchy (assign a parent element to the elements)

The main library changes are
* New model, `chipperv2` is available. There are significant changes
that necessitate code changes in pre and post-processing beyond just
changes to the weights.
* a schema change to the `TextRegion` object, which now has a `bbox`
property, rather than being a subclass of `Rectangle`
* `LayoutElement` now has a `parent` property that can be populated with
another `LayoutElement` to represent inferred hierarchy.
* `LocationlessLayoutElement` is removed. Elements produced by Chipper
now have bounding boxes, and if we need to handle elements without
bounding boxes in the future, we can make the `bbox` property optional.",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-10-11 11:48:38-05:00,18000,2023-10-11 16:48:38+00:00,0,True,False,"['ci.yml', 'CHANGELOG.md', 'conftest.py', 'test_layout.py', 'test_layout_element.py', 'test_chippermodel.py', 'test_detectron2onnx.py', 'test_model.py', 'test_elements.py', '__version__.py', 'constants.py', 'elements.py', 'layout.py', 'layoutelement.py', 'ordering.py', 'chipper.py', 'detectron2onnx.py', 'unstructuredmodel.py', 'yolox.py']",['8ce5315fb4adf9a54000db21fafda725398b17f6'],349,880,1229,19,0.1445221445221445,0.5477855477855478,0.45454545454545453
870c300f2b5e732a090edf2c1fed0f58be4976ed,chore(deps): Bump actions/checkout from 3 to 4 (#238),dependabot[bot],49699333+dependabot[bot]@users.noreply.github.com,GitHub,noreply@github.com,2023-10-11 14:42:55-05:00,18000,2023-10-11 14:42:55-05:00,18000,True,False,['ci.yml'],['f55671ceee7ad974b6d727fc08f6332b01edc378'],7,7,14,1,,,
d989527c14f898a8d3b9264eb919706dedb9d2ea,fix: Error when loading Chipper model (#248),Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-10-12 10:02:35+11:00,-39600,2023-10-11 18:02:35-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py', 'chipper.py']",['870c300f2b5e732a090edf2c1fed0f58be4976ed'],4,4,8,3,,,
ae5c2a842ce076f158af0983331cca256c94ec9e,"chore: chipper model name should point to latest chipper version (#250)

Update model names so that `""chipper""` points to latest version of
Chipper, while `""chipperv1""` points to old version.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-10-11 18:53:59-05:00,18000,2023-10-11 16:53:59-07:00,25200,True,False,"['CHANGELOG.md', 'test_chippermodel.py', '__version__.py', 'constants.py', 'chipper.py']",['d989527c14f898a8d3b9264eb919706dedb9d2ea'],7,10,17,5,,,
249308923cdb01b8a6000dff419d2a7c156f54b3,"feat: super gradients integration (#246)

Add new detection class which allows the user to supply a
super-gradients model with the following values;
1. model_arch supported by super-gradients
2. model_path to the model weights
3. yaml file with a names section containing in order the labels for the
classes to the object detection model
4. callback function which takes an image and a super-gradients model
and returns supervision detections

Wlll be used for AF contract and contracts in the future.",pravin-unstructured,129794394+pravin-unstructured@users.noreply.github.com,GitHub,noreply@github.com,2023-10-12 23:13:12-04:00,14400,2023-10-12 22:13:12-05:00,18000,True,False,"['CHANGELOG.md', 'base.in', 'base.txt', 'dev.txt', 'test.in', 'test.txt', 'test_supergradients.py', '__version__.py', 'constants.py', 'layout.py', 'base.py', 'super_gradients.py']",['ae5c2a842ce076f158af0983331cca256c94ec9e'],58,443,501,12,0.04,0.9466666666666667,0.7066666666666667
c305d10e7d32a446b5f3fca9063dfe7942dbd7be,"Fix PDFMiner bug (#253)

Issue:

In some cases, PDFMiner identifies an image document as a full page and
in other installations not. It is difficult to find out when PDFMiner
behaves in one way or another. In either case tested, the version is
`pdfminer.six v20221105`. The solution is to ignore any annotation
coming from Chipper in case the full page clearing code is activated.
Not sure if this is relevant to other models.

---------

Co-authored-by: Antonio Jimeno Yepes <antonio@unstructured.io>",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-10-13 22:55:05+11:00,-39600,2023-10-13 22:55:05+11:00,-39600,True,False,"['CHANGELOG.md', '__version__.py', 'layoutelement.py', 'chipper.py']",['249308923cdb01b8a6000dff419d2a7c156f54b3'],2,9,11,4,0.0,0.3333333333333333,0.3333333333333333
f11559bbbf658defc25d2ed084835ca4e4939e5a,"Faster version of Chipper (#252)

Co-authored-by: Ubuntu <ubuntu@ip-172-31-47-133.us-east-2.compute.internal>
Co-authored-by: Antonio Jimeno Yepes <antonio@unstructured.io>
Co-authored-by: Sebastian Laverde Alfonso <lavmlk20201@gmail.com>",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-10-14 08:32:35+11:00,-39600,2023-10-14 08:32:35+11:00,-39600,True,False,"['CHANGELOG.md', 'test_chippermodel.py', '__version__.py', 'chipper.py']",['c305d10e7d32a446b5f3fca9063dfe7942dbd7be'],14,85,99,4,0.08333333333333333,0.0,0.25
dbb203a90ca7c596a0945712f09f81415304949e,"build: improve packaging (#249)

PR to make to make packaging a little nicer, in line with how packaging
works in `unstructured`. In particular, support for extras is added.

This consists of:
- Adding the file `sg.in` for dependencies related to `supergradients`.
This file has been `pip-compile`d with output `sg.txt`.
- All dependencies have been `pip-compile`d.
- Adding the file `constraints.in` to add a `numpy` constraint that is
required for compliance with `supergradients`. Dependencies that precede
`sg.in` need to know about this to avoid conflicts. `constraints.in` is
added as a constraints file for all other dependency files.
- `make` targets are added for installing `supergradients` dependencies.
- CI is updated to install `supergradients` dependencies.
- `supergradients` extra is added to `setup.py` and `MANIFEST.in` so it
can be picked up by PyPi.
- To support the fact that the `supergradients` dependencies are not
guaranteed to be installed, the way imports are handled in the
`super_gradients.py` model file has been changed so imports are only
attempted in the model constructor, in a module-level global variable.
The constructor was used instead of doing the import in `initialize` due
to an error that occurred during import when initiated from
`initialize`.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-10-13 20:07:05-05:00,18000,2023-10-14 01:07:05+00:00,0,True,False,"['CHANGELOG.md', 'MANIFEST.in', 'Makefile', 'base.in', 'base.txt', 'constraints.in', 'dev.in', 'dev.txt', 'sg.in', 'sg.txt', 'test.in', 'test.txt', 'setup.py', '__version__.py', 'super_gradients.py']",['f11559bbbf658defc25d2ed084835ca4e4939e5a'],312,417,729,15,1.0,1.0,1.0
63eecdfc5f0f5be768cffbfb75c4fb050b8767ad,"fix: invalid zoom lead to cv2 error (#257)

- fix a bug where zoom factor <= 0 raises an exception at runtime
- now zoom factor <=0 will result in no scaling of the image

Related report from user:
https://unstructuredw-kbe4326.slack.com/archives/C044N0YV08G/p1697456659162509

Test:
This PR adds a unit test with cases where zoom factor is 0 or -1.
Without this fix the same error the user reported shows up:
```
error: (-215:Assertion failed) inv_scale_x > 0 in function 'resize'
```",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-10-16 17:01:34-05:00,18000,2023-10-16 17:01:34-05:00,18000,True,False,"['CHANGELOG.md', 'test_tables.py', '__version__.py', 'tables.py']",['dbb203a90ca7c596a0945712f09f81415304949e'],1,19,20,4,0.0,1.0,1.0
b1dba87fc438c262ceff6da73b3277d6c9e2e18e,"fix: memory leak on chipper processor, beam search parameters, and bbox bug (#258)

This PR intends to solve the following issues:

* Memory leak in DonutProcessor when using large images in numpy format
* Use the right settings for beam search size > 1
* Solve a bug that in very rare cases made the last element predicted by
Chipper to have a bbox = None",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-10-17 17:57:31+11:00,-39600,2023-10-16 23:57:31-07:00,25200,True,False,"['CHANGELOG.md', '__version__.py', 'chipper.py']",['63eecdfc5f0f5be768cffbfb75c4fb050b8767ad'],8,11,19,3,1.0,1.0,0.0
05f9b61d839755986be1b16a4067af8a8fc7fa3f,"fix(deps): add onnx as base requirement (#255)

`onnx` is required as an explicit dep for unstructured-inference -- it's
not pulled in by `onnxruntime`.
As discovered when bumping to unstructured-inference==0.7.5 in [this
unstructured
commit](https://github.com/Unstructured-IO/unstructured/pull/1756/commits/1878da0f0d1c83c9f2c9efee2de6ae7d0cf437f5).",cragwolfe,crag@unstructured.io,GitHub,noreply@github.com,2023-10-17 08:49:37-07:00,25200,2023-10-17 15:49:37+00:00,0,True,False,"['CHANGELOG.md', 'base.in', 'base.txt', 'sg.txt', '__version__.py']",['b1dba87fc438c262ceff6da73b3277d6c9e2e18e'],2,14,16,5,,,
e8caa4eee018dbd1f55d4ed23ee245645b3cc689,"Chore: allow table model to accept optional OCR data (#256)

## Summary

Change `run_prediction` in the table model to accept optional OCR data
for table OCR refactor as an alternative to getting OCR tokens in
`get_tokens`.

## TODO

please see
[CORE-2259](https://unstructured-ai.atlassian.net/browse/CORE-2259) to
update `ocr_token` from dict to a data class.

[CORE-2259]:
https://unstructured-ai.atlassian.net/browse/CORE-2259?atlOrigin=eyJpIjoiNWRkNTljNzYxNjVmNDY3MDlhMDU5Y2ZhYzA5YTRkZjUiLCJwIjoiZ2l0aHViLWNvbS1KU1cifQ",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2023-10-17 12:56:04-04:00,14400,2023-10-17 12:56:04-04:00,14400,True,False,"['CHANGELOG.md', 'test_tables.py', '__version__.py', 'tables.py']",['05f9b61d839755986be1b16a4067af8a8fc7fa3f'],7,46,53,4,0.1111111111111111,1.0,0.5
5624a69a5a7535e8c4629dc173e0c636f1436896,"Fix/no order chipper elements (#260)

This code can't be executed with the current version of
`unstructured-inference` due a lack of coordinates on Picture elements
produced by Chipper.
However, those elements shouldn't be ordered at all, so the fix is to
skip ordering when Chipper is used.

After this PR is merged this code is correctly executed.

```
from unstructured_inference.inference import layout
from unstructured_inference.models.base import get_model

file = ""sample-docs/recalibrating-risk-report.pdf""
model = get_model(""chipperv1"")
doc = layout.DocumentLayout.from_file(
    file,
    model,
)

print(doc)
```",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-10-17 17:25:27-05:00,18000,2023-10-18 09:25:27+11:00,-39600,True,False,"['CHANGELOG.md', '__version__.py', 'layout.py']",['e8caa4eee018dbd1f55d4ed23ee245645b3cc689'],5,20,25,3,0.0,0.5555555555555556,1.0
7b99828dc2d79c60f82db8f7353cf88354e637a3,"fix: chipper memory problem with long documents on Intel CPUs (#261)

Co-authored-by: Antonio Jimeno Yepes <antonio@unstructured.io>",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-10-19 07:05:18+11:00,-39600,2023-10-19 07:05:18+11:00,-39600,True,False,"['CHANGELOG.md', '__version__.py', 'chipper.py']",['5624a69a5a7535e8c4629dc173e0c636f1436896'],28,35,63,3,0.0,0.0,1.0
2ee38e6cd5c924fa272d661eceb80e53ca9eb42e,"fix: annotate image is fixed after refactor (#262)

Currently the code for annotate() don't add details when
add_details=True, for example:

```
from unstructured_inference.inference.layout import DocumentLayout
from unstructured_inference.models.base import get_model

file = ""example-docs/layout-parser-paper-fast.pdf""
model = get_model(""yolox_quantized"")
doc = DocumentLayout.from_file(file,model)

for i,page in enumerate(doc.pages):
    page.annotate(add_details=True).save(f""{i}.png"")
```

After this PR is merged, the resulting image should show origin for all
elements using the same code.",Benjamin Torres,benjats07@users.noreply.github.com,GitHub,noreply@github.com,2023-10-18 21:02:27-05:00,18000,2023-10-19 13:02:27+11:00,-39600,True,False,"['CHANGELOG.md', 'test_visualization.py', 'layout.py', 'visualize.py']",['7b99828dc2d79c60f82db8f7353cf88354e637a3'],11,12,23,4,,,
326f1809e33b05b0b2fb94b507200c3296a753c0,"Feat: add more output format for table inference (#263)

This PR addresses
[CORE-2307](https://unstructured-ai.atlassian.net/browse/CORE-2307)
- add a new kwarg to `UnstructuredTableTransformerModel.run_prediction`:
`output_format`
- default `output_format` is `html`, which is current behavior: output
html string representation of the table
- another options available is `dataframe`, which returns a pandas
dataframe representation of the table
- if not specified or any other string value for `output_format` it
returns a list of dictionaries: table cell format, the original output
format from table transformer
- `unstructured.model.tables.recognize` no longer accepts `out_html`
kwarg and it now only returns table cell format

[CORE-2307]:
https://unstructured-ai.atlassian.net/browse/CORE-2307?atlOrigin=eyJpIjoiNWRkNTljNzYxNjVmNDY3MDlhMDU5Y2ZhYzA5YTRkZjUiLCJwIjoiZ2l0aHViLWNvbS1KU1cifQ

---------

Co-authored-by: qued <64741807+qued@users.noreply.github.com>",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-10-20 17:03:56-05:00,18000,2023-10-20 17:03:56-05:00,18000,True,False,"['CHANGELOG.md', 'conftest.py', 'test_tables.py', '__version__.py', 'tables.py']",['2ee38e6cd5c924fa272d661eceb80e53ca9eb42e'],16,107,123,5,0.0,0.5806451612903226,0.5967741935483871
1cf12e90abda720086bcf03d1aefcbaaeef4fc4f,"chore: streamline kwarg handling (#264)

Improves kwarg handling so that kwargs are handled explicitly when needed, and suppressed otherwise.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-10-21 02:37:55-05:00,18000,2023-10-21 07:37:55+00:00,0,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py']",['326f1809e33b05b0b2fb94b507200c3296a753c0'],17,10,27,4,1.0,0.0,1.0
76ac6ab2fc400ad0b1a4e0fa2624ee6313578c25,"Feat/chipper gpu float16 (#267)

We added the automatic mixed precision for CPU, but this is needed as
well for GPU running. This PR makes this possible for GPU.

For testing, probably before and after the change on any long page.

```
from unstructured_inference.inference.layout import DocumentLayout
from unstructured_inference.models.base import get_model

model = get_model(""chipper"")
doc = DocumentLayout.from_file(""sample-docs/layout-parser-paper.pdf"",
                               detection_model=model, pdf_image_dpi=300)
```

---------

Co-authored-by: Antonio Jimeno Yepes <antonio@unstructured.io>",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-10-27 10:19:36+11:00,-39600,2023-10-27 10:19:36+11:00,-39600,True,False,"['CHANGELOG.md', '__version__.py', 'chipper.py']",['1cf12e90abda720086bcf03d1aefcbaaeef4fc4f'],2,9,11,3,0.0,0.0,1.0
b63e48c4dae8f9af23550bb2b1963bab5d5df9c3,"build: update ingest installation invocation (#269)

The make targets from `unstructured` used to install extras are no
longer functional (need to be updated or removed). This PR updates
`unstructured-inference` CI to use a working make target from
`unstructured`.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-10-27 00:46:05-05:00,18000,2023-10-26 22:46:05-07:00,25200,True,False,['ci.yml'],['76ac6ab2fc400ad0b1a4e0fa2624ee6313578c25'],11,1,12,1,,,
008b6af160385988333022af1957648f9b5b338b,"enhancement: better error message on image/page extraction mismatch (#276)

Removed the reference to Poppler in error message when number of images
extracted doesn't match the number of page layouts extracted (I'm no
longer confident that this is caused by Poppler not being installed).
Also provided some details in the message about how many of each were
extracted, and updated the test associated with this error.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-11-03 13:01:52-05:00,18000,2023-11-03 13:01:52-05:00,18000,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py']",['b63e48c4dae8f9af23550bb2b1963bab5d5df9c3'],5,7,12,4,0.0,1.0,0.0
c4afe9ff1460b199626d94b9e558ae449be08760,"chore: rolling slack invite link in chipper logger info (#277)

^^",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2023-11-03 16:12:47-04:00,14400,2023-11-03 16:12:47-04:00,14400,True,False,"['CHANGELOG.md', '__version__.py', 'base.py', 'tables.py']",['008b6af160385988333022af1957648f9b5b338b'],5,5,10,4,1.0,1.0,0.0
76f99005277f637470cc80ea600ccddd526e7041,"chore: remove logger info for chipper since its private (#278)

Remove the logger info that user won't be able to see since chipper is
only available in host API.",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2023-11-06 12:44:54-05:00,18000,2023-11-06 12:44:54-05:00,18000,True,False,"['CHANGELOG.md', 'test_model.py', '__version__.py', 'base.py']",['c4afe9ff1460b199626d94b9e558ae449be08760'],21,3,24,4,0.4375,0.4375,0.0
e602972e05e933f1e744b4715bd8b22a181e3d7a,"fix: reformat chipper table element to match standard format (#279)

This PR addresses
[CORE-2485](https://unstructured-ai.atlassian.net/browse/CORE-2485)
- now table's html representation is in `text_as_html` attribute
- the attribute `text` now only contains text without any html tags
- add a new utils to strip tags from html strings

[CORE-2485]:
https://unstructured-ai.atlassian.net/browse/CORE-2485?atlOrigin=eyJpIjoiNWRkNTljNzYxNjVmNDY3MDlhMDU5Y2ZhYzA5YTRkZjUiLCJwIjoiZ2l0aHViLWNvbS1KU1cifQ",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-11-06 12:05:36-06:00,21600,2023-11-06 18:05:36+00:00,0,True,False,"['CHANGELOG.md', 'test_chippermodel.py', 'test_utils.py', '__version__.py', 'chipper.py', 'utils.py']",['76f99005277f637470cc80ea600ccddd526e7041'],6,68,74,6,1.0,1.0,1.0
48ba579d58984d998e777d84854d502120d397c4,ci: update ingest script to match new folder structure (#280),Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-11-06 12:37:00-06:00,21600,2023-11-06 18:37:00+00:00,0,True,False,['test-unstructured-ingest-helper.sh'],['e602972e05e933f1e744b4715bd8b22a181e3d7a'],8,8,16,1,,,
cf03bc1e601d5be2b5f2ff6df74568f2b55ac03f,"chore: change the default model to yolox (#275)

The `yolox` model appears to perform better on tables.",Austin Walker,austin@unstructured.io,GitHub,noreply@github.com,2023-11-07 14:55:47-05:00,18000,2023-11-07 19:55:47+00:00,0,True,False,"['CHANGELOG.md', '__version__.py', 'base.py']",['48ba579d58984d998e777d84854d502120d397c4'],2,6,8,3,,,
b022d37a35c09a1df27e8503ed52890a401091e6,"enhancement: suppress UserWarning (#282)

Closes #281 

### Summary
Introduces check to see what model providers are available locally
before making an InferenceSession call. Providers are kept in order of
preference.",John,43506685+Coniferish@users.noreply.github.com,GitHub,noreply@github.com,2023-11-14 17:28:27-06:00,21600,2023-11-14 17:28:27-06:00,21600,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'detectron2onnx.py', 'yolox.py']",['cf03bc1e601d5be2b5f2ff6df74568f2b55ac03f'],11,44,55,5,0.8571428571428571,0.0,0.0
a7031cc6624dee8552e550991a533b35dec17e60,"enhancement: bring ruff params in line with unstructured (#284)

This PR brings `ruff` params in line with `unstructured`.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-11-14 22:54:52-06:00,21600,2023-11-15 04:54:52+00:00,0,True,False,['Makefile'],['b022d37a35c09a1df27e8503ed52890a401091e6'],2,2,4,1,,,
c431935eb51ca2bed4bdeb90c88970b389d14100,"Chore: nit of table init logger to show up the log info (#290)

`""Loading the table structure model ...""` wasn't showing up in log since
it was using `logging.info` not `logger.info`",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2023-11-16 13:41:16-05:00,18000,2023-11-16 13:41:16-05:00,18000,True,False,"['CHANGELOG.md', '__version__.py', 'tables.py']",['a7031cc6624dee8552e550991a533b35dec17e60'],6,6,12,3,,,
f35b83072f422eac94863ce5ade9412ba913040d,"Feat: improve image extraction by supporting all types of image elements detected by detection models (#286)

Closes #285.
### Summary
- support extracting elements with types `Picture` and `Figure`
- add a class `ElementType` for the element type constants and use the
constants to replace element type strings

### Testing
PDF:
[algebra-graph-level1-1.pdf](https://github.com/Unstructured-IO/unstructured-inference/files/13368976/algebra-graph-level1-1.pdf)

```
from unstructured_inference.inference.layout import DocumentLayout

doc = DocumentLayout.from_file(
    filename=""algebra-graph-level1-1.pdf"",
    extract_images_in_pdf=True,
)
```",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-11-16 14:16:15-08:00,28800,2023-11-16 14:16:15-08:00,28800,True,False,"['.gitignore', 'CHANGELOG.md', '__version__.py', 'constants.py', 'layout.py', 'layoutelement.py', 'detectron2.py', 'unstructuredmodel.py', 'yolox.py']",['c431935eb51ca2bed4bdeb90c88970b389d14100'],30,63,93,9,0.0,0.0,0.375
fe383c2a19d3ae1b4817a077f95feeda80ef0a75,"Initial commit for removing super-gradients dependencies and allowing… (#287)

… general exported Onnx Object detections models to be used. Still
figuring out how to build unit test.

---------

Co-authored-by: EC2 Default User <ec2-user@ip-10-4-100-78.us-east-2.compute.internal>
Co-authored-by: Alan Bertl <alan@unstructured.io>
Co-authored-by: qued <64741807+qued@users.noreply.github.com>",pravin-unstructured,129794394+pravin-unstructured@users.noreply.github.com,GitHub,noreply@github.com,2023-11-17 13:39:37-05:00,18000,2023-11-17 13:39:37-05:00,18000,True,False,"['ci.yml', 'CHANGELOG.md', 'MANIFEST.in', 'Makefile', 'base.txt', 'constraints.in', 'dev.txt', 'sg.in', 'sg.txt', 'test.txt', 'setup.py', 'test_donut.py', 'test_supergradients.py', '__version__.py', 'base.py', 'chipper.py', 'super_gradients.py']",['f35b83072f422eac94863ce5ade9412ba913040d'],510,193,703,17,0.1,0.7,0.0
6ed8ac2e919723b7dde1af4f304997566047a97b,"enhancement: get model name and initialization params externally (#291)

Added a method to externally inject a supergradients ONNX model. By
setting the environment variable `UNSTRUCTURED_DEFAULT_MODEL_NAME` one
can override the default model. By setting the environment variable
`UNSTRUCTURED_DEFAULT_MODEL_INITIALIZE_PARAMS_JSON_PATH`, one can
specify the path to a JSON containing model initialization parameters.

#### Testing:

```python
import os
from unstructured_inference.models.base import get_model
os.environ[""UNSTRUCTURED_DEFAULT_MODEL_NAME""] = ""detectron2_onnx""
model = get_model()
print(type(model))

```
Output should be `UnstructuredDetectronONNXModel` as opposed to
`UnstructuredYoloXModel`.

```python
from unittest import mock
import os
import json
from unstructured_inference.models.base import get_model
from huggingface_hub import hf_hub_download

label_map = {0: ""Blue"", 1: ""Red""}
model_path = hf_hub_download(""unstructuredio/yolo_x_layout"", ""yolox_tiny.onnx"")
json_dict = {""model_path"": model_path, ""label_map"": label_map}

os.environ[""UNSTRUCTURED_DEFAULT_MODEL_NAME""] = ""yolox""
os.environ[""UNSTRUCTURED_DEFAULT_MODEL_INITIALIZE_PARAMS_JSON_PATH""] = ""some/fake/path.json""
with mock.patch(""builtins.open"", mock.mock_open(read_data=json.dumps(json_dict))):
    model = get_model()

print(model.layout_classes)

```
Output should be `{0: ""Blue"", 1: ""Red""}` as opposed to the normal YoloX
labels.",qued,64741807+qued@users.noreply.github.com,GitHub,noreply@github.com,2023-11-20 10:19:30-06:00,21600,2023-11-20 11:19:30-05:00,18000,True,False,"['CHANGELOG.md', 'test_layout.py', 'test_model.py', '__version__.py', 'base.py', 'chipper.py', 'detectron2onnx.py']",['fe383c2a19d3ae1b4817a077f95feeda80ef0a75'],68,121,189,7,1.0,1.0,1.0
0f0c2be07c673615217b214937f50a091676a8aa,"fix bug which allows label map from initialize params to be used from… (#293)

… reading in a json file.",pravin-unstructured,129794394+pravin-unstructured@users.noreply.github.com,GitHub,noreply@github.com,2023-11-21 13:29:00-05:00,18000,2023-11-21 13:29:00-05:00,18000,True,False,"['CHANGELOG.md', 'test_supergradients.py', '__version__.py', 'super_gradients.py']",['6ed8ac2e919723b7dde1af4f304997566047a97b'],28,32,60,4,,,
631e6fb0c0117e761d486693e2f806644b5bc667,"Feat/improve chipper bounding boxes (#292)

Chipper bounding boxes largely exceed the area where the annotated text
is. This PR intends solving this problem.

There are several fixes applied:

* Improved cross attention processing. Maps are filtered at the head
level, which is normalised [0-1], this improves the bounding box
definition.
* The correlation between the token index and cross attention map has
been resolved. Before, with beam search size = 1 or 3 there were cases
in which the cross attention map did not match the token being
processed.

In addition, the empty areas of the bounding boxes have been cleaned and
the overlaps between bounding boxes are resolved by identifying the
largest margin that separates both bounding boxes, identified as the
largest gap without text either in the horizontal or vertical
directions.

Note: overlapping bounding boxes for child elements are not resolved for
now. In the case of a list with list items, the list element will be
affected by the overlapping resolution code.

---------

Co-authored-by: Antonio Jimeno Yepes <antonio@unstructured.io>",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-11-29 04:53:47+01:00,-3600,2023-11-29 14:53:47+11:00,-39600,True,False,"['CHANGELOG.md', 'test_chippermodel.py', '__version__.py', 'chipper.py']",['0f0c2be07c673615217b214937f50a091676a8aa'],31,668,699,4,0.13114754098360656,0.15846994535519127,0.7185792349726776
2b292542fb3848b43f586054d4d966fe3a729771,"Refactor: remove text extraction (`pdfminer`) related code (#294)

### Summary
This PR is the first part of `pdfminer` refactor to move it from
`unstructured-inference` repo to `unstructured` repo. This PR removes
all `pdfminer` related code from `unstructured-inference` repo and works
together with the unstructured refactor PR -
https://github.com/Unstructured-IO/unstructured/pull/2158.

### Note
The ingest test won't pass until we merge the unstructured refactor PR -
https://github.com/Unstructured-IO/unstructured/pull/2158.

### TODO
- image extraction refactor to move it from `unstructured-inference`
repo to `unstructured` repo",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-11-30 21:37:38-08:00,28800,2023-11-30 21:37:38-08:00,28800,True,False,"['CHANGELOG.md', 'visualization.py', 'ocr_layout_supplement.py', 'test_layout.py', 'test_model.py', 'test_yolox.py', 'test_elements.py', '__version__.py', 'constants.py', 'layout.py', 'pdf.py', '__init__.py', 'pdfminer.py']",['631e6fb0c0117e761d486693e2f806644b5bc667'],311,72,383,13,0.7,0.5722222222222222,0.49444444444444446
794f38b27e5ed6325e930e1b5b87410a7bf53620,"Refactor: remove image extraction related code (#299)

### Summary
This PR is the first part of the ""image extraction"" refactor to move it
from unstructured-inference repo to unstructured repo. This PR removes
all ""image extraction"" related code from unstructured-inference repo and
works together with the unstructured refactor PR -
https://github.com/Unstructured-IO/unstructured/pull/2201.

### Note
The ingest test won't pass until we merge the unstructured refactor PR -
https://github.com/Unstructured-IO/unstructured/pull/2201.",Christine Straub,christinemstraub@gmail.com,GitHub,noreply@github.com,2023-12-04 23:41:09-08:00,28800,2023-12-04 23:41:09-08:00,28800,True,False,"['CHANGELOG.md', 'README.md', 'embedded-image-extraction.py', 'requirements.txt', 'test_layout.py', '__version__.py', 'layout.py']",['2b292542fb3848b43f586054d4d966fe3a729771'],177,6,183,7,0.3409090909090909,0.2727272727272727,0.11363636363636363
d4785df3057717a023e3425ea8b8dcc49fa10c67,"chore: fix typo in README.md (#300)

mispelled:

paddepaddle -> paddlepaddle",Jorge Barrachina Gutiérrez,1333901+ntkog@users.noreply.github.com,GitHub,noreply@github.com,2023-12-05 20:44:13+01:00,-3600,2023-12-05 11:44:13-08:00,28800,True,False,['README.md'],['794f38b27e5ed6325e930e1b5b87410a7bf53620'],1,1,2,1,,,
4e5c4e642ae53ff5b1b2dd5cb36f2f946d6b3934,"refactor: remove remaining table OCR logic in inference (#302)

### Summary

Remove all OCR related code:
* table OCR code -> require ocr tokens to pass in for table structure
* parameter `extract_tables` -> moved to unst already, unst decide if
extract or not and calling table model
* function `interpret_table_block` -> this was a wrapper to call table
in inference on block level, logic moved to unst
* paddle ocr related code and readme instruction

### Test
* shouldn't affect anything since its just remove a deprecated logic
* added some test for coverage
* CCT metrics compare (no change):

before (main on core product):
```
metric       average sample_sd population_sd count
--------------------------------------------------
cct-accuracy 0.665   0.278     0.277         109  
cct-%missing 0.094   0.176     0.176         109 
```

after (inference checked out to this branch):
```
metric       average sample_sd population_sd count
--------------------------------------------------
cct-accuracy 0.665   0.278     0.277         109  
cct-%missing 0.094   0.176     0.176         109 
```",Yuming Long,63475068+yuming-long@users.noreply.github.com,GitHub,noreply@github.com,2023-12-15 11:52:58-05:00,18000,2023-12-15 11:52:58-05:00,18000,True,False,"['CHANGELOG.md', 'Makefile', 'README.md', 'test_layout.py', 'test_layout_element.py', 'test_tables.py', 'test_config.py', '__version__.py', 'config.py', 'constants.py', 'elements.py', 'layout.py', 'layoutelement.py', 'paddle_ocr.py', 'tables.py']",['d4785df3057717a023e3425ea8b8dcc49fa10c67'],340,585,925,15,0.0,1.0,1.0
4a4b64aaa3e85a56649d1c6f43c02d63db760ae8,"Feat/chipper v3 (#308)

This new version of Chipper should largely improve the output for
tables. In the attached file, the output looked as having many cells
spread across multiple columns, and largely because of the $ character,
which was inconsistently annotated in the Odetta set. As well colspan
did not work properly for the header. This new version of Chipper does
not predict thead and tbody tokens for tables.

To test it, you need to run the code below. It will print the predicted
elements. The code should print only one page and one element. The
element has a field name text_as_html. The HTML within that field can be
pasted in a new file renamed as html to be open with a browser.

Example with Chipperv2

<img width=""1146"" alt=""image""
src=""https://github.com/Unstructured-IO/unstructured-inference/assets/3939469/feffe674-8c9b-4c64-bd6d-08bd602c596a"">

Example with Chipperv3

<img width=""666"" alt=""image""
src=""https://github.com/Unstructured-IO/unstructured-inference/assets/3939469/f06867a9-2636-4055-a158-42badc58dd09"">


<img width=""677"" alt=""apple""
src=""https://github.com/Unstructured-IO/unstructured-inference/assets/3939469/d7ec628e-0dca-409c-894a-612350fce71f"">

```
from unstructured_inference.inference.layout import DocumentLayout
from unstructured_inference.models.base import get_model

model = get_model(""chipper"")
doc = DocumentLayout.from_image_file(""[point to the location of the file]/apple.png"", detection_model=model)

for i in range(len(doc.pages)):
          print(f""********** Page {i}"")
          print(*[element.__dict__ for element in doc.pages[i].elements], sep=""\n"")
```

---------

Co-authored-by: Antonio Jimeno Yepes <antonio@unstructured.io>",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-12-20 06:23:04+01:00,-3600,2023-12-20 16:23:04+11:00,-39600,True,False,"['CHANGELOG.md', 'test_chippermodel.py', '__version__.py', 'constants.py', 'layoutelement.py', 'chipper.py']",['4e5c4e642ae53ff5b1b2dd5cb36f2f946d6b3934'],18,105,123,6,1.0,1.0,0.9736842105263158
54e3e4653d13c42e1dc8bc9ff7c92cf42b8620fe,"Feat/chipper repetitions (#295)

In some cases Chipper repeats elements. This PR has additional
mechanisms to detect these repetitions and provides mechanisms for
filtering repetitions that cannot be identified during decoding.

Repetition detection:

* Tables benefit from beam search size = 3. When a table is detected
using beam search size = 1, the generation restarts with beam search
size = 3
* To avoid interacting with genuine repetitions, a context windows has
been defined to avoid looking for repeated text in all the generated
elements.
* Specific mechanism has been added to detect when repetitions happen in
tables, which were not detected before.

Additional filtering:

* Remove empty tables
* Remove Picture elements that get repeated
* Remove repeated texts, this uses the bounding boxes and the matching
on the elements text to identify repetitions

Repetitions are not easy to reproduce, but I would suggest selecting
documents that are not part of Odetta annotation or available in this
repository for additional testing. Additional testing in different
environments (e.g. Linux, Mac OS) is recommended.

---------

Co-authored-by: Antonio Jimeno Yepes <antonio@unstructured.io>",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-12-20 23:05:41+01:00,-3600,2023-12-21 09:05:41+11:00,-39600,True,False,"['CHANGELOG.md', 'test_chippermodel.py', '__version__.py', 'chipper.py']",['4a4b64aaa3e85a56649d1c6f43c02d63db760ae8'],19,253,272,4,0.5493827160493827,0.6975308641975309,0.5432098765432098
8b33f14e390d8c9b613b39c212147210ac65d285,"Revert ""Feat/chipper repetitions"" (#312)

Reverts Unstructured-IO/unstructured-inference#295",Antonio Jose Jimeno Yepes,antonio.jimeno@gmail.com,GitHub,noreply@github.com,2023-12-21 00:32:55+01:00,-3600,2023-12-21 10:32:55+11:00,-39600,True,False,"['CHANGELOG.md', 'test_chippermodel.py', '__version__.py', 'chipper.py']",['54e3e4653d13c42e1dc8bc9ff7c92cf42b8620fe'],253,19,272,4,0.4506172839506173,0.30246913580246915,0.4567901234567901
d3b298131352b9676bf7d65de757c85561491e31,"fix: typeerror when using chipper (#311)

This PR resolves #310 
- chipper, or any page layout extracted with an element extraction model
do not have key attributes like `image_metadata` populated
- this leads to `None` values for image width and height, which lead to
the bug
- this fix prevents the function early return after chipper finds the
elements
- it continues the logic to allow other key attributes of the page to be
filled
- a bonus from this fix is we remove the image data from the page (which
is not needed downstream) for chipper generated pages

## Test

A unit test is modified to test all the routes, including using an
element extraction model, for page layout

Additionally grab this attached pdf and when running partition using
chipper the main branch would lead to type error but this fix would run
without error.

[005-CISA-AA22-076-Strengthening-Cybersecurity-p1-p4.pdf](https://github.com/Unstructured-IO/unstructured-inference/files/13731533/005-CISA-AA22-076-Strengthening-Cybersecurity-p1-p4.pdf)",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2023-12-20 18:06:04-06:00,21600,2023-12-20 18:06:04-06:00,21600,True,False,"['CHANGELOG.md', 'test_layout.py', '__version__.py', 'layout.py']",['8b33f14e390d8c9b613b39c212147210ac65d285'],6,18,24,4,0.0,1.0,0.0
2f3ec9e18729aeebc8d39c7dd6be811acb7e556b,"fix: intersections involving rectangles with None (#315)

This PR fixes #310 that is popping up again 
- now returns None instead of raising an exception
- a followup is needed to understand why some `Rectangles` has `None`
value as coordinates.",Yao You,theyaoyou@gmail.com,GitHub,noreply@github.com,2024-01-10 17:23:11-06:00,21600,2024-01-10 23:23:11+00:00,0,True,False,"['CHANGELOG.md', 'test_elements.py', '__version__.py', 'elements.py']",['d3b298131352b9676bf7d65de757c85561491e31'],5,32,37,4,1.0,1.0,0.7692307692307693
ed5f2c22e9ac83141a99b00a8155e589d3644ccd,"fix: handling for empty table recognition (#317)

### Summary

Closes #306. Addresses the condition where `recognize` returns an empty
list in the `run_prediction` method on
`UnstructuredTableTransformerModel`.

### Testing

`pytest test_unstructured_inference/models/test_tables.py`",Matt Robinson,mrobinson@unstructured.io,GitHub,noreply@github.com,2024-01-19 13:10:36-05:00,18000,2024-01-19 13:10:36-05:00,18000,True,False,"['ci.yml', 'CHANGELOG.md', 'test_tables.py', '__version__.py', 'tables.py']",['2f3ec9e18729aeebc8d39c7dd6be811acb7e556b'],4,31,35,5,0.7647058823529411,0.0,0.0
