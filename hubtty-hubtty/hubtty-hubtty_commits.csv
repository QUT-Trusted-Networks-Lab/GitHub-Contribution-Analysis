Hash,Commit Message,Author Name,Author Email,Committor Name,Committor Email,Author Date,Author Timezone,Committor Date,Committor Timezone,in_main_branch,merge,modified_files,parents,deletions,insertions,lines,files,dmm_unit_size,dmm_unit_complexity,dmm_unit_interfacing
208d7ba0abb67587090dda58c9f4e5b62a39f0f4,"Fork Gertty

Import gertty sources from https://opendev.org/ttygroup/gertty.git at
commit f49f27db596816b2a291e4b3b41d353ee5c63fbd.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 15:30:14+01:00,-3600,2020-11-01 16:02:49+01:00,-3600,True,False,"['.gitignore', '.gitreview', 'CONTRIBUTING.rst', 'LICENSE', 'README.rst', 'Makefile', 'conf.py', 'configuration.rst', 'contributing.rst', 'index.rst', 'installation.rst', 'usage.rst', 'googlesource-gertty.yaml', 'minimal-gertty.yaml', 'opendev-gertty.yaml', 'rdo-gertty.yaml', 'reference-gertty.yaml', '__init__.py', 'alembic.ini', 'README', 'env.py', 'script.py.mako', '1bb187bcd401_add_query_sync_table.py', '1cdd4e2e74c_add_revision_indexes.py', '254ac5fc3941_attach_comments_to_files.py', '2a11dd14665_fix_account_table.py', '312cd5a9f878_add_can_submit_column.py', '3610c2543e07_add_conflicts_table.py', '37a702b7f58e_add_last_seen_column_to_change.py', '38104b4c1b84_added_project_updated_column.py', '399c4b3dcc9a_add_hashtags.py', '3cc7e3753dc3_add_hold.py', '3d429503a29a_add_draft_fields.py', '4388de50824a_add_topic_table.py', '44402069e137_initial_schema.py', '45d33eccc7a7_add_checks.py', '46b175bfa277_add_pending_actions.py', '4a802b741d2f_add_starred.py', '4cc9c46f9d8b_add_account_table.py', '50344aecd1c2_add_files_table.py', '56e48a4a064a_increase_status_field_width.py', '6f6183367a8f_robot_comments.py', '725816dc500_add_fetch_ref_column.py', '7ef7dfa2ca3a_add_change_outdated.py', 'a18731009699_add_server_table.py', 'app.py', 'auth.py', 'commentlink.py', 'config.py', 'db.py', 'dbsupport.py', 'gitrepo.py', 'keymap.py', 'mywid.py', 'palette.py', 'requestsexceptions.py', '__init__.py', 'parser.py', 'tokenizer.py', 'sync.py', 'version.py', '__init__.py', 'change.py', 'change_list.py', 'diff.py', 'mouse_scroll_decorator.py', 'project_list.py', 'side_diff.py', 'unified_diff.py', 'requirements.txt', 'setup.cfg', 'setup.py', 'tox.ini']",[],0,14201,14201,73,0.4110392720306513,0.5651340996168582,0.6090756704980843
cf72cc50b9bdaacf62c36d36170e712069f1d11d,"s/gertty/ghubtty

Renamed the project to ghubtty.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 15:40:29+01:00,-3600,2020-11-01 16:03:36+01:00,-3600,True,False,"['CONTRIBUTING.rst', 'README.rst', 'Makefile', 'conf.py', 'configuration.rst', 'contributing.rst', 'index.rst', 'installation.rst', 'usage.rst', 'googlesource-ghubtty.yaml', 'minimal-ghubtty.yaml', 'opendev-ghubtty.yaml', 'rdo-ghubtty.yaml', 'reference-ghubtty.yaml', 'parser.py', '__init__.py', 'alembic.ini', 'README', 'env.py', 'script.py.mako', '1bb187bcd401_add_query_sync_table.py', '1cdd4e2e74c_add_revision_indexes.py', '254ac5fc3941_attach_comments_to_files.py', '2a11dd14665_fix_account_table.py', '312cd5a9f878_add_can_submit_column.py', '3610c2543e07_add_conflicts_table.py', '37a702b7f58e_add_last_seen_column_to_change.py', '38104b4c1b84_added_project_updated_column.py', '399c4b3dcc9a_add_hashtags.py', '3cc7e3753dc3_add_hold.py', '3d429503a29a_add_draft_fields.py', '4388de50824a_add_topic_table.py', '44402069e137_initial_schema.py', '45d33eccc7a7_add_checks.py', '46b175bfa277_add_pending_actions.py', '4a802b741d2f_add_starred.py', '4cc9c46f9d8b_add_account_table.py', '50344aecd1c2_add_files_table.py', '56e48a4a064a_increase_status_field_width.py', '6f6183367a8f_robot_comments.py', '725816dc500_add_fetch_ref_column.py', '7ef7dfa2ca3a_add_change_outdated.py', 'a18731009699_add_server_table.py', 'app.py', 'auth.py', 'commentlink.py', 'config.py', 'db.py', 'dbsupport.py', 'gitrepo.py', 'keymap.py', 'mywid.py', 'palette.py', 'requestsexceptions.py', '__init__.py', 'parser.py', 'tokenizer.py', 'sync.py', 'version.py', '__init__.py', 'change.py', 'change_list.py', 'diff.py', 'mouse_scroll_decorator.py', 'project_list.py', 'side_diff.py', 'unified_diff.py', 'setup.cfg', 'tox.ini']",['208d7ba0abb67587090dda58c9f4e5b62a39f0f4'],775,775,1550,69,,,
7717da9840e02065064fa50cb3d5fada8d94e8a9,"Remove unused example config files

These configs won't apply to github.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 16:34:47+01:00,-3600,2020-11-01 16:41:14+01:00,-3600,True,False,"['README.rst', 'googlesource-ghubtty.yaml', 'opendev-ghubtty.yaml', 'rdo-ghubtty.yaml']",['cf72cc50b9bdaacf62c36d36170e712069f1d11d'],380,0,380,4,,,
f453e7b798a559be3488ace75daa4cdbd5d1fdbf,"Make url optional and use token instead of password

The server URL now defaults to https://github.com. The authentication
will have to use an access token that can be generated from `Settings ->
Developer settings -> Personal access tokens` in the Github interface

See github's documentation at:
https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 17:08:38+01:00,-3600,2020-11-01 17:12:49+01:00,-3600,True,False,"['README.rst', 'configuration.rst', 'minimal-ghubtty.yaml', 'reference-ghubtty.yaml', 'auth.py', 'config.py', 'sync.py']",['7717da9840e02065064fa50cb3d5fada8d94e8a9'],37,36,73,7,,,
e13a5c341bbabdd3d00d5ee69f00ff3275b0af97,"Remove unused options from config file

Remove the `auth-type`, `verify-ssl`, and `ssl-ca-path` options from
the configuration files since they're not expected to be used for now.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 17:23:01+01:00,-3600,2020-11-01 17:23:01+01:00,-3600,True,False,"['configuration.rst', 'reference-ghubtty.yaml', 'app.py', 'config.py', 'sync.py']",['f453e7b798a559be3488ace75daa4cdbd5d1fdbf'],49,3,52,5,1.0,1.0,0.9473684210526315
e81da99ef9beb9513f9c55e891d49095beee5d41,Github API doesn't expose version,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 17:39:03+01:00,-3600,2020-11-01 17:39:03+01:00,-3600,True,False,['sync.py'],['e13a5c341bbabdd3d00d5ee69f00ff3275b0af97'],44,9,53,1,0.7666666666666667,0.06666666666666667,0.1
d88b7fc7f9f81be1c08f74faf88b35015459e8d0,"Get SyncOwnAccountTask to work with Github

This is a start.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 18:55:26+01:00,-3600,2020-11-01 18:55:26+01:00,-3600,True,False,"['config.py', 'sync.py']",['e81da99ef9beb9513f9c55e891d49095beee5d41'],10,10,20,2,,,
10a7f1de25971c9a93bdd735235dc2531aba7eba,"Make authenticated requests to github API

We need to pass authentication token in the headers, as documented in
https://developer.github.com/v3/#authentication",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 20:27:46+01:00,-3600,2020-11-01 20:31:57+01:00,-3600,True,False,['sync.py'],['d88b7fc7f9f81be1c08f74faf88b35015459e8d0'],7,5,12,1,1.0,0.0,1.0
8d8b9e4155575527e4046e3ec1ae2c7ce4a6b9a0,"Comment out all sync tasks that are not supposed to work yet

This should help prevent screwing up the database while developing the
app.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 20:29:26+01:00,-3600,2020-11-01 20:32:02+01:00,-3600,True,False,['sync.py'],['10a7f1de25971c9a93bdd735235dc2531aba7eba'],6,6,12,1,1.0,0.0,1.0
b0adebf37f75e7e5c6b76117886bbf48884a638b,First stab at getting users' repos,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 20:30:50+01:00,-3600,2020-11-01 20:32:02+01:00,-3600,True,False,['sync.py'],['8d8b9e4155575527e4046e3ec1ae2c7ce4a6b9a0'],1,3,4,1,,,
f1d1bdda4580a73b8efd0dff8fb3c75150f16ad6,"Retrieve the list of all repos the user is affiliated to

Later we should also add the possibility to subscribe to user-specified
repositories.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-01 22:25:00+01:00,-3600,2020-11-01 22:25:00+01:00,-3600,True,False,['sync.py'],['b0adebf37f75e7e5c6b76117886bbf48884a638b'],6,12,18,1,0.0,0.0,1.0
7585fdcd5b1c43c5f6cf3805202e8d0f9c5c42f1,"Rename the project to Hubtty

Because why not.

Commands executed:

$ find . \( -type d -name .git -prune \) -o -type f \
        -print0 | xargs -0 sed -i 's/ghubtty/hubtty/g'

$ find . \( -type d -name .git -prune \) -o -type f \
        -print0 | xargs -0 sed -i 's/Ghubtty/Hubtty/g'

And renamed the files that had ""ghubtty"" in their names.",Emilien Macchi,emilien@redhat.com,Emilien Macchi,emilien@redhat.com,2020-11-02 12:37:55-05:00,18000,2020-11-02 12:39:45-05:00,18000,True,False,"['CONTRIBUTING.rst', 'README.rst', 'Makefile', 'conf.py', 'configuration.rst', 'contributing.rst', 'index.rst', 'installation.rst', 'usage.rst', 'minimal-hubtty.yaml', 'reference-hubtty.yaml', 'parser.py', '__init__.py', 'alembic.ini', 'README', 'env.py', 'script.py.mako', '1bb187bcd401_add_query_sync_table.py', '1cdd4e2e74c_add_revision_indexes.py', '254ac5fc3941_attach_comments_to_files.py', '2a11dd14665_fix_account_table.py', '312cd5a9f878_add_can_submit_column.py', '3610c2543e07_add_conflicts_table.py', '37a702b7f58e_add_last_seen_column_to_change.py', '38104b4c1b84_added_project_updated_column.py', '399c4b3dcc9a_add_hashtags.py', '3cc7e3753dc3_add_hold.py', '3d429503a29a_add_draft_fields.py', '4388de50824a_add_topic_table.py', '44402069e137_initial_schema.py', '45d33eccc7a7_add_checks.py', '46b175bfa277_add_pending_actions.py', '4a802b741d2f_add_starred.py', '4cc9c46f9d8b_add_account_table.py', '50344aecd1c2_add_files_table.py', '56e48a4a064a_increase_status_field_width.py', '6f6183367a8f_robot_comments.py', '725816dc500_add_fetch_ref_column.py', '7ef7dfa2ca3a_add_change_outdated.py', 'a18731009699_add_server_table.py', 'app.py', 'auth.py', 'commentlink.py', 'config.py', 'db.py', 'dbsupport.py', 'gitrepo.py', 'keymap.py', 'mywid.py', 'palette.py', 'requestsexceptions.py', '__init__.py', 'parser.py', 'tokenizer.py', 'sync.py', 'version.py', '__init__.py', 'change.py', 'change_list.py', 'diff.py', 'mouse_scroll_decorator.py', 'project_list.py', 'side_diff.py', 'unified_diff.py', 'setup.cfg', 'tox.ini']",['f1d1bdda4580a73b8efd0dff8fb3c75150f16ad6'],696,696,1392,66,,,
c0b58c910fbb355c543e72ae9842b64aafad7efb,Fix a bunch of pyflakes issues,Emilien Macchi,emilien@redhat.com,Emilien Macchi,emilien@redhat.com,2020-11-02 16:41:41-05:00,18000,2020-11-02 16:59:51-05:00,18000,True,False,"['50344aecd1c2_add_files_table.py', '6f6183367a8f_robot_comments.py', 'app.py', 'keymap.py', 'parser.py', 'sync.py', 'change_list.py', 'diff.py', 'project_list.py']",['08749327231f9b525dd868487da8e9da89214661'],26,10,36,9,1.0,0.0,0.25
d93e7c297fc1827c2d8106b7bd4ad623b4499275,"Fetch latest PRs from projects

Get SyncProjectTask to fetch latest PRs for subscribed projects. It
successfully gets the list of PRs but doesn't yet put the PRs to base.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-03 19:00:01+01:00,-3600,2020-11-07 09:39:10+01:00,-3600,True,False,['sync.py'],['48241c4dd1d8a6c658a5bd80a7bdec9ea21b01e8'],26,27,53,1,1.0,1.0,0.0
03ac728d3ffc5074c097d32ec4899d524f99e7f6,"We're already retrieving open changes

The whole logic to check for changes in the local DB isn't necessary
for us because we would sync all open changes anyway.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-03 19:08:38+01:00,-3600,2020-11-07 09:39:13+01:00,-3600,True,False,['sync.py'],['d93e7c297fc1827c2d8106b7bd4ad623b4499275'],9,3,12,1,1.0,0.0,0.0
4e21c7ed33478c84e6607353a0ab3eac2d3c58a0,"First pass at inserting changes in DB

This seems to work. Next task should be about updating the
view/change_list.py file so that it doesn't crash.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-03 22:51:26+01:00,-3600,2020-11-07 09:39:13+01:00,-3600,True,False,['sync.py'],['03ac728d3ffc5074c097d32ec4899d524f99e7f6'],341,338,679,1,1.0,1.0,0.0
d326dcf4849e834c9816bd62fc6aeb9b21148ac1,First try at listing PRs,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-03 23:02:13+01:00,-3600,2020-11-07 09:39:13+01:00,-3600,True,False,['change_list.py'],['4e21c7ed33478c84e6607353a0ab3eac2d3c58a0'],11,12,23,1,1.0,1.0,0.7
21f4e27b070676aa7ac9b09f41efc3e0ba5c0d7a,We don't expect to see threaded changes,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-05 22:13:32+01:00,-3600,2020-11-07 09:39:13+01:00,-3600,True,False,['change_list.py'],['d326dcf4849e834c9816bd62fc6aeb9b21148ac1'],87,1,88,1,0.7941176470588235,0.7941176470588235,0.029411764705882353
7f74a973493161407beb973d3509563cc0ca628f,"Fix change branch

It's actually the branch on which the PR intend to merge and not the
branch name on the remote repository.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-05 22:17:55+01:00,-3600,2020-11-07 09:39:13+01:00,-3600,True,False,['sync.py'],['21f4e27b070676aa7ac9b09f41efc3e0ba5c0d7a'],1,1,2,1,,,
20dfcf7926ab8770a84e8725861b3b0dd4ac2a7b,"Sync project if it does not exist

Port to github the part that checked if the project for a change
existed and inserted it into base otherwise.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-07 11:12:32+01:00,-3600,2020-11-07 11:12:32+01:00,-3600,True,False,['sync.py'],['7f74a973493161407beb973d3509563cc0ca628f'],8,8,16,1,0.0,0.0,1.0
4cb72ee7e01479251e5ad7e9616dccd73bbc8f4e,"Implement SyncProjectBranchesTask

This task is used to sync the subscribed repositories branches.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-07 11:30:22+01:00,-3600,2020-11-07 11:30:22+01:00,-3600,True,False,['sync.py'],['20dfcf7926ab8770a84e8725861b3b0dd4ac2a7b'],9,5,14,1,,1.0,0.0
9ac2e71a977f32b620eb67ffb264e34e60c7ddf1,"Enable sync tasks that are ready

CheckReposTask pulls the repo locally.

SyncSubscribedProjectsTask was already called whenwe subscribed to
a project. Now it's also called when hubtty starts.

SyncOutdatedChangesTask syncs changes that are marked as outdated.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-07 17:04:04+01:00,-3600,2020-11-07 17:04:04+01:00,-3600,True,False,['sync.py'],['4cb72ee7e01479251e5ad7e9616dccd73bbc8f4e'],3,3,6,1,0.0,1.0,0.0
82a722c91464b777ae485893ad2e71a807f91603,"Disable upload task until it's ready

We do not want to accidentally submit changes to github.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-07 17:09:37+01:00,-3600,2020-11-07 17:09:37+01:00,-3600,True,False,['sync.py'],['9ac2e71a977f32b620eb67ffb264e34e60c7ddf1'],2,2,4,1,1.0,1.0,1.0
10dded4272be2e9ada46dc08f66a5ede4744b174,"Prevent Change view from crashing

A first step towards getting a usable Change view.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-07 17:19:57+01:00,-3600,2020-11-07 17:19:57+01:00,-3600,True,False,['change.py'],['82a722c91464b777ae485893ad2e71a807f91603'],4,4,8,1,1.0,1.0,0.0
0571e508c94d3cc57fed4c74789aa3c90b40ab72,"ChangeId is a gerrit concept and doesn't apply to github workflow

Hence remove it from hubtty.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-07 17:24:11+01:00,-3600,2020-11-07 17:24:11+01:00,-3600,True,False,['change.py'],['10dded4272be2e9ada46dc08f66a5ede4744b174'],10,1,11,1,0.75,0.25,0.5
5701d8b75ec25ce6cb975b7b628591b8e5521877,"Remove topics from change and change list views

These are gerrit concepts not applicable to github.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-07 17:41:58+01:00,-3600,2020-11-07 17:41:58+01:00,-3600,True,False,"['keymap.py', 'change.py', 'change_list.py']",['0571e508c94d3cc57fed4c74789aa3c90b40ab72'],103,1,104,3,0.5555555555555556,0.3,0.7
3b0fc20925b15a65721f3fa9f89e7647036708cb,Remove last remnants of change topics,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-07 18:18:12+01:00,-3600,2020-11-07 18:47:56+01:00,-3600,True,False,"['parser.py', 'tokenizer.py', 'sync.py']",['5701d8b75ec25ce6cb975b7b628591b8e5521877'],38,0,38,3,0.13793103448275862,0.10344827586206896,0.10344827586206896
e497f6b7b68747587d5b48f61e3224faf897b9cf,Remove topic from change table,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-07 18:07:06+01:00,-3600,2020-11-07 18:49:42+01:00,-3600,True,False,"['12554687e95c_remove_topic_from_change.py', 'db.py']",['3b0fc20925b15a65721f3fa9f89e7647036708cb'],9,27,36,2,1.0,1.0,1.0
f112e6c2947572362f26244971562bfdfe3f35de,"Fix migration

This is a gertty bug introduced in
https://opendev.org/ttygroup/gertty/commit/73a648183591be81a1a4037b37d8f0f8a8ce1f01

Subsequent migrations calling `sqlite_drop_columns` would fail with:

  sqlalchemy.exc.NoSuchTableError: own_account",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-07 18:50:09+01:00,-3600,2020-11-07 18:51:12+01:00,-3600,True,False,['a18731009699_add_server_table.py'],['e497f6b7b68747587d5b48f61e3224faf897b9cf'],1,1,2,1,,,
88b7afe0a00bd7cbebade946b105f6fb923ae340,"Store body, additions and deletions in change

Also rename subject to title. We should also consider renaming the
change table to pull_request at some point.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-08 21:07:13+01:00,-3600,2020-11-08 22:58:11+01:00,-3600,True,False,"['83be31a4793a_add_columns_to_change.py', 'db.py', 'sync.py', 'change.py', 'change_list.py']",['f112e6c2947572362f26244971562bfdfe3f35de'],35,70,105,5,0.3684210526315789,0.5263157894736842,0.8421052631578947
78d5281a573d7253cb84e8f3fd26dcaca7c90496,"Show the PR description in change view

Shows the PR title _and_ body.

In addition, rename the `CommitMessageBox` class to `PrDescriptionBox`
to reflect what it really does.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-11 13:42:46+01:00,-3600,2020-11-11 13:42:46+01:00,-3600,True,False,['change.py'],['88b7afe0a00bd7cbebade946b105f6fb923ae340'],6,6,12,1,,,
bc9ba086e3e470fb28594282d3b60e5f08399b0f,"Fix permalink to the PR's URL

We might want to get this info from the github API and store this in
the DB in the future. But the current implementation to rebuild this
URL from the base repo full name and git URL seems good enough for now.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-11 13:52:11+01:00,-3600,2020-11-11 13:52:11+01:00,-3600,True,False,"['sync.py', 'change.py']",['78d5281a573d7253cb84e8f3fd26dcaca7c90496'],2,2,4,2,,,
6ae0061d5a6e008671b4f54eaa72f1f2e3ad8909,"We need the html_url after all

Commit bc9ba086 assumed we could construct the PR's URL from the change
identifier, however they do not exactly match.

To fetch a change, github API uses the
repos/:org/:repo_name/pulls/:number, while the PR's URL would be at
/:org/:repo_name/pull/:number. Note the missing `s`.

This fixes the periodic sync for changes.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-14 21:26:52+01:00,-3600,2020-11-15 08:59:13+01:00,-3600,True,False,"['175ea25b42d5_add_html_url_for_prs.py', 'db.py', 'sync.py', 'change.py']",['bc9ba086e3e470fb28594282d3b60e5f08399b0f'],5,30,35,4,0.6666666666666666,0.8333333333333334,0.8333333333333334
bd400400d3ea9c3e25bf49aa642f9a5ad797cf9d,"Fix more calls to SyncChangeTask

This uses the change ID, `:org/:repo/pulls/:number` rather than the
numeral identifier of the change record in DB.

There are a few more places calling SyncChangesTask that will need to
be updated. This isn't critical for now because they are currently
disabled.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-15 09:36:52+01:00,-3600,2020-11-15 09:36:52+01:00,-3600,True,False,['sync.py'],['6ae0061d5a6e008671b4f54eaa72f1f2e3ad8909'],4,4,8,1,,,
7a9615023dc191bc4fa4d08aad1acf2da0bd5efb,"Remove change conflicts

Github doesn't provide a way to know which PRs are conflicting.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-14 10:09:51+01:00,-3600,2020-11-15 10:00:01+01:00,-3600,True,False,"['862b2a89e855_remove_conflicts_table.py', 'db.py', 'sync.py', 'change.py']",['bd400400d3ea9c3e25bf49aa642f9a5ad797cf9d'],102,23,125,4,0.29411764705882354,0.23529411764705882,0.29411764705882354
a614dd61e694b0573d6f3ef00e3a4cb6d7ee2413,Rename revision table to commit,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-14 11:51:32+01:00,-3600,2020-11-15 10:14:26+01:00,-3600,True,False,"['a2974173ff5b_rename_revision_to_commit.py', 'app.py', 'db.py', '__init__.py', 'parser.py', 'sync.py', 'change.py', 'change_list.py']",['7a9615023dc191bc4fa4d08aad1acf2da0bd5efb'],215,224,439,8,0.38461538461538464,0.38461538461538464,1.0
d5f1a6de8908c569eaff95a55ddce773e77fdefb,"List commits in change view

Very raw at the moment.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-15 22:20:00+01:00,-3600,2020-11-15 22:20:00+01:00,-3600,True,False,"['sync.py', 'change.py']",['a614dd61e694b0573d6f3ef00e3a4cb6d7ee2413'],13,13,26,2,0.0,0.0,1.0
178002a98caae1cd374390cf3b76e1b4a954a7bc,"Slightly improve commit list

This now includes a shortened sha and the commit title.

Also, do not expand the last commit and removed the `review` button.

Review should be for the PR and not individual commits.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-15 22:37:54+01:00,-3600,2020-11-15 22:37:54+01:00,-3600,True,False,['change.py'],['d5f1a6de8908c569eaff95a55ddce773e77fdefb'],7,5,12,1,1.0,1.0,0.6666666666666666
154a120424f5631643ce4aba3ee8901afeb469a9,"Rename revision to commit in diff view

As crazy as it sounds, this is more or less all that was needed to get
the diff view to work.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-21 10:06:52+01:00,-3600,2020-11-21 10:06:52+01:00,-3600,True,False,['diff.py'],['178002a98caae1cd374390cf3b76e1b4a954a7bc'],44,44,88,1,,,
bb62eddee41b8a050bfdec99bd82b8374143515c,Fix title for diff view,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-21 10:34:01+01:00,-3600,2020-11-21 10:35:59+01:00,-3600,True,False,['diff.py'],['154a120424f5631643ce4aba3ee8901afeb469a9'],5,5,10,1,,,
de1cda46ff6502e522ff902239ec349d877aa160,"Disable the select patchsets dialog

Github doesn't have a notion of patchsets so this is not going to work
out of the box. Still, we may want to keep this feature around if we
ever get to implement something similar in hubtty so comment it out for
now until we have a better idea what to do with it.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-21 10:43:25+01:00,-3600,2020-11-21 11:03:49+01:00,-3600,True,False,"['keymap.py', 'diff.py']",['bb62eddee41b8a050bfdec99bd82b8374143515c'],85,85,170,2,0.5974025974025974,0.03896103896103896,0.5974025974025974
0f633060ce78f018c0007608e0f29d79bb760e81,Implement next/previous commit in diff view,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-21 11:37:14+01:00,-3600,2020-11-21 11:37:14+01:00,-3600,True,False,"['keymap.py', 'diff.py']",['de1cda46ff6502e522ff902239ec349d877aa160'],25,23,48,2,1.0,1.0,0.0
6e07b107d6928268e225ea8da226323ad00e441f,"Fetch remote refs

We need these because the change view requires the refs to exist
locally.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-21 17:37:55+01:00,-3600,2020-11-21 17:37:55+01:00,-3600,True,False,"['sync.py', 'change.py']",['0f633060ce78f018c0007608e0f29d79bb760e81'],4,5,9,2,0.0,0.2,0.8
e253d8e610506eff27dc12ea1470fbeb8c61eeed,"Sync commit files

At some point, we should also do the same thing for PR files.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-21 22:12:30+01:00,-3600,2020-11-21 22:12:30+01:00,-3600,True,False,['sync.py'],['6e07b107d6928268e225ea8da226323ad00e441f'],13,15,28,1,0.0,0.0,1.0
b6bd93c4c3d6c7e29caa76ef4a0d86177c3b0d1b,"Sync commit checks when available

Not sure we need the distinction between `checker` and `check` in the
context of github. Time will tell.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-22 15:31:36+01:00,-3600,2020-11-22 15:31:36+01:00,-3600,True,False,['sync.py'],['e253d8e610506eff27dc12ea1470fbeb8c61eeed'],41,33,74,1,1.0,1.0,1.0
056cd9e5519a25f414aa5fc405165deb935806bd,"Show test results in change view

I had to extract the link creation in its own function otherwise the
same object is re-used and all items open the same link (the last one).",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-22 15:32:33+01:00,-3600,2020-11-22 15:32:33+01:00,-3600,True,False,"['palette.py', 'change.py']",['b6bd93c4c3d6c7e29caa76ef4a0d86177c3b0d1b'],11,11,22,2,1.0,1.0,0.3333333333333333
75cb6d76c21d175ddf6faf10f28f403a03eb3200,"Fix new changes sync

The query was missing the `>` operator, causing no new changes to be
retrieved.

Also, the date is already in UTC and including the timezone information
causes offsets.

Close #4",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2020-11-27 12:39:33+01:00,-3600,2020-11-27 12:46:21+01:00,-3600,True,False,['sync.py'],['056cd9e5519a25f414aa5fc405165deb935806bd'],1,1,2,1,,,
d0d1996d17d4d49c55bae8ce22775160f2f43fb8,"Fix change refresh

The change.id should have been the change_id.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2020-11-27 16:55:30+01:00,-3600,2020-11-27 16:55:30+01:00,-3600,True,False,"['db.py', 'sync.py', 'change.py']",['1685505a3625d4d9b7fca2b7b409c6b4c4728bce'],4,3,7,3,1.0,1.0,0.0
dde99e2058b2754622a984cb31b48d266079639e,"Add commit comments in base

This is the first step towards displaying GH PR's commits. Next we'll
need to sync the PR's reviews and associated issue's comments.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2020-11-27 16:56:39+01:00,-3600,2020-11-27 16:56:39+01:00,-3600,True,False,['sync.py'],['d0d1996d17d4d49c55bae8ce22775160f2f43fb8'],40,40,80,1,0.0,0.0,1.0
116a425ed35c4a6c618da94828e4fdfa9f1384ca,"Get PR reviews

In addition to commit comments, we need to get PR reviews. The last
thing we need to gather is the associated issue comments.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2020-11-27 18:13:36+01:00,-3600,2020-11-27 18:13:36+01:00,-3600,True,False,['sync.py'],['dde99e2058b2754622a984cb31b48d266079639e'],28,32,60,1,0.0,0.0,1.0
8a6fdf6c89d1270239804e7e7e91371356b9cd9d,"Fetch issues comments

Treat them as reviews. Since they're not attached to a particular
commit on github, we link new comments to the last commit of the PR.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-28 10:24:38+01:00,-3600,2020-11-28 10:24:38+01:00,-3600,True,False,['sync.py'],['116a425ed35c4a6c618da94828e4fdfa9f1384ca'],9,12,21,1,,,
2bd2ce2fd0e1d522a85f1f1893a665a0e6edd7f6,"Slightly improve comment view

The first line of the comment is no longer shown in the comment header.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-28 10:52:50+01:00,-3600,2020-11-28 10:52:50+01:00,-3600,True,False,['change.py'],['8a6fdf6c89d1270239804e7e7e91371356b9cd9d'],1,1,2,1,,,
adcab830293a195a1427b0d53f617bc91ba30f7e,"Prevent the app from exiting when reviewing

We'll simply disable the save until this is implementing instead of
removing the button.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-28 11:02:18+01:00,-3600,2020-11-28 11:02:18+01:00,-3600,True,False,['change.py'],['2bd2ce2fd0e1d522a85f1f1893a665a0e6edd7f6'],4,6,10,1,0.0,0.0,0.5
387c1471b66b132a785e405d129b853f985dfe92,"Add a periodic task to sync accounts

Unfortunately, github doesn't provide user name in it's user stuct
returned for various API calls. We need to get it from the
`/users/<username>` endpoint.

This change allows for the `toggle hidden comments` feature to work.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-28 15:09:45+01:00,-3600,2020-11-28 15:09:45+01:00,-3600,True,False,"['db.py', 'sync.py']",['adcab830293a195a1427b0d53f617bc91ba30f7e'],0,23,23,2,0.9444444444444444,1.0,0.9444444444444444
b9cad9e184a0f9ca77e487fa83c2b0be295ae4b8,"Strip carriage return chars from comments

The `urwid` library is unable to handle carriage return characters
properly and shows them as `?`. In consequence, strip them from
comments, PR description, and other fields that accept multi-line
values.

https://github.com/urwid/urwid/issues/209",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-28 16:53:51+01:00,-3600,2020-11-28 17:18:34+01:00,-3600,True,False,['sync.py'],['387c1471b66b132a785e405d129b853f985dfe92'],5,5,10,1,,,
5c7231288b67bd36249b0745c84372804a711148,"Show shortened sha of commit rather than PS number

The comment view from the PR now shows the shortened sha of associated
commit rather than the Patch Set number that doesn't mean anything with
github.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-11-28 21:44:17+01:00,-3600,2020-11-28 21:44:17+01:00,-3600,True,False,['change.py'],['b9cad9e184a0f9ca77e487fa83c2b0be295ae4b8'],9,6,15,1,1.0,1.0,1.0
cbe2639b55d4eef65038dcd71875e06c47892ca6,"Fix project deletion

We've removed the Project.delete() method in
7a9615023dc191bc4fa4d08aad1acf2da0bd5efb but forgot to change the code
that called it.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 11:00:12+01:00,-3600,2020-12-05 11:00:12+01:00,-3600,True,False,['sync.py'],['5c7231288b67bd36249b0745c84372804a711148'],1,1,2,1,,,
38b1ba80178372a9dc7832d80dc0cbd5d2f05ab5,"Add merged and mergeable to changes

This will allow us to search for merged changes, and potentially show
changes with merge conflicts.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 11:00:12+01:00,-3600,2020-12-05 17:41:10+01:00,-3600,True,False,"['fc35305967d4_add_merge_to_prs.py', 'db.py', 'sync.py']",['cbe2639b55d4eef65038dcd71875e06c47892ca6'],3,59,62,3,0.07142857142857142,0.8928571428571429,0.9285714285714286
88396974aeb9058ac512b646a72603515d9a9dd2,"Refresh missing fields from changes

These fields were created when the change was created in base, but
never refreshed later.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 17:43:17+01:00,-3600,2020-12-05 17:43:17+01:00,-3600,True,False,['sync.py'],['38b1ba80178372a9dc7832d80dc0cbd5d2f05ab5'],1,5,6,1,0.0,0.0,1.0
ddf0a9530acc9d45f0642789fc1809a91e38f668,"Remove outdated flag after change sync

This was mistakenly commented out, causing outdated changes to remain
in this state forever.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 17:45:09+01:00,-3600,2020-12-05 17:45:09+01:00,-3600,True,False,['sync.py'],['88396974aeb9058ac512b646a72603515d9a9dd2'],1,1,2,1,0.0,0.0,1.0
74cf75f6c84d483367b092d8d32fa4186d2a4323,"Start using merged attribute of changes

With this attribute, we can now emulate the MERGED and ABANDONED status
from gerrit.

MERGED is closed + merged
ABANDONED is closed + unmerged",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 17:54:23+01:00,-3600,2020-12-05 17:54:23+01:00,-3600,True,False,"['db.py', 'parser.py', 'sync.py', 'change.py']",['ddf0a9530acc9d45f0642789fc1809a91e38f668'],22,18,40,4,1.0,1.0,1.0
f6684eb7e791cb52533bba0bb997ed4f9d321dfb,"Rename change status -> state

Because this is the terminology that github is using.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 17:59:44+01:00,-3600,2020-12-05 17:59:44+01:00,-3600,True,False,"['fc35305967d4_add_merge_to_prs.py', 'db.py', 'parser.py', 'sync.py', 'change.py', 'change_list.py', 'project_list.py']",['74cf75f6c84d483367b092d8d32fa4186d2a4323'],31,33,64,7,0.0,1.0,1.0
bcb97b39c0bcf4147059f2ccce796c4c714cb818,"Prune old changes from database

Closed changes older than the `expire-age` set in the configuration are
now pruned from the database.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 18:00:50+01:00,-3600,2020-12-05 18:04:22+01:00,-3600,True,False,"['tokenizer.py', 'sync.py']",['f6684eb7e791cb52533bba0bb997ed4f9d321dfb'],11,5,16,2,1.0,1.0,0.0
ade2ccf4069260ecebbe86fc04779e7a3d1a006e,"Use force option to delete unmerged refs

Without this change hubtty would leave orphaned references in the git
repos for changes that have been pruned from the database.

https://gitpython.readthedocs.io/en/stable/reference.html#git.refs.head.Head.delete",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 18:05:22+01:00,-3600,2020-12-05 18:05:22+01:00,-3600,True,False,['gitrepo.py'],['bcb97b39c0bcf4147059f2ccce796c4c714cb818'],1,2,3,1,,,
0ecd438140552b2c74dbfa89c42681ce935dad09,"Remove gertty-env from gitignore

If desired, this directory should be added to `.git/info/exclude`
instead.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 18:10:34+01:00,-3600,2020-12-05 18:10:34+01:00,-3600,True,False,['.gitignore'],['ade2ccf4069260ecebbe86fc04779e7a3d1a006e'],1,0,1,1,,,
3873c6b225f819d56a59bce177a321e58b32b1eb,"Search: rename owner to author

This is the terminology that github is using, let's adopt it too.

Prefer to search for a user login.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 21:08:54+01:00,-3600,2020-12-05 21:08:54+01:00,-3600,True,False,"['db.py', 'parser.py', 'tokenizer.py', 'sync.py', 'change.py', 'change_list.py']",['0ecd438140552b2c74dbfa89c42681ce935dad09'],42,43,85,6,,,
57e9c1f8ec6c177a5102331c6f43d66af6282df0,"Drop uniqueness on change number

The change number starts from 1 for each repository.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 21:29:44+01:00,-3600,2020-12-05 21:29:44+01:00,-3600,True,False,"['44402069e137_initial_schema.py', 'app.py', 'db.py']",['3873c6b225f819d56a59bce177a321e58b32b1eb'],15,3,18,3,0.5454545454545454,0.36363636363636365,0.0
9c061d0450385cb1b14a22751dd50f7768153156,"Change search query in examples

The owner keyword was changed to author to match github terminology.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-05 21:48:22+01:00,-3600,2020-12-05 21:48:22+01:00,-3600,True,False,"['configuration.rst', 'reference-hubtty.yaml']",['57e9c1f8ec6c177a5102331c6f43d66af6282df0'],2,2,4,2,,,
c2a878b9f079c4d403766e11003695baaa4f3781,"First pass at showing reviews votes

This adds reviews from the PR that are tied to an existing commit to the
database. The reviews that were submitted against a commit that is no
longer part of the PR, because of a rebase, are not saved. This is
probably something we'll want to fix.

This enables the `reviewer` relationship for the change, and adds the
review table to the change view. The `reviewer: <username>` search also
works.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-06 22:22:04+01:00,-3600,2020-12-06 22:22:04+01:00,-3600,True,False,"['sync.py', 'change.py']",['9c061d0450385cb1b14a22751dd50f7768153156'],26,23,49,2,1.0,1.0,0.0
d0647c45f2b2fd90bcd7e7d4cdb383627bc8d504,"Refresh comments on edit

Github allows to edit the comments. We should refresh them when the
content changes. We'll need to create an `updated_at` column for
comments (PR comments) and messages (inline comments to a PR).",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-06 22:27:41+01:00,-3600,2020-12-06 22:27:41+01:00,-3600,True,False,['sync.py'],['c2a878b9f079c4d403766e11003695baaa4f3781'],1,4,5,1,0.0,0.0,1.0
905033fa0a543688beb338935698b2353501f3b7,Actually delete the branch,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-12 14:23:52+01:00,-3600,2020-12-12 14:50:42+01:00,-3600,True,False,['gitrepo.py'],['d0647c45f2b2fd90bcd7e7d4cdb383627bc8d504'],2,5,7,1,1.0,1.0,1.0
fb6c709f7d26b4cef0e7b579c7e3da1c029ae103,"Make comments belong to change

Create a 1:n relationship between changes and comments to allows
inserting all comments that belong to a PR even when the commit from
which this comment originated no longer exists in github.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2020-12-19 13:46:31+01:00,-3600,2020-12-20 11:48:55+01:00,-3600,True,False,"['9ea887cbb620_update_comments.py', 'db.py', 'sync.py', 'diff.py']",['905033fa0a543688beb338935698b2353501f3b7'],51,108,159,4,0.0,0.5666666666666667,0.7
4949edeb0e38753a17844874d3bd8c3ae45c488e,"Break dependency between commit and messages

Following the pattern we used for comments in fb6c709f, let's do the
same for messages (PR reviews and comments, as opposed to
inline-comments).  This allows to save all messages to the database now
that they're no longer tied to a commit anymore, since commits could
disappear in the event of a rebase.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2020-12-19 17:25:10+01:00,-3600,2020-12-20 11:49:25+01:00,-3600,True,False,"['9ea887cbb620_update_comments.py', 'db.py', 'sync.py']",['fb6c709f7d26b4cef0e7b579c7e3da1c029ae103'],61,61,122,3,1.0,1.0,0.0
295d5a8d47db533234a675619e25b8e269d5cd17,"Pick change messages directly from message table

This way, change.messages contains all messages for the change and not
only the ones that are tied to a commit in the current patch-set.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2020-12-19 18:31:30+01:00,-3600,2020-12-20 12:01:55+01:00,-3600,True,False,['db.py'],['4949edeb0e38753a17844874d3bd8c3ae45c488e'],4,2,6,1,,,
6fb7846c78e8e6a81ec74c9fc149db9b29b49781,"Always reply to the latest commit

Since comments no longer always have an associated commit, we'll always
attach replies to the latest commit. We should probably refactor to
remove the need for a valid commit.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2020-12-20 12:03:08+01:00,-3600,2020-12-20 12:05:28+01:00,-3600,True,False,['change.py'],['295d5a8d47db533234a675619e25b8e269d5cd17'],1,1,2,1,,,
43addbd5101425f4a438aacf0f3365b4ba1f53d4,"Fix initial quoted text for Reply messages

We don't need to skip the first two lines for github comments.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2020-12-20 11:30:38+01:00,-3600,2020-12-20 12:05:28+01:00,-3600,True,False,['change.py'],['6fb7846c78e8e6a81ec74c9fc149db9b29b49781'],1,1,2,1,,,
b70d5632dd320a6d0a388067fdaccf4cd082975c,"Display all inline comments in change view

This adapts the view to show all inline comments in the change view.
Previously, only the comments for the commits currently belonging to the
PR were shown. This means we would lose comments in case of a rebase.

Also fix `AttributeError: 'NoneType' object has no attribute 'sha'`
error that was possible due to message no longer always having an
associated commit object.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-21 20:31:07+01:00,-3600,2020-12-21 20:31:07+01:00,-3600,True,False,['change.py'],['43addbd5101425f4a438aacf0f3365b4ba1f53d4'],9,7,16,1,1.0,1.0,1.0
7c573cd1ae5f7836ce795e95bf425998a0347f7e,"Fix sync after recent changes

This commit fixes the following errors introduced in
fb6c709f7d26b4cef0e7b579c7e3da1c029ae103:

UnboundLocalError: local variable 'updated' referenced before assignment

AttributeError: 'Comment' object has no attribute 'file_id'",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-21 21:05:49+01:00,-3600,2020-12-21 22:54:21+01:00,-3600,True,False,['sync.py'],['b70d5632dd320a6d0a388067fdaccf4cd082975c'],3,3,6,1,,,
185d0d67536ce0571ffa1b99c3c5c1f787fc2eb2,"Order message by creation time

This ensure messages are shown chronologically in the change view.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-22 23:11:57+01:00,-3600,2020-12-22 23:11:57+01:00,-3600,True,False,['db.py'],['7c573cd1ae5f7836ce795e95bf425998a0347f7e'],0,2,2,1,,,
b12de503df433627dffcd674ca0a1f9747898b23,"Best guess which inline comment goes with which review

Since github does not link inline comments to code review, we use the
creation timestamp to make the connection. However, review and inline
comments often end up with different timestamps wo we have to guess
which message belongs to which code review. We currently assume that
inline messages within 5 seconds of the review belong to the review.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-22 23:13:19+01:00,-3600,2020-12-22 23:13:19+01:00,-3600,True,False,['change.py'],['185d0d67536ce0571ffa1b99c3c5c1f787fc2eb2'],1,5,6,1,0.0,0.0,0.0
a9c9f05b91a7996328057b969a680730b79ab3e5,"Add file.current_comments to filter our outdated inline comments

Outdated comments still have a valid `commit_id` that may point to the
most recent sha. In order to differentiate them from current comments
we need to look at the line number to which the comment applies:
outdated comments have a null `line`.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-23 13:14:12+01:00,-3600,2020-12-23 13:14:12+01:00,-3600,True,False,"['db.py', 'change.py', 'diff.py']",['b12de503df433627dffcd674ca0a1f9747898b23'],2,7,9,3,,,
73476d93b51c18766646100d789fab9f12337865,"Show original line for inline comments in change view

We're already showing the original commit sha. In addition, outdated
comments have an empty line number.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-23 15:09:06+01:00,-3600,2020-12-23 15:09:46+01:00,-3600,True,False,['change.py'],['a9c9f05b91a7996328057b969a680730b79ab3e5'],1,1,2,1,,,
8d5a088df185130646ef8a9ccedcc78ea216ac97,"Associate inline comments with reviews

It turns out github actually links comments to reviews. This allows us
to show in-line comments in the change view more reliably.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-23 17:16:43+01:00,-3600,2020-12-23 17:16:43+01:00,-3600,True,False,"['9ea887cbb620_update_comments.py', 'db.py', 'sync.py', 'change.py']",['73476d93b51c18766646100d789fab9f12337865'],72,68,140,4,1.0,1.0,1.0
ce5a15a92a5ca45ec2fc989f57198cf2799561d9,"Use author username for hide-comments

This is more reliable since not all users/bots set a name, while login
is always there.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-23 18:09:16+01:00,-3600,2020-12-23 18:09:16+01:00,-3600,True,False,['change.py'],['8d5a088df185130646ef8a9ccedcc78ea216ac97'],2,2,4,1,,,
6c877fe341785bbb762170e29f83c036ffd1ea9f,"Add reference to commit in approval

This allows to know if the approval is for the most recent PR or not.

And because an approval might have been submitted on a commit that no
longer is part of the PR, we have to save the commit sha rather than
the commit record id since there is no guarantee this have been saved
to the DB, for instance in case of a rebase.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-23 22:06:20+01:00,-3600,2020-12-23 22:27:51+01:00,-3600,True,False,"['3f3f38356cbc_update_approvals.py', 'db.py', 'sync.py', 'change.py']",['ce5a15a92a5ca45ec2fc989f57198cf2799561d9'],17,39,56,4,0.8333333333333334,0.8333333333333334,1.0
b5f2872c28c042df0f5e9fd232ac5e7cf150e406,"Comment out upload task until it is implemented

Coming soon.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-30 09:27:24+01:00,-3600,2020-12-30 09:27:24+01:00,-3600,True,False,"['app.py', 'change_list.py']",['6c877fe341785bbb762170e29f83c036ffd1ea9f'],10,12,22,2,0.0,0.0,0.4
04bf5ff25bd4db72662f856fd95cd848a7115616,"A couple more revision -> commit changes

The remaining occurrences of `revision` should either be in the palette
keys (e.i. `focused-revision-name`) or in the UI for features we
haven't yet worked on.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-30 09:55:05+01:00,-3600,2020-12-30 09:55:05+01:00,-3600,True,False,"['sync.py', 'change_list.py']",['b5f2872c28c042df0f5e9fd232ac5e7cf150e406'],40,38,78,2,0.0,0.0,0.0
2eea5011708881a81bbfcc3494faaed509277f0a,Rename revision to commit in UI elements,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-30 10:16:37+01:00,-3600,2020-12-30 10:16:37+01:00,-3600,True,False,"['palette.py', 'change.py']",['04bf5ff25bd4db72662f856fd95cd848a7115616'],27,27,54,2,,,
8195196e5e032add2a4eef7bfda5a04b72d16742,"Update help message to reflect what the action does

Or at least what it is supposed to do.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-30 10:24:33+01:00,-3600,2020-12-30 11:10:56+01:00,-3600,True,False,"['change.py', 'change_list.py']",['2eea5011708881a81bbfcc3494faaed509277f0a'],5,5,10,2,,,
f77d2c9f708971973a2fa2845d2c5ba5349466cd,"Comment out abandon/restore changes

Let's re-add this feature when we've implemented close/re-open of PRs.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-30 11:19:26+01:00,-3600,2020-12-30 11:19:26+01:00,-3600,True,False,"['change.py', 'change_list.py']",['8195196e5e032add2a4eef7bfda5a04b72d16742'],101,101,202,2,0.4536082474226804,0.35051546391752575,0.41237113402061853
bb4740cea1aa031eecc91744cda4ee988a432ec9,"Set reviews on change requests

This does not yet save reviews to base, or upload anything.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-31 14:27:38+01:00,-3600,2020-12-31 14:27:38+01:00,-3600,True,False,['change.py'],['f77d2c9f708971973a2fa2845d2c5ba5349466cd'],60,26,86,1,0.9714285714285714,0.9714285714285714,0.9714285714285714
3eb97e99018cd3227db1c91086e2cdf7593e82db,"Save reviews to the database

Next step will be to upload reviews to github.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-31 18:11:57+01:00,-3600,2020-12-31 18:11:57+01:00,-3600,True,False,"['app.py', 'sync.py', 'change.py']",['bb4740cea1aa031eecc91744cda4ee988a432ec9'],32,22,54,3,0.8888888888888888,0.8888888888888888,1.0
9d5eb59ec7fb0df4e20553a545232bd87236a648,"Submit code reviews to github

This should now be possible to submit comments and code reviews to
github.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-31 19:41:51+01:00,-3600,2020-12-31 19:41:51+01:00,-3600,True,False,"['sync.py', 'change.py']",['3eb97e99018cd3227db1c91086e2cdf7593e82db'],40,41,81,2,1.0,1.0,0.0
096ebc4a5a25961147ced543a031cb84edd82965,"Create draft message when saving comments

Comments are a child of messages. We changed the dependency between
messages and comments, but forgot to update it here.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2020-12-31 19:43:15+01:00,-3600,2020-12-31 19:43:15+01:00,-3600,True,False,['diff.py'],['9d5eb59ec7fb0df4e20553a545232bd87236a648'],1,7,8,1,0.0,0.0,0.0
dee710e96df88a1d0031d5b1ca37485fad8351db,"Enable mass review from change list

This was previously commented out because we didn't port upload of
reviews to github API.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-01 10:42:05+01:00,-3600,2021-01-01 10:59:46+01:00,-3600,True,False,['change_list.py'],['096ebc4a5a25961147ced543a031cb84edd82965'],7,6,13,1,1.0,1.0,0.0
15b4966526603edb2c8ec42cab25b901dfe68806,"Enable review upload

This was previously commented out because we didn't port upload of
reviews to github API.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-01 11:03:22+01:00,-3600,2021-01-01 11:03:22+01:00,-3600,True,False,"['app.py', 'sync.py']",['dee710e96df88a1d0031d5b1ca37485fad8351db'],10,9,19,2,0.6666666666666666,0.0,0.6666666666666666
0ef679ce332caac428355438e80826b5f8b7205d,"Remove note about message duplicates

This should not be the case as messages and approvals are removed from
hubtty's database when they are uploaded to github. Review will then
show up in hubtty after syncing with github.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-01 11:09:39+01:00,-3600,2021-01-01 11:09:39+01:00,-3600,True,False,['sync.py'],['15b4966526603edb2c8ec42cab25b901dfe68806'],2,0,2,1,,,
1ddece54cc060e29d026126cabd66448d4d62218,"Remove outdated mention of Patch Set on draft messages

Patch sets are a gerrit concept.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-01 11:30:00+01:00,-3600,2021-01-01 11:30:00+01:00,-3600,True,False,['change.py'],['0ef679ce332caac428355438e80826b5f8b7205d'],3,0,3,1,1.0,1.0,1.0
e2574af55a4e22229f9feb2f0d3516cfab3c9e86,"Default to username when we don't know the user's name

There may be legitimate cases for the user to not have its name set. It
could be that it's unset in github or that sync didn't happen yet.
In this case, default to the username.

Fixes #9",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-01 12:26:21+01:00,-3600,2021-01-01 12:26:21+01:00,-3600,True,False,['diff.py'],['1ddece54cc060e29d026126cabd66448d4d62218'],2,2,4,1,,,
848bca3a81af760087097f37f44572b4f4ec45fd,"Sync user details when creating them locally

This makes sure the user name appears without having to restart hubtty.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-01 17:32:57+01:00,-3600,2021-01-01 17:32:57+01:00,-3600,True,False,"['db.py', 'sync.py']",['a05fe106a033db96da93c6a3c905db4fd736b120'],10,19,29,2,1.0,0.5,0.0
781c3d41b4c7c45d0eac58b9c90ae5309f25b745,"Comment out non-implemented sync tasks

This should help prevent mistake until we implement these sync tasks.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-01 22:33:46+01:00,-3600,2021-01-01 22:33:46+01:00,-3600,True,False,"['sync.py', 'change.py', 'change_list.py']",['848bca3a81af760087097f37f44572b4f4ec45fd'],24,31,55,3,1.0,0.7083333333333334,0.08333333333333333
5a03a6ea6c205a604a1fd5b1c215aa7e9d21bfcd,"Add support for pagination

`sync.get()` now always fetches all patches of results. By default, the
number of results per page is 30. This can be changed using the
`per_page` query parameter, for instance `per_page=100`.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-02 15:22:17+01:00,-3600,2021-01-02 15:38:33+01:00,-3600,True,False,['sync.py'],['781c3d41b4c7c45d0eac58b9c90ae5309f25b745'],51,41,92,1,0.0,0.0,1.0
ab2fda85a8d9bff7727d80246ae495eddf5c1669,"Diff action shows the diff of the first commit

We can then navigate between the commits with the `<` and `>` keys by
default.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-02 15:49:24+01:00,-3600,2021-01-02 15:49:24+01:00,-3600,True,False,['change.py'],['5a03a6ea6c205a604a1fd5b1c215aa7e9d21bfcd'],2,4,6,1,0.0,0.5,0.5
fc5c2b84d768a56c5b514ac3b980da37a13f4540,"Improve default vi keymap

The 'k' movement key was conflicting with the 'Toggle Hidden' command.
Add other useful vi bindings to make the default vi keymap more user
friendly.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-01 22:03:53+01:00,-3600,2021-01-02 15:52:23+01:00,-3600,True,False,['keymap.py'],['ab2fda85a8d9bff7727d80246ae495eddf5c1669'],5,20,25,1,,,
6ccd6fe9fecf9e81531d07ee5f73f26871e98765,"Fix query when subscribing to more than one repo

When passing more than one query to the `query()` method, it was wrongly
returning the entire json instead of only the items. The response looks
like:

  {
    ""total_count"": 7,
    ""incomplete_results"": false,
    ""items"": [
      ...
    ]
  }

This caused a TypeError when iterating over the results.

Also the method was wrongly joining the queries and was causing github
to return unexpected results.

Instead, send a search query for each subscribed repository.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-01-04 08:36:20+01:00,-3600,2021-01-04 08:36:20+01:00,-3600,True,False,['sync.py'],['fc5c2b84d768a56c5b514ac3b980da37a13f4540'],13,6,19,1,0.3333333333333333,0.0,0.0
2b543837d73d53c5b4e69543f793398ae5162e64,"Account for possible empty check url or description

It's possible that the checks do not not have URL or description. In
which case, hubtty should tolerate this.

Fixes #11",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-01-08 11:27:46+01:00,-3600,2021-01-08 11:27:46+01:00,-3600,True,False,"['sync.py', 'change.py']",['6ccd6fe9fecf9e81531d07ee5f73f26871e98765'],3,4,7,2,1.0,1.0,0.0
7ef4038b0c9f305c5d2f2457220d5a7a8282c0ea,"Tolerate empty PR description

Fixes #12",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-01-08 12:08:52+01:00,-3600,2021-01-08 12:08:52+01:00,-3600,True,False,['sync.py'],['2b543837d73d53c5b4e69543f793398ae5162e64'],7,7,14,1,,,
2315aeb80d2118eec7df7b6e4aa7fee588a6bb61,"Fix possible constraint error when saving draft approval

An approval with value None causes the DB to return an IntegrityError
because of a NOT NULL constraint:

  NOT NULL constraint failed: approval.category

This commit ensures we never return a null approval.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-01-08 13:14:54+01:00,-3600,2021-01-08 13:14:54+01:00,-3600,True,False,['change.py'],['7ef4038b0c9f305c5d2f2457220d5a7a8282c0ea'],1,1,2,1,,,
ee88f0018c769b3dda0fea0fb0d1351b57befe30,Introduce api-url to differentiate with service URL,Martin André,martin.andre@gmail.com,Martin André,m.andre@redhat.com,2021-01-08 15:07:29+01:00,-3600,2021-01-08 17:53:53+01:00,-3600,True,False,"['config.py', 'sync.py']",['2315aeb80d2118eec7df7b6e4aa7fee588a6bb61'],2,7,9,2,0.0,0.0,0.0
04f0d19dac755dea39e53423a81617fefae9c87e,Remove unused code,Martin André,martin.andre@gmail.com,Martin André,m.andre@redhat.com,2021-01-08 15:09:46+01:00,-3600,2021-01-08 17:53:53+01:00,-3600,True,False,['config.py'],['ee88f0018c769b3dda0fea0fb0d1351b57befe30'],4,0,4,1,1.0,1.0,1.0
8ceac425dc05c726941b09906b8fb76e61305058,"Implement oauth device flow for obtaining auth token

This is now no longer necessary to have the users manually create their
github token.
https://docs.github.com/en/free-pro-team@latest/developers/apps/authorizing-oauth-apps#device-flow

Tokens are now saved to `~/.config/hubtty/hubtty_auth.yaml`.",Martin André,martin.andre@gmail.com,Martin André,m.andre@redhat.com,2021-01-08 17:44:25+01:00,-3600,2021-01-08 19:19:22+01:00,-3600,True,False,"['README.rst', 'configuration.rst', 'minimal-hubtty.yaml', 'reference-hubtty.yaml', 'auth.py', 'config.py']",['04f0d19dac755dea39e53423a81617fefae9c87e'],78,70,148,6,1.0,0.0,1.0
e8d4325ae0f2fb91d498e921d754a48984785cd0,"Create base dir for config file if missing

This may happen if the user puts the hubtty configuration file at the
root of his home directory.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-01-08 18:13:43+01:00,-3600,2021-01-08 19:19:29+01:00,-3600,True,False,['config.py'],['8ceac425dc05c726941b09906b8fb76e61305058'],0,1,1,1,1.0,1.0,0.0
21abbdb30331ae46633bafe6982c75903d215181,"Fix handling of configuration file

This was overwriting the hubtty_auth.yaml file each time we started
hubtty.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-01-08 19:08:23+01:00,-3600,2021-01-08 19:19:29+01:00,-3600,True,False,['config.py'],['e8d4325ae0f2fb91d498e921d754a48984785cd0'],7,11,18,1,0.0,1.0,0.0
acdb0df07c587de115f9eb53e76f4c26fb09ea49,"Fix scope to get access to org repos list

Users still need to individually grant hubtty access to organizations.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-01-08 19:11:21+01:00,-3600,2021-01-08 19:19:29+01:00,-3600,True,False,['auth.py'],['21abbdb30331ae46633bafe6982c75903d215181'],1,2,3,1,,,
f21f613088d08549a4836e35e6e364a3d1b3b33e,"Add additional-repositories setting

By default hubtty lists all repositories to which the user has explicit
permission. The `additional-repositories` property allows to add extra
repositories to hubtty.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-09 15:34:40+01:00,-3600,2021-01-09 15:34:40+01:00,-3600,True,False,"['configuration.rst', 'reference-hubtty.yaml', 'config.py', 'sync.py']",['acdb0df07c587de115f9eb53e76f4c26fb09ea49'],2,17,19,4,0.0,0.0,0.0
e291f6705f21533d2087f1cf1ad0fd9f846363ac,"Remove the need for setting own username

We get this information querying github.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-09 16:14:49+01:00,-3600,2021-01-09 16:14:49+01:00,-3600,True,False,"['configuration.rst', 'minimal-hubtty.yaml', 'reference-hubtty.yaml', 'config.py', '__init__.py', 'sync.py']",['f21f613088d08549a4836e35e6e364a3d1b3b33e'],15,4,19,6,1.0,1.0,1.0
41ab355853103948be9fb6bd5e18be7cbe9acd11,"Guard against empty listbox

Fixes #13",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-09 17:02:29+01:00,-3600,2021-01-09 17:02:29+01:00,-3600,True,False,['project_list.py'],['e291f6705f21533d2087f1cf1ad0fd9f846363ac'],0,2,2,1,1.0,0.0,1.0
0f5d6282b5a692fb81f46a173b3eba59d6563806,"Use XDG base directories for all hubtty's files

Configs go to $XDG_CONFIG_HOME/hubtty.
DB and logs go to $XDG_DATA_HOME/hubtty.
Socket and lock file go to $XDG_RUNTIME_DIR.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-09 22:51:24+01:00,-3600,2021-01-09 22:51:24+01:00,-3600,True,False,"['README.rst', 'configuration.rst', 'reference-hubtty.yaml', 'config.py', 'requirements.txt']",['41ab355853103948be9fb6bd5e18be7cbe9acd11'],31,29,60,5,1.0,0.0,0.0
94211a7dc5076c63a797f010a932ef8715c4544d,Document the new api-url config,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-10 09:49:10+01:00,-3600,2021-01-10 09:49:10+01:00,-3600,True,False,"['configuration.rst', 'reference-hubtty.yaml']",['0f5d6282b5a692fb81f46a173b3eba59d6563806'],2,9,11,2,,,
fa7bbb495bf5509e43ee56b01bc5c404c5591ab5,"Create a default configuration file if missing

Now that we don't need to put credentials anymore in the configuration
file we can spare forcing users to craft their own config for first run.

This makes the first time experience better.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-10 10:21:06+01:00,-3600,2021-01-10 10:21:06+01:00,-3600,True,False,['config.py'],['94211a7dc5076c63a797f010a932ef8715c4544d'],11,8,19,1,0.0,0.0,0.0
57f2ac6625a6e23a0d343776d3744fbc595934ce,"Changes to reference-hubtty.yaml to make it the default config

Comment out the optional settings and use a git-root with less risk of
conflicts.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-10 10:23:36+01:00,-3600,2021-01-10 10:23:36+01:00,-3600,True,False,['reference-hubtty.yaml'],['fa7bbb495bf5509e43ee56b01bc5c404c5591ab5'],38,39,77,1,,,
22d40abd31069cf35136a2fc0bf42a16170049f8,"Update welcome message

Explain that hubtty clones repositories. Also explains how to add more
projects to the project list.

Mention the path of configuration file.

Finally, remove line break so that it shows well for all window sizes.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-10 10:48:02+01:00,-3600,2021-01-10 10:48:02+01:00,-3600,True,False,['app.py'],['57f2ac6625a6e23a0d343776d3744fbc595934ce'],7,7,14,1,,,
cd9514dfbcdabac98bd25e146aecfc4bdcda34d6,"More explicit HTTP error messages

Github may return a 403 when exceeding rate limit. This ensures the
proper error message is shown in the log.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-01-11 13:04:03+01:00,-3600,2021-01-11 13:04:03+01:00,-3600,True,False,['sync.py'],['22d40abd31069cf35136a2fc0bf42a16170049f8'],0,3,3,1,1.0,1.0,1.0
8b7b2ff23e87e98b86194c12c2a3c211ad431d68,"Adjust welcome dialog height

The previous calculation was hiding the OK button after we removed
a number of linebreaks to look better on different screen sizes.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-01-16 13:53:11+01:00,-3600,2021-01-16 13:53:11+01:00,-3600,True,False,['app.py'],['cd9514dfbcdabac98bd25e146aecfc4bdcda34d6'],1,4,5,1,1.0,1.0,1.0
62bfd0203a27280024be33e5f458bb7fa3ffa8bf,"Tolerate empty values in check results

Fixes #17",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-15 10:43:44+01:00,-3600,2021-02-15 10:43:44+01:00,-3600,True,False,['change.py'],['8b7b2ff23e87e98b86194c12c2a3c211ad431d68'],0,2,2,1,0.0,0.0,0.0
a52a4611c8a410d71c5d15f97061f190bf785a5b,"Fix search query to sync all changes that need a sync

We need to look for all changes that have been updated since the last
sync, and not just the new changes.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-15 10:46:31+01:00,-3600,2021-02-15 10:46:31+01:00,-3600,True,False,['sync.py'],['62bfd0203a27280024be33e5f458bb7fa3ffa8bf'],1,1,2,1,,,
f8d1b73af5c9aa475781a0e531eed3956be1770a,"Fix condition for showing job result

Add missing quotes around condition otherwise it's not showing the check
if it has a message.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-20 12:38:53+01:00,-3600,2021-02-20 21:00:30+01:00,-3600,True,False,['change.py'],['a52a4611c8a410d71c5d15f97061f190bf785a5b'],1,1,2,1,,,
9f762f7fe3b3735a4f781c7869a827743e6bdede,"Delete commit that no longer belong to change

When a PR was rebased, hubbty wrongly showed outdated commits so we need
to delete commits that no longer belong to the change. This ensures
old commits don't show up in the change view.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-20 18:22:10+01:00,-3600,2021-02-20 21:00:38+01:00,-3600,True,False,['sync.py'],['f8d1b73af5c9aa475781a0e531eed3956be1770a'],0,7,7,1,0.0,0.0,1.0
20d4793f54a5839b3e2bbd64828d12c9ef6985b2,"Remove checker table

It's not clear what benefit the checker table served as we only used it
to store the name of the check. This simplifies a bit the DB.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-20 18:25:54+01:00,-3600,2021-02-20 21:00:43+01:00,-3600,True,False,"['9ab0f566d94b_drop_checker.py', 'db.py', 'sync.py', 'change.py']",['9f762f7fe3b3735a4f781c7869a827743e6bdede'],45,37,82,4,0.42857142857142855,0.0,1.0
9e6f9be25243e6d368324125ce865f9673c99599,"Remove old checks during sync

We want to remove checks that are no longer current. These checks are
refreshed when syncing the change so they're expected to always
represent the latest status.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-20 18:29:07+01:00,-3600,2021-02-20 21:00:50+01:00,-3600,True,False,['sync.py'],['20d4793f54a5839b3e2bbd64828d12c9ef6985b2'],0,8,8,1,0.0,0.0,0.0
fe102b3eb5a8795c2decdc7064c5e2ea33a1925d,"Update REST URL for statuses

Let's use the URL documented in
https://docs.github.com/en/rest/reference/repos#get-the-combined-status-for-a-specific-reference",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-20 18:32:41+01:00,-3600,2021-02-20 21:00:55+01:00,-3600,True,False,['sync.py'],['9e6f9be25243e6d368324125ce865f9673c99599'],1,1,2,1,,,
1ed549fff2a36e57f49ee78dc172605848b263fd,"Initial support for rate limiting

Naive implementation of rate limiting support where we check the
`X-RateLimit-Remaining` header for each query and set hubtty offline
when the remaining requests in the current limit window get below the
arbitrarily chosen 10 value.

Possible improvements would be to use the value of `X-RateLimit-Reset`
to schedule next query instead of hardcoding the value to 30 seconds.

Also, we should make use of conditional requests to lower the number of
queries [1].

[1] https://docs.github.com/en/rest/overview/resources-in-the-rest-api#conditional-requests",Martin André,martin.andre@gmail.com,Martin André,m.andre@redhat.com,2021-01-16 13:55:45+01:00,-3600,2021-02-20 21:01:42+01:00,-3600,True,False,['sync.py'],['fe102b3eb5a8795c2decdc7064c5e2ea33a1925d'],1,6,7,1,1.0,1.0,1.0
f6e2fd85625ae05a42c352ac45e656dba9f722f1,"Better handle rate limiting

The Search API has a rate limit of 30 requests per minute, which
differs from the normal Core API where the limit is 5000 requests per
hour.

We now requeue the request when hitting rate limit and retry at the
time indicated by the `X-RateLimit-Reset` header.

This needs to be ported to other requests than GET.",Martin André,martin.andre@gmail.com,Martin André,m.andre@redhat.com,2021-01-30 14:43:19+01:00,-3600,2021-02-20 21:01:42+01:00,-3600,True,False,['sync.py'],['1ed549fff2a36e57f49ee78dc172605848b263fd'],2,11,13,1,0.0,0.0,1.0
9389b56113008453aecbc35989f11d6d6e2e7b48,"Filter our invalid changes from query results

As the number of projects one subscribes to grows, we're more likely to
hit github rate limit, which may end up with incomplete entries in the
database.

This commit ensures that Changes are valid and syncs the change
otherwise.

Another better approach would be to treat Change sync as an atomic
operation.

Fixes #15",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-13 15:53:00+01:00,-3600,2021-02-20 21:01:42+01:00,-3600,True,False,['db.py'],['f6e2fd85625ae05a42c352ac45e656dba9f722f1'],1,13,14,1,0.2222222222222222,0.2222222222222222,0.2222222222222222
17c9ad4b0c37caa62eff397ff44941b9f4045d53,"Sync projects in batch of 10

This limits the number of queries we need to perform on the search API.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-21 11:51:47+01:00,-3600,2021-02-21 11:51:47+01:00,-3600,True,False,['sync.py'],['9389b56113008453aecbc35989f11d6d6e2e7b48'],4,24,28,1,0.42857142857142855,0.0,1.0
5f5db8dabfda075092b910aafa8a9402ec4fe4e2,"Fix is:abandoned query

The previous query returned changed all closed changes.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-26 18:23:06+01:00,-3600,2021-02-26 19:00:09+01:00,-3600,True,False,['parser.py'],['17c9ad4b0c37caa62eff397ff44941b9f4045d53'],4,4,8,1,,,
9ca79ec8f1e3261de99e498cb35932cc66f04375,"Alias is:abandoned to is:unmerged

This is how github calls the abandoned status.
https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-based-on-whether-a-pull-request-is-merged-or-unmerged",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-26 18:28:25+01:00,-3600,2021-02-26 19:00:50+01:00,-3600,True,False,['parser.py'],['5f5db8dabfda075092b910aafa8a9402ec4fe4e2'],2,2,4,1,,,
51578f37727e555cb23de6cb3a9e06f0f1f47f95,"Remove is:submitted query

We're not using it.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-26 18:33:12+01:00,-3600,2021-02-26 19:00:56+01:00,-3600,True,False,['parser.py'],['9ca79ec8f1e3261de99e498cb35932cc66f04375'],2,0,2,1,1.0,1.0,0.0
fc84872d867def8eba0659560a35bb6b0a587d75,"Implements `mentions:USERNAME` search operator

Search for mentions of `@USERNAME` in PR messages and comments. We might
want to extend to commit messages and PR bodies in the future.

https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-by-mention",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-27 09:44:32+01:00,-3600,2021-02-28 10:02:26+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['51578f37727e555cb23de6cb3a9e06f0f1f47f95'],0,20,20,2,0.9230769230769231,1.0,1.0
3a81795bc486d703d1ba2d008e4cafce2e83762d,"Implement commenter search operator

In github terminology a commenter is someone that has commented an
issue. This is what happens under the hood when someone leaves a comment
on a PR without explicitly pressing the `Review changes` button.

In hubtty, we store these in the `message` table with a NULL commit_key.

https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-by-commenter",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-26 18:48:06+01:00,-3600,2021-02-28 10:12:54+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['fc84872d867def8eba0659560a35bb6b0a587d75'],0,25,25,2,0.0,1.0,1.0
4d643e7f6516da2366eb840f8021642f82acdfeb,"Rename reviewer search operator to reviewed-by

This is what github calls it:
https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-by-pull-request-review-status-and-reviewer

This commit leaves the `is:reviewer` shorthand as a hubtty extension,
which is synonymous of `reviewed-by:<your-username>`.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-28 10:35:42+01:00,-3600,2021-02-28 10:35:42+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['3a81795bc486d703d1ba2d008e4cafce2e83762d'],7,7,14,2,,,
e9bc8a50d99be4a45037ccd8e223f0c34a5dd296,"Implement involves query operator

According to github, involves is the union of: author, assignee,
mentions, and commenter.  We're however not yet syncing assignee so
we're using reviewed-by that has the same effect.

https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-by-a-user-thats-involved-in-an-issue-or-pull-request",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-28 16:58:43+01:00,-3600,2021-02-28 17:00:09+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['4d643e7f6516da2366eb840f8021642f82acdfeb'],0,39,39,2,0.0,1.0,1.0
45f45fbfe2f4bbb3872163288ab39a125e921316,"Implement review search operators

Implement the `review:none`, `review:approved`, and
`review:changes_requested` search operators.

https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-by-pull-request-review-status-and-reviewer",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-28 20:46:52+01:00,-3600,2021-02-28 21:17:23+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['e9bc8a50d99be4a45037ccd8e223f0c34a5dd296'],1,27,28,2,0.0,1.0,1.0
1d3ee67e6f896007b7bd71b6e4d0af8465004852,"Remove broken is:reviewed search operator

It doesn't belong to github search and was broken anyway.

If desired, the same result can be obtained with the ""not review:none""
search query.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-02-28 21:20:06+01:00,-3600,2021-02-28 21:20:06+01:00,-3600,True,False,['parser.py'],['45f45fbfe2f4bbb3872163288ab39a125e921316'],7,1,8,1,1.0,1.0,0.0
6eda1e5ef0d12e8d39afdfe44d8c17b483643386,"Implement created search operator

Search for PR based on their creation date:

https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-by-when-an-issue-or-pull-request-was-created-or-last-updated",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-01 12:01:39+01:00,-3600,2021-03-01 12:01:39+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['1d3ee67e6f896007b7bd71b6e4d0af8465004852'],0,28,28,2,0.8636363636363636,1.0,1.0
c7096926700db141c0644215aafc8bf5a53e3edc,"Implement updated search operator

Similar to `created`, except it returns PR that have been updated
relatively to the date.

https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-by-when-an-issue-or-pull-request-was-created-or-last-updated",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-01 12:18:31+01:00,-3600,2021-03-01 12:18:31+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['6eda1e5ef0d12e8d39afdfe44d8c17b483643386'],0,18,18,2,0.9285714285714286,1.0,1.0
ef994a915e6b5faf33a697f1da850b9b7f79f334,"Add ability to search within a user's or org's repo

Implements the `user`, `org`, and `repo` search operators.

https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-within-a-users-or-organizations-repositories",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-02 11:32:23+01:00,-3600,2021-03-02 11:32:23+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['c7096926700db141c0644215aafc8bf5a53e3edc'],0,10,10,2,0.6666666666666666,1.0,1.0
c81880585f3dcb876403b0d084ad6184632df935,"Remove `project` and `projects` search operator

These are gerrit terms, we should user `repo` search operator instead.
This is also confusing since `project` means something else in github.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-02 12:01:37+01:00,-3600,2021-03-02 12:01:37+01:00,-3600,True,False,"['parser.py', 'tokenizer.py', 'change.py', 'change_list.py']",['ef994a915e6b5faf33a697f1da850b9b7f79f334'],17,2,19,4,0.2222222222222222,0.0,0.0
ac09f0eeec909cf93e981664b9ecdfd4426f72c6,"Alias base search operator to branch

This is what github calls it. Let's keep `branch` around since it's way
more understandable.

https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-by-branch-name",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-02 12:12:39+01:00,-3600,2021-03-02 12:15:06+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['c81880585f3dcb876403b0d084ad6184632df935'],1,3,4,2,,,
5919f77f4006a66b7b43cb7bfef990982c6c2035,"Remove unused `ref` search operator

We don't store is, and no plans on using it.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-02 12:17:05+01:00,-3600,2021-03-02 12:17:05+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['ac09f0eeec909cf93e981664b9ecdfd4426f72c6'],9,0,9,2,0.16666666666666666,0.0,0.0
231272be794ada4551868ce036a7c669093a7e3b,"Remove label search operator

Label does have a different meaning in github, where they refer to a tag
attached to a PR, and gerrit, where they represent the vote of a user.
Remove the label search operator until we implement github labels.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-02 12:21:38+01:00,-3600,2021-03-02 12:21:38+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['5919f77f4006a66b7b43cb7bfef990982c6c2035'],35,0,35,2,1.0,0.8666666666666667,0.0
3ccf82ea0eb143508889b23bd4ad963a59abb521,"Somewhat implement `in` search operator

Lets you search for a term `in:title`, `in:body`, or `in:comments` of
a PR.

There's a trick though, you can't combine operator with the same search
query. For example if you want to search for the word `foo` in the PR
title or body, you would have to write:

   in:title foo or in:body foo

https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-by-the-title-body-or-comments",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-02 12:55:14+01:00,-3600,2021-03-02 12:55:14+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['231272be794ada4551868ce036a7c669093a7e3b'],0,25,25,2,0.0,1.0,1.0
6c700bee2bbc3257f6b59ff31f3cddfd084432af,"Remove message and comment search operators

Not sure exactly what they were doing. You should use `in:comments`
instead.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-02 13:00:42+01:00,-3600,2021-03-02 13:00:42+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['3ccf82ea0eb143508889b23bd4ad963a59abb521'],26,0,26,2,0.1,0.0,0.0
41b2efb5edd4c7270261ddaef3a7122e0fc103e9,"Rename status search operator to state

This is what github calls it. In github terminology, status refers to
a job success status.

https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests#search-by-open-or-closed-state",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-02 16:51:33+01:00,-3600,2021-03-02 16:51:33+01:00,-3600,True,False,"['configuration.rst', 'reference-hubtty.yaml', 'config.py', 'parser.py', 'tokenizer.py', 'sync.py', 'change.py']",['6c700bee2bbc3257f6b59ff31f3cddfd084432af'],13,13,26,7,,,
089bbe7dd0d852b37ea46e7e44e5195c97a3f1c8,"Fix change search operator

Currently has to match the change ID as stored in the DB, for instance:
change:mandre/hubtty/pulls/3",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-02 17:41:34+01:00,-3600,2021-03-02 17:41:34+01:00,-3600,True,False,"['app.py', 'tokenizer.py']",['41b2efb5edd4c7270261ddaef3a7122e0fc103e9'],2,2,4,2,,,
c00d1116840c1060cfa6f6589aaf4df4d077ca35,"Fix commit search operator

And make it so that it can match truncated SHAs.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-02 17:51:53+01:00,-3600,2021-03-02 17:51:53+01:00,-3600,True,False,['parser.py'],['089bbe7dd0d852b37ea46e7e44e5195c97a3f1c8'],1,1,2,1,,,
a9768675b54a99f3dc8d76fca38cc1afd6aab7cd,"There can be only one vote per user per commit

Re-use previously created approval record when syncing changes. This
prevents the UI from showing a tick in different approval categories at
the same time, for example `Changes Requested` and `Approved`, and stops
the explosion of records in the approval table.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-04 10:08:15+01:00,-3600,2021-03-05 16:35:03+01:00,-3600,True,False,"['db.py', 'sync.py']",['da205591e5f8559b9c65a94e810f47fd78ec57a2'],2,13,15,2,0.6,0.6,0.4
aebc7765c1fbcfb4d6e7a82517171645af715705,"Remove duplicate approvals from DB

Also add missing index.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-05 16:22:22+01:00,-3600,2021-03-05 16:35:08+01:00,-3600,True,False,['f3ceef330b1b_remove_approval_duplicates.py'],['a9768675b54a99f3dc8d76fca38cc1afd6aab7cd'],0,24,24,1,1.0,1.0,1.0
b0b669030c0d7c43461de68f24b1e4c4d7c0abf7,"Skip pending reviews

We should properly sync pending reviews between hubtty and github. Until
then, let's just skip them.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-05 16:58:58+01:00,-3600,2021-03-05 16:58:58+01:00,-3600,True,False,['sync.py'],['2b6b4dbf53fc855747879c1884548a5a3570e9a0'],1,8,9,1,0.0,0.0,1.0
ea052da5254e43b1bb55cb51a543194a1c93a28f,"Ensure uniqueness for approval

PR #22 added uniqueness constraint on approval but I forgot to update
the code that creates approvals from a review done in hubtty.
Well... this fixes it.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-06 15:12:59+01:00,-3600,2021-03-06 15:12:59+01:00,-3600,True,False,['app.py'],['b0b669030c0d7c43461de68f24b1e4c4d7c0abf7'],1,6,7,1,0.0,0.0,0.0
d1f64336d6f0bf0d6da89e401ded9250da415fce,"Implement review key

Compared to gertty's implementation:
- only one approval, and it must be one of REQUEST_CHANGES, COMMENT, or APPROVE
- add `draft` parameter to not upload review immediately
- add `description` parameter shows in help message",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-06 15:16:53+01:00,-3600,2021-03-06 15:53:42+01:00,-3600,True,False,"['config.py', 'change.py', 'diff.py']",['ea052da5254e43b1bb55cb51a543194a1c93a28f'],13,20,33,3,1.0,1.0,1.0
8036262ea67248932749c2bb2116684a6550620b,Document reviewkeys,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-06 15:53:00+01:00,-3600,2021-03-06 15:53:42+01:00,-3600,True,False,"['configuration.rst', 'reference-hubtty.yaml']",['d1f64336d6f0bf0d6da89e401ded9250da415fce'],48,44,92,2,,,
0f6aef220c2ce5ee89a0b73a995d9e80ecd627f1,"Update reference-hubtty.yaml with useful commentlinks

Add replacement for commit SHA and mentions.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-07 18:52:31+01:00,-3600,2021-03-07 18:52:31+01:00,-3600,True,False,['reference-hubtty.yaml'],['40b6ba318800cba9f6dab2dace6678438d39ba0c'],5,12,17,1,,,
041ea507379ff1a91de1391cd62dae33267ab96b,Add example configuration file for OpenShift,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-07 19:02:51+01:00,-3600,2021-03-07 19:02:51+01:00,-3600,True,False,"['README.rst', 'configuration.rst', 'openshift-hubtty.yaml']",['0f6aef220c2ce5ee89a0b73a995d9e80ecd627f1'],0,281,281,3,,,
831db92e285d0247c85c9faefb93d40a45638a68,"Apply BZ replacement before sha

Otherwise the bug number is mistakenly taken as a SHA if it's more than
6 digits.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-12 09:45:03+01:00,-3600,2021-03-12 09:45:03+01:00,-3600,True,False,['openshift-hubtty.yaml'],['041ea507379ff1a91de1391cd62dae33267ab96b'],6,6,12,1,,,
138f1f7d8c853ece7dbea95888df6ff4d0da6bc5,"Add note about replacement order

Order is important and defining commentlinks in a different order can
have surprising results.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-12 09:48:32+01:00,-3600,2021-03-12 09:48:32+01:00,-3600,True,False,"['configuration.rst', 'openshift-hubtty.yaml', 'reference-hubtty.yaml']",['831db92e285d0247c85c9faefb93d40a45638a68'],0,3,3,3,,,
498115bf963c29000d26fc4e1a0eeeca329c9274,"Make bz regex broader

It turns out people use a variety of ways to reference BZs in their PRs.
This now allows for more combinations, such as:
- Bug 123456
- BZ #123456
- bz 123456",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-12 09:50:03+01:00,-3600,2021-03-12 09:50:03+01:00,-3600,True,False,['openshift-hubtty.yaml'],['138f1f7d8c853ece7dbea95888df6ff4d0da6bc5'],1,1,2,1,,,
3651e71c06dd9ad5e8b017d08912cdeaad566e2f,"Restrict commit regex a bit

Don't search for commit unless the sha is preceded by a space. This
ensures that when someone paste a link to a file, such as
https://github.com/mandre/hubtty/blob/041ea507379ff1a91de1391cd62dae33267ab96b/README.rst
we don't break the link.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-12 09:53:04+01:00,-3600,2021-03-12 09:53:04+01:00,-3600,True,False,"['openshift-hubtty.yaml', 'reference-hubtty.yaml']",['498115bf963c29000d26fc4e1a0eeeca329c9274'],2,2,4,2,,,
087413d60e70c5bc58e0f32eef49f270c58c67df,"Removed unused commit fields

Also remove commented code in diff.py we're likely not going to use.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-06 12:43:00+01:00,-3600,2021-03-12 09:57:03+01:00,-3600,True,False,"['c61a3925cedb_unused_commit_fields.py', 'db.py', '__init__.py', 'sync.py', 'diff.py']",['3651e71c06dd9ad5e8b017d08912cdeaad566e2f'],114,28,142,5,0.6153846153846154,1.0,0.6923076923076923
c9d4130f3ec4cce5db37301b813559e63bed1ba0,Rename getChangeByID to getChangeByChangeID,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-06 13:48:57+01:00,-3600,2021-03-12 09:57:03+01:00,-3600,True,False,"['db.py', 'sync.py']",['087413d60e70c5bc58e0f32eef49f270c58c67df'],5,5,10,2,,,
808ba193c29c04226a866b7ff3a6f8dca4b19242,"Rename approval.category to approval.state

This better matches github terminology.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-13 12:29:57+01:00,-3600,2021-03-13 12:29:57+01:00,-3600,True,False,"['b22d9336aba0_rename_approval_category_to_state.py', 'db.py', 'parser.py', 'sync.py', 'change.py']",['c9d4130f3ec4cce5db37301b813559e63bed1ba0'],19,43,62,5,1.0,1.0,1.0
400654b3a77db46c14a348c5ea9d61bead4263e7,"Rename categories to review_states

This makes it consistent with approval.state column.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-13 12:42:46+01:00,-3600,2021-03-13 12:42:46+01:00,-3600,True,False,"['sync.py', 'change.py', 'change_list.py']",['808ba193c29c04226a866b7ff3a6f8dca4b19242'],42,41,83,3,,,
12c7c27e4aa7dfc20367b5211147867f3c78624f,"Remove approval labels

We're not using the label and permitted_label tables. There were used in
gertty for approval labels. Remove these tables as they make things
confusing with github labels, which are tags we can attach to PRs.

This commit also restore the ""Code-Review"" summary from the change
lists.

We'll bring back the label table once we properly implement github
labels.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-13 15:23:10+01:00,-3600,2021-03-13 15:31:06+01:00,-3600,True,False,"['579571523a48_remove_approval_labels.py', 'db.py', 'sync.py', 'change_list.py']",['400654b3a77db46c14a348c5ea9d61bead4263e7'],267,66,333,4,0.4745762711864407,0.0,0.5254237288135594
d7e7c17afdc00a7d84f500fbcc9efcdb7301f97a,Remove file status,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-13 15:48:57+01:00,-3600,2021-03-13 15:48:57+01:00,-3600,True,False,"['50344aecd1c2_add_files_table.py', 'db.py']",['12c7c27e4aa7dfc20367b5211147867f3c78624f'],9,2,11,2,,,
cf9503af326fa50eddfe601428898e519e0a48f3,"Update indices

Add missing indices, add missing uniqueness, rename indices to match db
schema, drop unused indices.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-14 13:02:33+01:00,-3600,2021-03-14 13:12:15+01:00,-3600,True,False,['fb283799c60d_add_missing_indices.py'],['d7e7c17afdc00a7d84f500fbcc9efcdb7301f97a'],0,63,63,1,0.05263157894736842,1.0,1.0
42d95a5701d46a8eccacb57df42d7bbcb1e15236,Update models to reflect DB,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-14 15:40:57+01:00,-3600,2021-03-14 15:40:57+01:00,-3600,True,False,['db.py'],['cf9503af326fa50eddfe601428898e519e0a48f3'],14,17,31,1,,,
afe4bad2dfbc357dd1922d88996a961d0e7d3070,"More DB tweaking

Nothing really interesting.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-14 16:20:20+01:00,-3600,2021-03-14 16:22:06+01:00,-3600,True,False,"['21d691c40b39_more_db_tweaking.py', 'db.py', 'sync.py']",['42d95a5701d46a8eccacb57df42d7bbcb1e15236'],23,71,94,3,0.07407407407407407,1.0,1.0
cb1d7eee40ebd32a0a0b6a4eb9433be76ccff72d,Order checks alphabetically,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-15 08:03:20+01:00,-3600,2021-03-15 08:03:20+01:00,-3600,True,False,['db.py'],['afe4bad2dfbc357dd1922d88996a961d0e7d3070'],0,1,1,1,,,
cfdcd90c2399ed9d8501a4511a20cb5d9c6a7145,"Remove unused gitreview file

The project is hosted on github and there is no gerrit instance for it.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-15 08:04:34+01:00,-3600,2021-03-15 08:04:34+01:00,-3600,True,False,['.gitreview'],['cb1d7eee40ebd32a0a0b6a4eb9433be76ccff72d'],4,0,4,1,,,
7b9925c75696312c7b2d3550043dc18ca175b8b7,"Remove incorrect install instruction

Hubtty is not yet packaged for the various distros.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-21 08:36:49+01:00,-3600,2021-03-21 08:36:49+01:00,-3600,True,False,['README.rst'],['cfdcd90c2399ed9d8501a4511a20cb5d9c6a7145'],41,0,41,1,,,
3cc0a97cb936ef86a90d3690fc4b6113cc93befb,Update issue tracker's URL,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-21 08:39:24+01:00,-3600,2021-03-21 08:39:24+01:00,-3600,True,False,['README.rst'],['7b9925c75696312c7b2d3550043dc18ca175b8b7'],1,1,2,1,,,
7c780d7f11a10e3064ef8e2d5d19822d5e29eec8,Update links in Contributing doc,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-21 08:45:40+01:00,-3600,2021-03-21 08:45:40+01:00,-3600,True,False,['CONTRIBUTING.rst'],['3cc0a97cb936ef86a90d3690fc4b6113cc93befb'],12,3,15,1,,,
e45fb66cdd011d4c4b3dae4c0e3b13a3b4bed546,"Remove confusing paragraph about github installations

Although we seek to support self-hosted github installations we've not
yet tried it. This paragraph came directly from gertty and looks weird
with after the initial mass search and replace.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-03-21 08:46:07+01:00,-3600,2021-03-21 08:46:07+01:00,-3600,True,False,['CONTRIBUTING.rst'],['7c780d7f11a10e3064ef8e2d5d19822d5e29eec8'],6,0,6,1,,,
9bd3a83a82948a62d200d02a4c4520b3cf758be8,"Fix upload review event type

Commit 12c7c27e4aa7dfc20367b5211147867f3c78624f unified the approval
stage with the `getReviewState()` method, however it broke the review
upload to github. Hubtty would report the following error in the logs:

    Exception: Received 422 status code: {""message"":""Unprocessable Entity"",""errors"":[""Variable $event of type PullRequestReviewEvent was provided invalid value""],""documentation_url"":""https://docs.github.com/rest/reference/pulls#create-a-review-for-a-pull-request""}

This new commit ensures the event type is correct per github API.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-04-06 09:43:22+02:00,-7200,2021-04-06 09:49:27+02:00,-7200,True,False,['change_list.py'],['e45fb66cdd011d4c4b3dae4c0e3b13a3b4bed546'],0,7,7,1,0.0,0.0,0.0
2b4594a1e38e40b95b33600ecb6d19e714c25637,"Do not assume PR has commits

It may be possible that a PR was rebased and no longer contain any
commits. When synchronizing changes, we need to stop assuming PR
contains commits. We don't need the same protection while displaying
changes since github automatically closes PRs without commits and as
a consequence never make it to the change view.

Fixes #24",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-05-30 12:33:26+02:00,-7200,2021-05-30 12:34:50+02:00,-7200,True,False,['sync.py'],['9bd3a83a82948a62d200d02a4c4520b3cf758be8'],2,4,6,1,0.0,0.0,1.0
ae7184f602db9599246be139767fb45fb9aba0dd,"Do not assume commits are unique

We wrongly assume only one commit with the same SHA existed in the
commit table and failed to synchronize changes when it contained commits
from another PR.

With this change it's now possible to get commits with the same sha in
the commit table.
As a consequence, move the DatabaseSession.getCommitBySha() method to
Change.getCommitBySha() and rename getCommitBySha() to getCommitsBySha()
in DatabaseSession.

Closes #26",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-06-04 11:21:21+02:00,-7200,2021-06-04 11:21:21+02:00,-7200,True,False,"['db.py', 'sync.py', 'change.py']",['7b723ef20e29b261ecc0baf5aad938086a359cd3'],8,14,22,3,1.0,1.0,1.0
9e4f898766f7112bdcb2ebfdd480f403f4945627,"Fix integer and number tokenization

The tokenization would wrongly break a string starting with a digit (for
instance a SHA) into a number and a string.

Closes #28",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-06-04 11:59:08+02:00,-7200,2021-06-04 12:00:41+02:00,-7200,True,False,['tokenizer.py'],['7b723ef20e29b261ecc0baf5aad938086a359cd3'],2,2,4,1,,,
ca88dfabe661a6236031409039b82428c56bcbca,"Fix call to SearchCompiler() for easier debugging

SearchCompiler() needs a function name as an argument.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-06-04 12:02:25+02:00,-7200,2021-06-04 12:02:25+02:00,-7200,True,False,['__init__.py'],['9e4f898766f7112bdcb2ebfdd480f403f4945627'],1,3,4,1,1.0,1.0,1.0
a18f6479dbc8a4299f5d7fab748072ce8247c737,"Rework project sync

This allows to update the project that have been modified and makes lay
the foundation for sync of the ability to push changes to projects.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-04 12:15:34-04:00,14400,2021-06-05 15:44:40+02:00,-7200,True,False,['sync.py'],['430a2e2f55593dd530c8e954a34843b255aebf18'],18,24,42,1,0.0,0.0,1.0
db930c28a43fb952b5d478da08346eedb42e297d,"Discard non-available repositories

It may be that the repositories added from the config file with
additional-repositories may be private or do not exist. In this case
github returns a 404 and hubtty now discards these repositories.

This is made possible thanks to the introduction of a custom
`response_callback` to the Sync.get() method.

Closes #30",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-05 15:34:43+02:00,-7200,2021-06-05 15:46:32+02:00,-7200,True,False,['sync.py'],['a18f6479dbc8a4299f5d7fab748072ce8247c737'],5,21,26,1,0.6666666666666666,0.6666666666666666,0.0
3352b6aafb788f079cd3c2d7097651d214e95b0b,"Add project can_push

Sync if user is allowed to push to a repository. We'll use that to
provide a merge button after reviewing a change.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-05 17:32:59+02:00,-7200,2021-06-05 17:32:59+02:00,-7200,True,False,"['4a2afc48dd09_add_can_push_to_project.py', 'db.py', 'sync.py']",['db930c28a43fb952b5d478da08346eedb42e297d'],3,27,30,3,0.8333333333333334,0.8333333333333334,0.8333333333333334
a1cc20e0d163247ce3afe431eff396ae9b9c3d37,"Account for HTTP 400 errors too

Response with HTTP 400 status code, Bad Request, should be treated as
errors as well.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-06-07 18:59:45+02:00,-7200,2021-06-07 19:05:53+02:00,-7200,True,False,['sync.py'],['3352b6aafb788f079cd3c2d7097651d214e95b0b'],3,3,6,1,,,
39025f7d0062ac70ff6cd58ff25b3be07df6c53a,"Initial WIP for merging PRs from Hubtty

* Fix the `meargeable` parameter
* Add request to merge a PR
* Add the button to merge a PR",Emilien Macchi,emilien@redhat.com,Emilien Macchi,emilien@redhat.com,2021-06-04 10:56:13-04:00,14400,2021-06-07 15:21:55-04:00,14400,True,False,"['sync.py', 'change.py']",['0ff4a6fd4388ea08104af7573f0cd04557302873'],30,36,66,2,1.0,0.5384615384615384,0.5384615384615384
9799e8c21cf19e65a8699640a5e9c741cd9d1db7,"Properly detect if we can merge a change

We need to meet two conditions to merge a change:
- user has push permission to the repository
- PR is in a mergeable state

Also implement safe-guard with an error message when invoking the
doSubmitChange() function for a non-mergeable change.",Martin André,martin.andre@gmail.com,Emilien Macchi,emilien@redhat.com,2021-06-05 22:17:12+02:00,-7200,2021-06-07 15:25:53-04:00,14400,True,False,['change.py'],['39025f7d0062ac70ff6cd58ff25b3be07df6c53a'],6,13,19,1,0.0,1.0,1.0
2aad5173bb572adc8acdcb447d0ab3eefb191ca8,"Drop commit can_submit

This isn't used. We're looking at the change.mergeable and
change.project.can_push columns to determine if we can merge a change.",Martin André,martin.andre@gmail.com,Emilien Macchi,emilien@redhat.com,2021-06-05 22:24:51+02:00,-7200,2021-06-07 15:26:05-04:00,14400,True,False,"['439753e172a0_drop_commit_can_submit.py', 'db.py', 'sync.py']",['9799e8c21cf19e65a8699640a5e9c741cd9d1db7'],7,25,32,3,1.0,1.0,1.0
a1b7a78dd99f1fc51c5dcd4b0c7ce881427fce09,"Rename Submit to Merge

This fits better with Github terminology.",Martin André,martin.andre@gmail.com,Emilien Macchi,emilien@redhat.com,2021-06-05 22:32:00+02:00,-7200,2021-06-07 15:26:21-04:00,14400,True,False,"['keymap.py', 'change.py']",['2aad5173bb572adc8acdcb447d0ab3eefb191ca8'],13,11,24,2,,,
9e28ccab3f3118252b8b6db1e7a5e3fd7f0b10b2,Introduce change.canMerge(),Martin André,martin.andre@gmail.com,Emilien Macchi,emilien@redhat.com,2021-06-06 21:57:45+02:00,-7200,2021-06-07 15:26:33-04:00,14400,True,False,"['db.py', 'change.py']",['a1b7a78dd99f1fc51c5dcd4b0c7ce881427fce09'],4,5,9,2,1.0,,
ac84d0f282735ab5b4255c053f1bb7e72f230c01,"Remap merge change to meta m

Since `ctrl m` binds to Enter and can't be changed:
https://github.com/urwid/urwid/issues/140",Martin André,martin.andre@gmail.com,Emilien Macchi,emilien@redhat.com,2021-06-06 21:58:56+02:00,-7200,2021-06-07 15:26:44-04:00,14400,True,False,['keymap.py'],['9e28ccab3f3118252b8b6db1e7a5e3fd7f0b10b2'],1,1,2,1,,,
565b8ab2c4b53ea50eaca4285982211c1de2ada0,"Expand scope to allow merging to repo

https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps#available-scopes",Martin André,martin.andre@gmail.com,Emilien Macchi,emilien@redhat.com,2021-06-06 22:56:00+02:00,-7200,2021-06-07 15:26:58-04:00,14400,True,False,['auth.py'],['ac84d0f282735ab5b4255c053f1bb7e72f230c01'],1,1,2,1,,,
c101c19ba274d8ac1487d3d04591c14639254178,"Fix 404 while syncing change after merge

We wrongly passed the change.id (from the gerrit time) while we should
have passed the change.change_id.

We should consider making the change globally to avoid the same issues
in the future.",Martin André,martin.andre@gmail.com,Emilien Macchi,emilien@redhat.com,2021-06-06 22:56:39+02:00,-7200,2021-06-07 15:27:10-04:00,14400,True,False,['sync.py'],['565b8ab2c4b53ea50eaca4285982211c1de2ada0'],1,1,2,1,,,
706685ae9494ea00b93e9aa809e8e083eccb6f36,"Implement the missing merge actions

We were previously missing submitting merge requests in both cases:
- review keys shortcuts
- while getting back connection after submitting the merge request while
  offline.

This commit also consistently rename all 'submit' actions to 'merge'.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-06-08 09:12:26+02:00,-7200,2021-06-08 09:12:26+02:00,-7200,True,False,"['app.py', 'config.py', 'sync.py', 'change.py', 'change_list.py']",['c101c19ba274d8ac1487d3d04591c14639254178'],37,34,71,5,0.0,0.0,0.6666666666666666
ebffb9ece13c71e686143895068b5adda21c494f,"Document merge property in review key

Added to the reference hubtty config file but not to the openshift one
since the openshift org relies on prow to merge commit on your behalf.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-06-08 09:16:06+02:00,-7200,2021-06-08 09:16:06+02:00,-7200,True,False,"['configuration.rst', 'reference-hubtty.yaml']",['706685ae9494ea00b93e9aa809e8e083eccb6f36'],1,15,16,2,,,
889eaa0bfce97d4ba64ad605e130577445aee586,"Use change.canMerge() where possible

I missed this one earlier.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-06-08 09:38:11+02:00,-7200,2021-06-08 09:38:11+02:00,-7200,True,False,['change.py'],['ebffb9ece13c71e686143895068b5adda21c494f'],1,1,2,1,,,
16651685994d001f4292d976a5449c83707a9724,"Save pending merges to a dedicated table

This makes merging change more reliable and makes the ""Save and Merge""
button finally work. This also allows for different merge strategies as
well as customizing the merge commit message, per
https://docs.github.com/en/rest/reference/pulls#merge-a-pull-request.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-13 10:45:20+02:00,-7200,2021-06-19 10:52:48+02:00,-7200,True,False,"['f8109f9cde46_add_pending_merge_table.py', 'app.py', 'db.py', 'sync.py', 'change.py']",['cb67188112c7ba76e366a622b1fad027736ee78b'],31,119,150,5,0.8545454545454545,1.0,0.6545454545454545
94c764aed16ecf55c510de8ab08a0391255d2692,"Implement merge dialog

Provides a way to select the merge strategy and customize the commit
title and message.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-14 13:41:44+02:00,-7200,2021-06-19 10:52:56+02:00,-7200,True,False,['change.py'],['16651685994d001f4292d976a5449c83707a9724'],5,89,94,1,0.44594594594594594,1.0,0.33783783783783783
c08617ca3eaaf18ac87dcc93b17cc9b9594afa99,"Remove Merge button from commit row

It's confusing as it suggests it applies to a commit as the other
buttons do. It shouldn't be too difficult to discover the merge feature
thanks to the ""Save and Merge"" button in the review dialog.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-19 12:04:50+02:00,-7200,2021-06-19 12:04:50+02:00,-7200,True,False,['change.py'],['94c764aed16ecf55c510de8ab08a0391255d2692'],3,0,3,1,1.0,1.0,1.0
d0ab86bdad603d1cc509db71b5c13ac8e5ba1ef3,"Avoid overwriting the dialog variable

It wasn't causing any issue but makes me feel slightly better.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-19 21:09:40+02:00,-7200,2021-06-19 21:09:40+02:00,-7200,True,False,['change.py'],['c08617ca3eaaf18ac87dcc93b17cc9b9594afa99'],3,3,6,1,,,
32c8aba42f3888f2507062c8528314921cd5124a,"Fix Cancel button for merge dialog

The cancel button (or the previous screen keybinding for that matter)
was returning to the project list due to previous screen not part of
the screen stack when executing the callback. We need to use a lambda
to execute backScreen in the right context.

We need to apply the same change to other dialogues in this view and
eventually port the same fix to gertty.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-19 21:10:58+02:00,-7200,2021-06-19 21:10:58+02:00,-7200,True,False,['change.py'],['d0ab86bdad603d1cc509db71b5c13ac8e5ba1ef3'],1,2,3,1,1.0,1.0,1.0
b2ae7b22c61e3390bd6652bc30fd9d00f9a6027a,"Sync repo labels

This syncs the possible labels one can set on for PRs belonging to
a given repository.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-20 11:31:20+02:00,-7200,2021-06-20 11:52:53+02:00,-7200,True,False,"['2b367b62fb13_add_label_table.py', 'db.py', 'sync.py']",['2f4ef14d15b0f3ad815c75bfca33c15a8487bc5f'],0,87,87,3,0.6458333333333334,0.6458333333333334,0.7083333333333334
35da0563eb0ed94d42528ae5f438a61dcf9b9f00,"Sync PR labels

Save association between PR and repo labels.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-20 13:50:39+02:00,-7200,2021-06-20 14:32:31+02:00,-7200,True,False,"['4fb888763b3b_add_change_label_table.py', 'db.py', 'sync.py']",['b2ae7b22c61e3390bd6652bc30fd9d00f9a6027a'],0,72,72,3,0.7714285714285715,0.7714285714285715,0.9142857142857143
6be3962b34290cb017680f474ac53b239e8bfd1d,"Add ability to set labels to PRs

The new ""Set labels"" dialog presents the user with a checkbox list
containing all possible labels for the given repository.

The labels borrow a bit the implementation of hashtags in gertty.
Drop hashtag table as it's not used.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-20 18:23:10+02:00,-7200,2021-06-20 18:23:10+02:00,-7200,True,False,"['5c7de722e68c_drop_hashtag_table.py', 'db.py', 'keymap.py', 'mywid.py', 'sync.py', 'change.py']",['35da0563eb0ed94d42528ae5f438a61dcf9b9f00'],104,93,197,6,0.0,1.0,0.16666666666666666
1141d4cb5e91f9738a6a9cab84c7109dbe845aa2,"Fix display of labels in change view

We want the list of labels to be comma-separated.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-06-20 18:29:07+02:00,-7200,2021-06-20 18:29:07+02:00,-7200,True,False,['change.py'],['6be3962b34290cb017680f474ac53b239e8bfd1d'],1,1,2,1,,,
cf45e60d89785dd10c173d046a1480bef936a371,"Implement Close/Reopen pull request

Gerrit and Github terminology differs a bit, there is some more work to
adopt a consistent terminology in hubtty.",Martin André,martin.andre@gmail.com,Martin André,m.andre@redhat.com,2021-06-19 22:44:33+02:00,-7200,2021-06-25 09:20:29+02:00,-7200,True,False,"['keymap.py', 'sync.py', 'change.py', 'change_list.py']",['f27075604f177686b3c77c98677189b00f31ade8'],90,99,189,4,0.7764705882352941,0.6705882352941176,0.4823529411764706
991cd106205060313649a14d257f85ab23c3363a,"Be more consistent with github terminology

Abandon -> Close
Restore -> Reopen",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-06-25 09:50:46+02:00,-7200,2021-06-25 09:50:46+02:00,-7200,True,False,"['keymap.py', 'sync.py', 'change.py', 'change_list.py']",['cf45e60d89785dd10c173d046a1480bef936a371'],33,33,66,4,,,
ae84c9a194e7c17df910dffef6d92f0cee55416b,Update hubtty contact info,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-06-25 11:30:08+02:00,-7200,2021-06-25 11:31:44+02:00,-7200,True,False,"['contributing.rst', 'setup.cfg']",['134c38c6c4f30ae7d32d1f70d74cf9545356dba9'],4,4,8,2,,,
c7a0a8a1ce9f42932e9815c214cca80672f5ae00,"Stick to older versions of SQLAlchemy

Prevents warnings at startup until we support SQLAlchemy 1.4+.

Fix #42",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-06-25 15:20:40+02:00,-7200,2021-06-25 15:20:40+02:00,-7200,True,False,['requirements.txt'],['ae84c9a194e7c17df910dffef6d92f0cee55416b'],1,1,2,1,,,
c6cf7a106d4784741add1cdc118bca03de0dfa36,"Handle deleted users

Be more flexible and stop assuming users have IDs. Reviews return null
user when the user account was deleted.

Fix #44",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-07-06 17:03:06+02:00,-7200,2021-07-06 17:03:06+02:00,-7200,True,False,['sync.py'],['c7a0a8a1ce9f42932e9815c214cca80672f5ae00'],5,12,17,1,0.0,0.0,1.0
914f7a1c198dbf0b6155b0d1b023173085763341,"Get commit checks via the checks API

Github provides different ways of providing CI jobs status for a git
reference:
- the Status API [1]
- the Check API [2]

We initially implemented the Status API since this is what is used in
the github repos we were originally interested in. This commit
implements the same for the Check API.

[1] https://docs.github.com/en/rest/reference/repos#statuses
[2] https://docs.github.com/en/rest/reference/checks#list-check-runs-for-a-git-reference",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-07-14 19:22:02+02:00,-7200,2021-07-14 19:22:02+02:00,-7200,True,False,['sync.py'],['c6cf7a106d4784741add1cdc118bca03de0dfa36'],1,47,48,1,0.0,0.0,0.10256410256410256
0f83a2bcec529011601f0843ff7a29bfaa1af560,"Add github action to run tox

Run tox on every PR and commits to master.",Martin André,m.andre@redhat.com,GitHub,noreply@github.com,2021-07-16 10:00:42+02:00,-7200,2021-07-16 10:00:42+02:00,-7200,True,False,['python-app.yml'],['2f96fae04858515138dbca8aa8ed5d9bca0daa6c'],0,29,29,1,,,
2e9587f60a7e0d8f2e66a608148fe695d0d1a233,"Clean up flake8 errors

These were exposed by running 'tox'.

Signed-off-by: Paul Belanger <pabelanger@redhat.com>",Paul Belanger,pabelanger@redhat.com,Martin André,m.andre@redhat.com,2021-06-10 10:40:36-04:00,14400,2021-07-16 10:21:28+02:00,-7200,True,False,"['12554687e95c_remove_topic_from_change.py', '3f3f38356cbc_update_approvals.py', '439753e172a0_drop_commit_can_submit.py', '579571523a48_remove_approval_labels.py', '862b2a89e855_remove_conflicts_table.py', '9ab0f566d94b_drop_checker.py', 'a2974173ff5b_rename_revision_to_commit.py', 'b22d9336aba0_rename_approval_category_to_state.py', 'c61a3925cedb_unused_commit_fields.py', 'f3ceef330b1b_remove_approval_duplicates.py', 'fb283799c60d_add_missing_indices.py', '__init__.py', 'sync.py', 'change.py']",['0f83a2bcec529011601f0843ff7a29bfaa1af560'],39,8,47,14,0.5714285714285714,0.5714285714285714,0.14285714285714285
1d1fbb6e570c45dac3236f5814067ea800a82d96,"Be flake8 compliant

More unused imports from migrations, and restore changes that shouldn't
have been removed initially.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-07-16 10:40:29+02:00,-7200,2021-07-16 10:49:27+02:00,-7200,True,False,"['5c7de722e68c_drop_hashtag_table.py', 'f8109f9cde46_add_pending_merge_table.py', 'change.py']",['2e9587f60a7e0d8f2e66a608148fe695d0d1a233'],4,8,12,3,0.0,0.0,0.0
45fc1d1f6c7512d262ed7be36e5869a8d3b94509,"Add workflow to publish package on release

Upload package to pypi upon release.",Martin André,m.andre@redhat.com,GitHub,noreply@github.com,2021-07-16 10:58:04+02:00,-7200,2021-07-16 10:58:04+02:00,-7200,True,False,['python-publish.yml'],['5357cb72616f29a6b70d447ddd2ead9d103623a5'],0,36,36,1,,,
c03d1a5d8b6a940b6d696faf0514f5029de325a4,"Enable ChangeStatusTask in periodic sync

This was forgotten while implementing #38.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-07-16 18:02:25+02:00,-7200,2021-07-16 18:02:25+02:00,-7200,True,False,['sync.py'],['45fc1d1f6c7512d262ed7be36e5869a8d3b94509'],2,2,4,1,1.0,1.0,1.0
ed4aabb07ddba0eec98509ec02d00ac172e6d788,Support python 3.8 and 3.9,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-07-18 11:53:11+02:00,-7200,2021-07-18 11:53:11+02:00,-7200,True,False,['setup.cfg'],['c03d1a5d8b6a940b6d696faf0514f5029de325a4'],0,2,2,1,,,
985e36c7954748a790c84688bb8e16c3a6b293d9,"Extract label sync in its own task

Take it out of the db session to prevent it from freezing the UI.",Martin André,m.andre@redhat.com,Martin André,martin.andre@gmail.com,2021-07-16 17:42:21+02:00,-7200,2021-07-25 19:59:32+02:00,-7200,True,False,['sync.py'],['ed4aabb07ddba0eec98509ec02d00ac172e6d788'],20,56,76,1,0.7857142857142857,0.8214285714285714,0.8571428571428571
c9e2e286de08c28bf49f98a5ac405df4f1e7ed8e,"Retrieve user account outside of db session

The call isn't terribly expensive in itself, but there is no reason to
have it inside the DB session.",Martin André,m.andre@redhat.com,Martin André,martin.andre@gmail.com,2021-07-16 17:43:36+02:00,-7200,2021-07-25 19:59:38+02:00,-7200,True,False,['sync.py'],['985e36c7954748a790c84688bb8e16c3a6b293d9'],1,1,2,1,,,
8e521b66bc24fc09c974451a1e2976112eca9d6c,Search for changes to sync outside of DB session,Martin André,m.andre@redhat.com,Martin André,martin.andre@gmail.com,2021-07-16 17:45:26+02:00,-7200,2021-07-25 19:59:38+02:00,-7200,True,False,['sync.py'],['c9e2e286de08c28bf49f98a5ac405df4f1e7ed8e'],18,18,36,1,,,
b3b8d82d91e264fa6e80f41e7daea7aa08193288,Fetch remote commit details outside of db session,Martin André,m.andre@redhat.com,Martin André,martin.andre@gmail.com,2021-07-16 17:55:17+02:00,-7200,2021-07-25 19:59:38+02:00,-7200,True,False,['sync.py'],['8e521b66bc24fc09c974451a1e2976112eca9d6c'],3,7,10,1,0.0,0.0,1.0
fb25447b6fc24f43c5d49d766abd45367e54c0e7,"Fix commit checks not showing up

We had an issue where the different function to update commit checks,
from check-runs and from commit status, would delete each others
checks. This commit changes the logic and standardize commit checks via
the _checkResultFromCheck and _checkResultFromStatus functions. We then
process check results from a single list.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-07-25 23:31:17+02:00,-7200,2021-07-25 23:49:03+02:00,-7200,True,False,['sync.py'],['8f020a5b5b4a0f9a5f32720b80c92194e9fa658f'],71,68,139,1,1.0,1.0,1.0
ffe85cfcb29bcc67a47210124a616192ffe1954b,"Add label search operator

We can now search for labels, for example:

    label:bug

Also works for negative search, for example:

    -label:approved

Closes #46",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-07-16 16:11:02+02:00,-7200,2021-08-06 09:30:26+02:00,-7200,True,False,"['parser.py', 'tokenizer.py']",['bd252f908921de5a029f9fe2d0cd361ac320733a'],0,12,12,2,0.875,1.0,1.0
7dc0028f3164ede800dbbdb70b04d880d601074c,"Allow searching for quoted text

Otherwise search would return the following error:

    AttributeError: 'str' object has no attribute 'decode'

Port patch from https://opendev.org/ttygroup/gertty/commit/ee9cd7a16c2d73401fc5ac7877dea00a3e43d1fc

This allows for search such as:

    label:""help wanted""",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-08-06 09:49:02+02:00,-7200,2021-08-06 09:49:02+02:00,-7200,True,False,['tokenizer.py'],['ffe85cfcb29bcc67a47210124a616192ffe1954b'],2,6,8,1,1.0,1.0,1.0
ee5d93867b3d957038123459b063c9ddbf78b8ee,"Make labels searchable in change view

Labels in change view now trigger a search for the given label in the
current repository.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-08-06 10:42:52+02:00,-7200,2021-08-06 10:49:41+02:00,-7200,True,False,['change.py'],['7dc0028f3164ede800dbbdb70b04d880d601074c'],3,14,17,1,0.2,0.2,1.0
8df8037c0c871dd755be376e4248808a3ed9f5fb,"Document git-url option

Explain we need to use `ssh://git@github.com` for cloning private repos,
unless the user caches its credentials as explained in [1]

[1] https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git

Closes #19",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-08-06 14:28:58+02:00,-7200,2021-08-06 14:28:58+02:00,-7200,True,False,"['configuration.rst', 'openshift-hubtty.yaml', 'reference-hubtty.yaml']",['08f47e83ed22f7dcb09fb79e9e1f3551801cf973'],4,10,14,3,,,
94e91a2293ffd538b02d4deaae361d700149f918,"Cleanup star change

Remove pending_starred from commit table, and other sync related code.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-08 15:24:18+02:00,-7200,2021-08-08 15:28:42+02:00,-7200,True,False,"['2862256bd583_remove_pending_starred.py', 'db.py', 'sync.py', 'change.py', 'change_list.py']",['ab19cb38f1ffa8ac8b477d9fbf108898fb69e935'],49,29,78,5,0.2608695652173913,0.17391304347826086,0.21739130434782608
01024c058c2a1563d8511acb6d6c8f89ba790969,"Allow passing custom headers to HTTP queries

It's sometimes necessary to set custom headers, we'll need it for
instance to set the Accept header to
`application/vnd.github.lydian-preview+json` in order to use Github's
preview API.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-08 16:32:12+02:00,-7200,2021-08-08 19:07:08+02:00,-7200,True,False,['sync.py'],['5c2f9515741fe83d3882944fffcecfad8025ceb8'],17,34,51,1,0.6,0.8,0.0
2f145dc0edb8b23597ca47719b2f9fd642a81538,"Add ability to rebase changes remotely

Port gertty's remote rebase capabilty to github API:

https://docs.github.com/en/rest/reference/pulls#update-a-pull-request-branch",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-08 16:04:31+02:00,-7200,2021-08-08 19:44:52+02:00,-7200,True,False,"['sync.py', 'change.py']",['01024c058c2a1563d8511acb6d6c8f89ba790969'],10,14,24,2,1.0,0.0,1.0
16ff7cb0803bd57bff84baf9885080777b217e91,"Implement response_callback for all HTTP verbs

We'll need this to present errors to user in a more friendly way.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-08 17:55:04+02:00,-7200,2021-08-08 19:44:55+02:00,-7200,True,False,['sync.py'],['2f145dc0edb8b23597ca47719b2f9fd642a81538'],11,20,31,1,1.0,1.0,0.0
b1da1081c94b8aadcc34e80a4246d1450b04b7af,"Implement custom callback for RebaseChangeTask

We want to display an error message when Github returns a 422
Unprocessable Entity error.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-08 18:34:51+02:00,-7200,2021-08-08 19:44:55+02:00,-7200,True,False,['sync.py'],['16ff7cb0803bd57bff84baf9885080777b217e91'],1,14,15,1,1.0,1.0,1.0
73c09a40895cad2f4d3058259a39580d897b7147,"Edit Pull Request

Add ability to edit title and description of pull request.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-09 18:14:42+02:00,-7200,2021-08-09 18:14:42+02:00,-7200,True,False,"['32e7026ffef6_remove_commit_pending_message.py', 'db.py', 'keymap.py', 'sync.py', 'change.py']",['6ce38c396194d1d1fe61b0c4d094bef2e495a74a'],63,87,150,5,0.0,1.0,0.0
f0be83a7e724253c79a2612e5d1f7b197af417ff,"Rename ChangeStatusTask to EditPullRequestTask

Since the class gained the ability to do more than just change the PR
status, it now makes sense to rename it.

Also rename the `pending_status` and `pending_status_message` to
`pending_edit` and `pending_edit_message` respectively.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-09 19:49:07+02:00,-7200,2021-08-09 19:55:36+02:00,-7200,True,False,"['164f2a7ca2b0_rename_change_pending_status_to_pending_.py', 'db.py', 'sync.py', 'change.py', 'change_list.py']",['73c09a40895cad2f4d3058259a39580d897b7147'],27,52,79,5,1.0,1.0,1.0
4bdd106a8f187155bb18adf435c86f021b333f21,"Drop cherry-pick

Github does not yet offer an easy way to cherry-pick a PR to
a different branch [1] and implementing the feature myself is more work
than I'm willing to do at the moment while we're getting towards
a first release. So let's just remove this code for now and revisit
later.

[1] https://github.community/t/do-a-cherry-pick-via-the-api/14573/4",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-09 22:25:18+02:00,-7200,2021-08-09 22:25:18+02:00,-7200,True,False,"['58a0f7616432_drop_pending_cherry_pick_table.py', 'db.py', 'keymap.py', 'sync.py', 'change.py']",['9beda23b4bd8b6065704a2d38002c5b2da7cc526'],136,21,157,5,0.3626373626373626,0.03296703296703297,0.5054945054945055
6b3f7c38fc0987251d9c13ec20cf7bb7a5ea7d4e,"Drop Sync Query

This is used to sync changes for repos we're not subscribed to. In
gertty it syncs changes we're author of, and starred changes.

We're not using it at the moment in hubtty, and not planning to: it's
very likely that hubtty users have submitted changes to many repos and
this feature is going to cause hubtty to clone many, potentially big,
repositories.

We can re-evaluate if there's demand for this feature.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-08 15:47:04+02:00,-7200,2021-08-10 15:42:37+02:00,-7200,True,False,"['79d141409a92_drop_sync_query_table.py', 'db.py', 'sync.py']",['5a9ebeee42c51580fd3a1bd3f6cc7a480db710b1'],113,22,135,3,0.5068493150684932,0.5068493150684932,0.1780821917808219
9fb037ed35d95176cdc03165b39aeb4d39e0d922,"Remove outdated comment

We rename the class in f0be83a7e724253c79a2612e5d1f7b197af417ff.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-10 11:45:37+02:00,-7200,2021-08-10 15:42:47+02:00,-7200,True,False,['sync.py'],['6b3f7c38fc0987251d9c13ec20cf7bb7a5ea7d4e'],1,0,1,1,,,
e7f497ad945199a912fdb503c7594c9286ff6aa8,"Drop SyncChangesByCommitsTask

This was used in gertty to sync missing parent. We don't have the same
dependency between changes in github so we can drop the task.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-10 11:58:47+02:00,-7200,2021-08-10 15:42:47+02:00,-7200,True,False,['sync.py'],['9fb037ed35d95176cdc03165b39aeb4d39e0d922'],57,0,57,1,0.0,0.0,0.3225806451612903
4073b5bbaf79d85407870d9c78c64ed324eb5296,"Drop SyncChangeByNumberTask

Again, this was used in gertty to sync changes in repos the user hasn't
subscribed to, as a result of a query, for instance if a commit message
referenced a change in another repo. This seems like a nice idea,
however this can quickly become messy with ETOOMANYCLONEDREPOS.

We may consider bringing this feature back if there's demand.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-10 12:17:25+02:00,-7200,2021-08-10 15:42:47+02:00,-7200,True,False,"['app.py', 'sync.py']",['e7f497ad945199a912fdb503c7594c9286ff6aa8'],48,1,49,2,0.5365853658536586,0.5365853658536586,0.07317073170731707
80cadc8d90a055aa12296738466fedf05164bba1,"Limit sync to 50 comments at a time to workaround github issue

We've noticed that github API would sometimes return a 502 server error
while querying the `/repos/{owner}/{repo}/pulls/{pull_number}/comments`
endpoint [1] with a high per_page value.

To workaround the issue, we decrease the per_page value to 50.

Fixes #59

[1] https://docs.github.com/en/rest/reference/pulls#list-review-comments-on-a-pull-request",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-08-27 09:35:19+02:00,-7200,2021-08-27 09:35:19+02:00,-7200,True,False,['sync.py'],['0e390fa02b6f233babc773e6fe704ff2f395e707'],1,3,4,1,,,
69d2a0adf07cf6d8bc407a39bbc9c4ade7a9030b,"Fix pagination for search queries

Github API returns a dict for search queries, unlike other queries that
lead to pagination. This lead to us only returning the last page of
result in case we got a paginated search result.

To fix the issue, we build a list with all results - stored under the
items key for search results - and return that.

Closes #61",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-08-27 20:40:27+02:00,-7200,2021-08-27 20:40:27+02:00,-7200,True,False,['sync.py'],['a0476a9366401afd40538da3ce567bac4c447db1'],2,4,6,1,0.0,0.0,0.0
85c37a8d3440b6b5a1fef55a660e0e12a4c6380d,"Do not sync closed changes unless they are in local db

Only sync changes that are new, or already in the local database.
This will skip all changes that were closed in the remote repo before we
got a chance to pull them locally. This will help speeding up sync when
syncing after a long period.

Based on gertty's implementation that I left out originally.

Fix the getChangeIDs() function to look at change_id, the real change
identifier.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-08-27 22:03:02+02:00,-7200,2021-08-27 22:09:18+02:00,-7200,True,False,"['db.py', 'sync.py']",['64c9a8c90bc53d22e0a7500b1608ea4e89771517'],5,12,17,2,1.0,0.0,1.0
2eb6c71762df873f3d518c5a7808789b9519a410,"Rename change to pull request

We've inherited the `change` terminology from gertty. While descriptive
enough, we should be using the github terminology consistently and
adopt `pull request`.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-28 22:07:44+02:00,-7200,2021-08-29 11:55:21+02:00,-7200,True,False,"['README.rst', 'configuration.rst', 'index.rst', 'usage.rst', 'openshift-hubtty.yaml', 'reference-hubtty.yaml', '3dbc09758351_rename_change_to_pull_request.py', 'app.py', 'config.py', 'db.py', 'gitrepo.py', 'keymap.py', 'mywid.py', 'palette.py', '__init__.py', 'parser.py', 'tokenizer.py', 'sync.py', 'diff.py', 'project_list.py', 'pull_request.py', 'pull_request_list.py']",['3fb670c3cbc8223537003dfae2ed949863624d1d'],1104,1170,2274,22,0.03333333333333333,1.0,1.0
1101e66bf7dcfe28b89563f118fdb62bb34f01dc,"Rename project to repository

Project has a different meaning in Github than it has in Gerrit.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-29 15:31:31+02:00,-7200,2021-08-29 15:31:31+02:00,-7200,True,False,"['README.rst', 'configuration.rst', 'index.rst', 'usage.rst', 'openshift-hubtty.yaml', 'reference-hubtty.yaml', '536a0daafe68_rename_project_to_repository.py', 'app.py', 'config.py', 'db.py', 'gitrepo.py', 'keymap.py', 'mywid.py', 'palette.py', '__init__.py', 'parser.py', 'tokenizer.py', 'sync.py', 'diff.py', 'pull_request.py', 'pull_request_list.py', 'repository_list.py']",['2eb6c71762df873f3d518c5a7808789b9519a410'],451,492,943,22,0.08333333333333333,1.0,1.0
de4f5a7534df0f33f8878b7a8d93d088b43ad0f0,"Tweak help message to better fit smaller screens

Make it so that help message fits one line on more screens.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-29 15:57:49+02:00,-7200,2021-08-29 15:57:49+02:00,-7200,True,False,"['pull_request_list.py', 'repository_list.py']",['1101e66bf7dcfe28b89563f118fdb62bb34f01dc'],7,7,14,2,,,
0cf4a3989f9978f74b369e8c512fe7cee2d723e6,"Remote terminal integration section from docs

Unlikely this is something we'll ever want. We can bring back if there
is demand.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-29 15:59:26+02:00,-7200,2021-08-29 15:59:26+02:00,-7200,True,False,"['README.rst', 'usage.rst']",['de4f5a7534df0f33f8878b7a8d93d088b43ad0f0'],38,0,38,2,,,
527a6b3cbb966728135f02526ddd13966e0d4eb9,"Update example for commentlinks replacement

The previous example tried to match with a change ID, which don't exist
in the github world. Instead, let's show how to match @mentions to
perform a search.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-29 16:00:36+02:00,-7200,2021-08-29 16:00:36+02:00,-7200,True,False,['configuration.rst'],['0cf4a3989f9978f74b369e8c512fe7cee2d723e6'],5,5,10,1,,,
9d1a394ea77d124979a2e49cd1cf395a3dfe05f9,"Remove documentation for thread-changes

There is no PR hierarchy in github yet and as such this option has
absolutely no effect. Remove documentation for it.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-29 16:02:07+02:00,-7200,2021-08-29 16:02:07+02:00,-7200,True,False,['configuration.rst'],['527a6b3cbb966728135f02526ddd13966e0d4eb9'],4,0,4,1,,,
2e96cf421f2afd03406457150fb26248372cde4b,"Remove distro-specific installation instruction

We've not yet packaged hubtty for the various distros. Remove the
instructions inherited from gertty to not confuse users.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-29 16:03:02+02:00,-7200,2021-08-29 16:03:02+02:00,-7200,True,False,['installation.rst'],['9d1a394ea77d124979a2e49cd1cf395a3dfe05f9'],34,0,34,1,,,
c1e5fc2db33654e1c6e925c1678d0d3cfd6b12c4,"Drop cherry-pick from pr list view

It doesn't make much sense to allow cherry-picking the most recent
commit of a PR if we don't get to see the list of commits the PR
contains. If users want to cherry-pick the most recent commit locally,
they can still do it from the pull request view. They can also
cherry-pick any of the commits contained in the PR locally.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-08-29 18:12:19+02:00,-7200,2021-08-29 18:12:19+02:00,-7200,True,False,['pull_request_list.py'],['fe6edce05e82a6eac1ca52b88ab4367298263bfa'],9,0,9,1,1.0,0.7777777777777778,0.0
ae2fd78ed402336b9c8c709b8a34908604aacdb9,"Keep check results aligned

When check name or result was too long, check results layout was all
messed up. We now cut the check name or the check result when it's too
long.  While not perfect, we're cutting out potentially interesting
information, this now keeps results aligned.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-08-30 10:17:42+02:00,-7200,2021-08-30 10:31:32+02:00,-7200,True,False,['pull_request.py'],['e2f952b11e937573ce5dc8a2dfb1183557292a64'],2,2,4,1,,,
3a8441d3159cd22f093416381038281f52e75a63,Update URL of hubtty repository in example configs,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-08-30 10:36:17+02:00,-7200,2021-08-30 10:36:17+02:00,-7200,True,False,"['openshift-hubtty.yaml', 'reference-hubtty.yaml']",['81d2202f67c7f413b83d58d7bc3acf06c7f79075'],4,4,8,2,,,
6d38c3f99856a206ab9160eb65bc0c3cf6cddd02,"Squash DB migrations

Squash all migrations to a single migration file prior to cutting the
first release, with the intent to speed up DB creation for first time
users.

Not the first, but hopefully the last breaking change in hubtty.",Martin André,martin.andre@gmail.com,Martin André,m.andre@redhat.com,2021-08-29 18:41:18+02:00,-7200,2021-08-30 10:41:24+02:00,-7200,True,False,"['12554687e95c_remove_topic_from_change.py', '164f2a7ca2b0_rename_change_pending_status_to_pending_.py', '175ea25b42d5_add_html_url_for_prs.py', '1bb187bcd401_add_query_sync_table.py', '1cdd4e2e74c_add_revision_indexes.py', '21d691c40b39_more_db_tweaking.py', '254ac5fc3941_attach_comments_to_files.py', '2862256bd583_remove_pending_starred.py', '2a11dd14665_fix_account_table.py', '2b367b62fb13_add_label_table.py', '312cd5a9f878_add_can_submit_column.py', '32e7026ffef6_remove_commit_pending_message.py', '3610c2543e07_add_conflicts_table.py', '37a702b7f58e_add_last_seen_column_to_change.py', '38104b4c1b84_added_project_updated_column.py', '399c4b3dcc9a_add_hashtags.py', '3cc7e3753dc3_add_hold.py', '3d429503a29a_add_draft_fields.py', '3dbc09758351_rename_change_to_pull_request.py', '3f3f38356cbc_update_approvals.py', '4388de50824a_add_topic_table.py', '439753e172a0_drop_commit_can_submit.py', '44402069e137_initial_schema.py', '45d33eccc7a7_add_checks.py', '46b175bfa277_add_pending_actions.py', '4a2afc48dd09_add_can_push_to_project.py', '4a802b741d2f_add_starred.py', '4cc9c46f9d8b_add_account_table.py', '4fb888763b3b_add_change_label_table.py', '50344aecd1c2_add_files_table.py', '536a0daafe68_rename_project_to_repository.py', '56e48a4a064a_increase_status_field_width.py', '579571523a48_remove_approval_labels.py', '58a0f7616432_drop_pending_cherry_pick_table.py', '5c7de722e68c_drop_hashtag_table.py', '6f6183367a8f_robot_comments.py', '725816dc500_add_fetch_ref_column.py', '79d141409a92_drop_sync_query_table.py', '7ef7dfa2ca3a_add_change_outdated.py', '83be31a4793a_add_columns_to_change.py', '862b2a89e855_remove_conflicts_table.py', '9ab0f566d94b_drop_checker.py', '9ea887cbb620_update_comments.py', 'a18731009699_add_server_table.py', 'a2974173ff5b_rename_revision_to_commit.py', 'a2af1e2e44ee_.py', 'b22d9336aba0_rename_approval_category_to_state.py', 'c61a3925cedb_unused_commit_fields.py', 'f3ceef330b1b_remove_approval_duplicates.py', 'f8109f9cde46_add_pending_merge_table.py', 'fb283799c60d_add_missing_indices.py', 'fc35305967d4_add_merge_to_prs.py', 'db.py']",['3a8441d3159cd22f093416381038281f52e75a63'],1930,363,2293,53,0.39928698752228164,0.11229946524064172,0.0
e2844e99ce7c806979fec94b287bd6d50e0ce543,"Force dates to be specified with month at least

A date with only four digits is valid in ISO 8601 and represents a year,
however this caused all integers between 999 and 9999 to be parsed as
dates.

To workaround the issue, let's force dates to at least contain the
month, in the form YYYY-MM.

Fixes #70",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-09-24 17:14:30+02:00,-7200,2021-09-24 17:14:30+02:00,-7200,True,False,['tokenizer.py'],['3a8441d3159cd22f093416381038281f52e75a63'],2,2,4,1,,,
6fe27918d4de4128c31bb44497449c54f15c3f0b,closeReview: Use keyword arguments for clarity,Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-09-25 12:18:13+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,['pull_request.py'],['5f2dc00843c31a511e30573a847b13616cf15541'],4,4,8,1,,,
092efd7dd32a37694fec8687a08754c897823b0c,"Fix retrieving draft message

Creating a new comments would wrongly create multiple draft messages.

Draft message is the message that is currently being worked on, while
pending message is the same message, but finalized (user submitted the
message) waiting to be uploaded.

We're not using commit.getPendingMessage() other than for checking if
the message is still in draft or ready to be uploaded, and we might
want to rename it hasPendingMessage() to clarify.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-09-25 12:32:41+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,"['app.py', 'diff.py', 'pull_request.py']",['6fe27918d4de4128c31bb44497449c54f15c3f0b'],7,3,10,3,1.0,1.0,1.0
578c31ee3f697c2fce7808e486513b1d683b278b,"Rename commit.getPendingMessage() to hasPendingMessage()

We were only using the commit.getPendingMessage() method to know if
there were pending message attached to the commit, and not actually
looking at the content of the pending message.

To make it clearer, let's rename the method to hasPendingMessage().  If
we want get the content of the message to be uploaded, we can use
getDraftMessage(), as message remains in draft until it is uploaded.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-09-25 12:46:08+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,"['db.py', 'pull_request.py']",['092efd7dd32a37694fec8687a08754c897823b0c'],6,5,11,2,0.0,1.0,0.0
708fe5283762b4632fc9de4c5c1e4e52e59c5687,"Fix comment on deleted diff

Contrary to Gerrit that calls the old diff side the PARENT side, Github
calls it the LEFT side.

This commit allows to leave comment on deleted code.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-09-26 19:05:17+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,['sync.py'],['578c31ee3f697c2fce7808e486513b1d683b278b'],2,2,4,1,,,
67f1558391e19530b368f7febb68fc275ca05204,"Only create one review message per review

When attaching comments to message, always attached them to the message
that is linked to the latest commit of the PR.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-09-26 19:11:02+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,['diff.py'],['708fe5283762b4632fc9de4c5c1e4e52e59c5687'],2,3,5,1,0.0,1.0,0.0
1e8399777aecd717409ff93f999891f45a33f197,"Introduce pull_request.hasPendingMessage()

Consider pending messages only on the latest commit of the PR.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-09-26 19:08:21+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,"['db.py', 'pull_request.py']",['67f1558391e19530b368f7febb68fc275ca05204'],2,5,7,2,1.0,1.0,1.0
e7d6953f1669c16856e9a480bb42fe8606e8b90f,"Fix changing approval status when there was already one in place

There were two issues at play:
- if the user already had an approval for the current PR's commit, it
  wouldn't update it
- the UploadReviewTask would sync the PR prior to uploading changes,
  and this would overwrite the approval the user set. Additionally,
  this would result in github refusing to upload the review because the
  status wouldn't be valid (COMMENTED vs COMMENT).",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-10-02 11:30:38+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,"['app.py', 'sync.py']",['1e8399777aecd717409ff93f999891f45a33f197'],1,4,5,2,0.0,0.0,0.5
e9137b8030318f88da2074e3b4a84fda709e18ab,"Pre-select existing approval in review dialog

Fix the value of the current approval state to match what github
expects as a valid event. Typically, COMMENTED becomes COMMENT.

This in turn allows the dialog to pre-select existing approval.

Also fix an issue if approval status is empty, or if there is another
approval for a different commit of the same PR.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-10-02 15:11:09+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,['pull_request.py'],['e7d6953f1669c16856e9a480bb42fe8606e8b90f'],1,9,10,1,0.0,0.0,0.0
5f66910b67499388def9d70f11a639bd17c3c202,"Shows draft approvals inside parenthesis

This is hopefully less confusing if the user had previously submitted
an approval for the same commit. Instead of having the existing
approval disappear, we'll show the draft one in parenthesis.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-10-02 15:18:09+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,['pull_request.py'],['e9137b8030318f88da2074e3b4a84fda709e18ab'],6,12,18,1,0.0,0.0,1.0
924319bbd360e27922001236eb20e4497b5621a9,"Force PR commit order

Under some circumstances, pull_request.commits would return commits in
a different order. Force commits to be ordered by key so that order is
deterministic.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-10-02 15:48:30+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,['db.py'],['5f66910b67499388def9d70f11a639bd17c3c202'],0,1,1,1,,,
7707aff5ebd6e99b4bf60834c8f522ca143aba94,"Always refresh messages that are draft

When adding comment to a second commit, it wouldn't be shown in the
review message until we navigate back to the PR list and to the PR
again as it would only compare the message creation date. To workaround
the issue, always refresh messages that are draft.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-10-02 16:14:53+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,['pull_request.py'],['924319bbd360e27922001236eb20e4497b5621a9'],1,1,2,1,,,
001c42adcff446f16f6e9b159609fe0db0d564e1,"Quote original text for replies in existing draft reviews

If you already had a draft message, the reply button had no effect, as
the review dialog would only be populated with the existing draft (even
if it was empty).

With this change, we quote the original text before the current draft
message.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-10-02 16:50:59+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,['pull_request.py'],['7707aff5ebd6e99b4bf60834c8f522ca143aba94'],1,4,5,1,0.0,0.0,0.0
452765500843c3b7701718d2661fbe928d281461,"Post comments for all commits

Previously, only comments for the last commit were pushed to github. This means user could lose comments.

This changes the logic and create one review per commit that has
comments as the API doesn't expose a way to push comments to different
commits in the same review. It must be possible however, as the Github
UI allows posting comments to different commit in the same review.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-10-02 17:41:25+02:00,-7200,2021-10-02 18:08:52+02:00,-7200,True,False,['sync.py'],['001c42adcff446f16f6e9b159609fe0db0d564e1'],24,38,62,1,0.0,0.0,1.0
fd0d008122ad778a09e7992f06e7d6eccd9e06a4,"Hold PR that receive negative review before uploading a positive comment

When someone leaves a negative review on the PR while we have
a positive draft review in the pipes, mark the PR as hold so that it
doesn't look like the user is ignoring negative feedback.

This restores a gertty behavior that was mistakenly removed.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-10-02 18:03:44+02:00,-7200,2021-10-02 21:50:51+02:00,-7200,True,False,['sync.py'],['452765500843c3b7701718d2661fbe928d281461'],0,17,17,1,0.0,0.0,1.0
1c0047a458dc80716ba35a11be0ae453d458497a,"Add CHANGELOG.md

Create a changelog file in preparation of the first release.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-10-08 10:01:25+02:00,-7200,2021-10-08 10:10:40+02:00,-7200,True,False,['CHANGELOG.md'],['101b1a8a9757903a1f64de6553e91e6e3468cbb9'],0,16,16,1,,,
c8377fe8e6208fa47a4b0dc08117b254e8726873,"Update documentation

Publishing documentation at https://hubtty.readthedocs.io/ showed that
code blocks were rendered. It was using an incorrect syntax.

Also fix a broken link to hubtty source code and a comment that no
longer applies to hubtty.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-10-17 20:51:36+02:00,-7200,2021-10-17 20:51:36+02:00,-7200,True,False,"['README.rst', 'configuration.rst', 'usage.rst']",['1c0047a458dc80716ba35a11be0ae453d458497a'],28,28,56,3,,,
4bf461290deedbb6c50bf98ab59abd832e1157f9,"Add missing new lines

This is needed for the code-block directive to be recognized:
https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#directive-code-block",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-10-17 21:00:56+02:00,-7200,2021-10-17 21:00:56+02:00,-7200,True,False,['configuration.rst'],['c8377fe8e6208fa47a4b0dc08117b254e8726873'],0,6,6,1,,,
348a84dcb287c50dc8010b3645432a61697f85b6,"Import alembic.migration

This is needed for alembic >=1.7, though unfortunately goes entirely
unmentioned in its ChangeLog. Without adding the import, startup
raises this:

    AttributeError: module 'alembic' has no attribute 'migration'

Port commit bff537e87c from opendev.org/ttygroup/gertty",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-11-08 10:14:43+01:00,-3600,2021-11-08 10:14:43+01:00,-3600,True,False,['db.py'],['4bf461290deedbb6c50bf98ab59abd832e1157f9'],0,1,1,1,,,
9c9eab16a958a02db5c1514f3ecaf7086fe609be,Update changelog,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-11-08 10:22:37+01:00,-3600,2021-11-08 10:22:37+01:00,-3600,True,False,['CHANGELOG.md'],['f3f9328a4493f60c51b5055b82e75bf708991463'],0,4,4,1,,,
888750d0bc56a90338f49de8a55eabcffe14d080,Update homepage,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-11-09 14:31:56+01:00,-3600,2021-11-09 14:31:56+01:00,-3600,True,False,['setup.cfg'],['9c9eab16a958a02db5c1514f3ecaf7086fe609be'],1,1,2,1,,,
de859ba70ff9b3537a2a344aca8caf41c458066a,"Check for example file in user install path too

Depending on the installation type, either user or system installation,
the additional files will be at different location, returned by
`site.USER_BASE` and `sys.prefix` respectively.

We previously assumed system installation. This now accounts for both
installation type when copying the reference configuration file and
exists gracefully if the file can't be found for some reason.

https://docs.python.org/3/distutils/setupscript.html#installing-additional-files

Fixes #75",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-12-04 13:51:12+01:00,-3600,2021-12-04 14:00:16+01:00,-3600,True,False,['config.py'],['888750d0bc56a90338f49de8a55eabcffe14d080'],3,13,16,1,1.0,1.0,1.0
10b97dd50f60549d773be5452ea1b2635ab3cb85,"Document limitation with oauth device flow

Recommend using personal access tokens in order to be able to post
reviews in any organization.",Martin André,martin.andre@gmail.com,Martin André,martin.andre@gmail.com,2021-12-05 15:37:56+01:00,-3600,2021-12-05 16:25:52+01:00,-3600,True,False,"['authentication.rst', 'index.rst']",['888750d0bc56a90338f49de8a55eabcffe14d080'],0,52,52,2,,,
32b25f51af9cfe2c4686724c0f80d2c0dc089588,"Let user know about token issue on 403

Github may return a 403 error when using a token generated via the
device flow, and the organization has enabled 3rd party application
restriction. In which case we should use a personal access token.

With this commit we now inform the user about the token issue and
redirect him to the relevant hubtty documentation. The request will no
longer be retried until hubtty restarts.

Fixes #20.",Martin André,martin.andre@gmail.com,Martin André,m.andre@redhat.com,2021-12-05 23:00:23+01:00,-3600,2021-12-12 16:46:03+01:00,-3600,True,False,['sync.py'],['10b97dd50f60549d773be5452ea1b2635ab3cb85'],0,19,19,1,0.0,0.6666666666666666,0.6666666666666666
e44074253b9ecb41006fcc35e0591d0122cb49d8,"Update defaults in minimal-hubtty.yaml example file

So that the example file works out of the box and matches the other
example files.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-12-12 17:19:13+01:00,-3600,2021-12-12 17:19:13+01:00,-3600,True,False,['minimal-hubtty.yaml'],['5534bb1b955c63728cc8d4732eb11620eca3b9a2'],2,2,4,1,,,
198167563558b3382302caba54e29f3b51a4e689,"Doc: Remove outdated comment

Hubtty automatically copies the reference configuration file is none
exist already. It is no longer necessary to manually copy the
configuration file.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-12-12 17:21:35+01:00,-3600,2021-12-12 17:22:41+01:00,-3600,True,False,"['README.rst', 'configuration.rst']",['e44074253b9ecb41006fcc35e0591d0122cb49d8'],7,2,9,2,,,
934c9f495eff5429ef9dbfc9f3702702b021f3cd,Doc: prefer XDG path,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-12-12 17:39:34+01:00,-3600,2021-12-12 17:39:34+01:00,-3600,True,False,"['README.rst', 'configuration.rst', 'usage.rst']",['198167563558b3382302caba54e29f3b51a4e689'],14,12,26,3,,,
2b4dca60dca9287d5471132f82a377cae7c32d97,Doc: Enclose path with backticks,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-12-12 17:40:46+01:00,-3600,2021-12-12 17:40:46+01:00,-3600,True,False,['configuration.rst'],['934c9f495eff5429ef9dbfc9f3702702b021f3cd'],3,4,7,1,,,
fc4fbefb95b4122b9ae4b999aa26e9a81c63cca1,Doc: document default for log-file,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-12-12 17:41:21+01:00,-3600,2021-12-12 17:41:21+01:00,-3600,True,False,['configuration.rst'],['2b4dca60dca9287d5471132f82a377cae7c32d97'],1,1,2,1,,,
9b6633d523ce57e57c655b7ed307363e62ce4724,Update changelog,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2021-12-12 19:04:48+01:00,-3600,2021-12-12 19:04:48+01:00,-3600,True,False,['CHANGELOG.md'],['c7550e02eea5128fd3ffd17469515801c3650847'],0,6,6,1,,,
ecdba0b5fcdd03f5b871b9f564d1fef7ac10457a,"Highlight draft PRs

Based on gertty's commits 94310529ed and 363114eb7a.

Sadly, the github REST API does not yet allow changing the draft status
of the PRs [1] so we're limiting ourselves to showing draft PRs. We
would have to use their GraphQL API [2] for changing the draft status of
PRs, similar to what the github CLI client does [3].

Fixes #41.

[1] https://docs.github.com/en/rest/reference/pulls#update-a-pull-request
[2] https://docs.github.com/en/graphql
[3] https://github.com/cli/cli/blob/c8d5a6b/api/queries_pr.go#L687-L704",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-01-21 10:22:08+01:00,-3600,2022-01-21 14:05:00+01:00,-3600,True,False,"['1e41885ea284_add_draft_to_pull_request.py', 'db.py', 'palette.py', 'sync.py', 'pull_request.py']",['9b6633d523ce57e57c655b7ed307363e62ce4724'],5,49,54,5,0.7222222222222222,0.8333333333333334,0.8888888888888888
89fd071499581b3490315cb522d9d1a036f2d0ab,"Implement search for draft PRs

It's now possible to search for PRs based on their draft status with the
`draft: true` and `draft: false` queries.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-01-21 14:01:39+01:00,-3600,2022-01-21 14:05:23+01:00,-3600,True,False,"['parser.py', 'tokenizer.py']",['ecdba0b5fcdd03f5b871b9f564d1fef7ac10457a'],0,11,11,2,0.875,1.0,1.0
d17dc05ad3c4003552675de836b52baa24a4a58a,"Render file comments containing markdown

This commit adds initial support for rendering markdown.

We use the Mistune python markdown parser [1] to generate AST that we
then convert into Urwid text markup. Users can customize the appearance
of the markdown elements via the appropriate palette attributes.

[1] https://mistune.readthedocs.io/en/latest/",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-17 16:40:06+02:00,-7200,2022-06-17 16:51:35+02:00,-7200,True,False,"['markdown.py', 'palette.py', 'pull_request.py', 'requirements.txt']",['5c4c01c3ecc04bcc5d302aff41810c23462ed15d'],1,104,105,4,0.11764705882352941,0.11764705882352941,0.9558823529411765
689be08a2b32e6ae893e67180cad1e2ec47d4c6e,Only add blockcode info when it is specified,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-17 18:31:24+02:00,-7200,2022-06-17 18:31:24+02:00,-7200,True,False,['markdown.py'],['d17dc05ad3c4003552675de836b52baa24a4a58a'],1,4,5,1,0.0,0.0,1.0
71b0f5ecb6d977e4a49e7941ff6264b470c287f3,Handle image links,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-17 18:32:03+02:00,-7200,2022-06-17 18:32:03+02:00,-7200,True,False,['markdown.py'],['689be08a2b32e6ae893e67180cad1e2ec47d4c6e'],1,4,5,1,0.0,0.0,1.0
037a5cf9e003f822c39bed77e0b639c8e2f01e80,"Tweak codespan palette

It was previously too bright",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-17 18:32:32+02:00,-7200,2022-06-17 18:32:32+02:00,-7200,True,False,['palette.py'],['71b0f5ecb6d977e4a49e7941ff6264b470c287f3'],1,1,2,1,,,
bca32adc5bdc1e100bfe0dbe47d6f3a903f0134f,Render markdown for PR messages,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-17 18:33:57+02:00,-7200,2022-06-17 18:33:57+02:00,-7200,True,False,['pull_request.py'],['037a5cf9e003f822c39bed77e0b639c8e2f01e80'],5,1,6,1,1.0,1.0,1.0
bd1ce71391947cf6253ec21ec3c7762e8fe742f6,Render markdown for PR description,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-17 18:34:29+02:00,-7200,2022-06-17 18:34:29+02:00,-7200,True,False,['pull_request.py'],['bca32adc5bdc1e100bfe0dbe47d6f3a903f0134f'],1,2,3,1,0.0,1.0,0.0
930d1258cb0d4912f4bcd827b3c45d10ae1c8447,Fix block_text parsing,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-17 22:23:52+02:00,-7200,2022-06-17 22:23:52+02:00,-7200,True,False,['markdown.py'],['bd1ce71391947cf6253ec21ec3c7762e8fe742f6'],4,2,6,1,1.0,1.0,0.0
cadf36755a559ba1f2680a23c44e51de2c52761d,"Fix commentlink for messages that start with a @mention

The regex expect a blank char and we were no longer giving it.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-17 22:25:00+02:00,-7200,2022-06-17 22:25:00+02:00,-7200,True,False,['pull_request.py'],['930d1258cb0d4912f4bcd827b3c45d10ae1c8447'],1,6,7,1,0.0,0.0,0.0
3814286ac3aa099436bc263b9a63e373a7e92a7a,"Fix commentlink for PR description

We shouldn't wrap in a list if it's already a list.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-17 22:27:02+02:00,-7200,2022-06-17 22:27:02+02:00,-7200,True,False,['pull_request.py'],['cadf36755a559ba1f2680a23c44e51de2c52761d'],1,2,3,1,1.0,1.0,1.0
2cbf8f6d2f037772452368bf441a8b46e37b5c1a,"Fix extra empty lines

Empty comments were previously returned linebreaks when passed through
the markdown renderer. Let's return early in that case.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-20 10:21:49+02:00,-7200,2022-06-20 10:21:49+02:00,-7200,True,False,['markdown.py'],['3814286ac3aa099436bc263b9a63e373a7e92a7a'],0,3,3,1,1.0,1.0,1.0
ddd09ac65e16571ef300b96b28be9a0a5b4fbd18,Render comment links for inline comments too,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-06-20 10:23:16+02:00,-7200,2022-06-20 10:23:16+02:00,-7200,True,False,['pull_request.py'],['2cbf8f6d2f037772452368bf441a8b46e37b5c1a'],1,6,7,1,0.0,0.0,0.0
98416878955e540c6a5b96cf2b230f81a414e06f,Add support for thematic break,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-08-19 17:57:56+02:00,-7200,2022-08-19 17:57:56+02:00,-7200,True,False,"['markdown.py', 'palette.py']",['a06c98eb93248485caece3f2c87cd1d2603ee515'],0,3,3,2,0.0,0.0,1.0
9c0519678742b5ce341a2aee556ac9fdfae89f93,"Explicitly not support image types

To avoid logging warnings about unknown types.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-08-19 17:58:25+02:00,-7200,2022-08-19 17:58:25+02:00,-7200,True,False,['markdown.py'],['98416878955e540c6a5b96cf2b230f81a414e06f'],0,3,3,1,0.0,0.0,1.0
dc7e07bb0528931789f631b21a0c019e71aecd10,"Make paragraph stand out

This change adds a new line before paragraphs if needed to make them
stand out.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-08-19 17:59:34+02:00,-7200,2022-08-19 17:59:34+02:00,-7200,True,False,['markdown.py'],['9c0519678742b5ce341a2aee556ac9fdfae89f93'],0,50,50,1,0.0,0.0,1.0
109be6386607efe22e8077e6591827902ccbe285,Adjust light palette defaults for markdown elements,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-08-20 09:31:39+02:00,-7200,2022-08-20 09:31:39+02:00,-7200,True,False,['palette.py'],['dc7e07bb0528931789f631b21a0c019e71aecd10'],0,5,5,1,,,
cd4bd8b89e9f01b0fd25ad0640d18c11e525fd84,Update changelog,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-08-20 09:45:25+02:00,-7200,2022-08-20 09:45:25+02:00,-7200,True,False,['CHANGELOG.md'],['0233b123d9f9f958e7f2a29b903336ff83fbb1d7'],0,5,5,1,,,
5ee5ad045215cbefe019278db7450d625e80d2b7,"Add a commentlink for Jira in openshift example config

The OpenShift organization recently moved to Jira as their bug tracker.
This matcher replaces string in the form PROJECTNAME-NUM, and link it to
the OpenShift jira instance.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-09-08 17:53:34+02:00,-7200,2022-09-08 17:53:34+02:00,-7200,True,False,['openshift-hubtty.yaml'],['cd4bd8b89e9f01b0fd25ad0640d18c11e525fd84'],0,6,6,1,,,
c8a84f790cf6bee859c2594d3b863cb018881502,"Display label colors

Show the label color as it is set in github, provided the terminal knows
how to render 24 bit colors.",Martin André,martin.andre@gmail.com,Martin André,m.andre@redhat.com,2022-09-09 21:57:45+02:00,-7200,2022-09-10 21:12:52+02:00,-7200,True,False,"['app.py', 'db.py', 'pull_request.py']",['cd4bd8b89e9f01b0fd25ad0640d18c11e525fd84'],2,12,14,3,0.2222222222222222,0.2222222222222222,0.3333333333333333
55579557759160f464c83dc8d6dc1d934f05b2b5,"Adjust foreground color depending on the background

Show bright text on dark background and vice-versa. We convert the color
to the HLS coordinates (Hue Lightness Saturation) to get the Lightness.

The threshold of 110 was picked more or less arbitrary. It looked OK on
the various label colors I tested.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-09-09 22:50:42+02:00,-7200,2022-09-10 21:40:24+02:00,-7200,True,False,['app.py'],['c8a84f790cf6bee859c2594d3b863cb018881502'],1,8,9,1,0.0,0.0,0.0
66c36fd3fea3944204bfc5b69f61155d56c8e5a7,"Register palette entry on new label

When hubtty detects a label it doesn't know about, it should create the
corresponding palette entry.

Sadly, it appears urwid does not offer the ability to update or delete
a palette entry. We can't update the color of an existing label when it
was changed in github. We'll have to wait for the user to restart hubtty
to get the new color.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-09-10 21:05:48+02:00,-7200,2022-09-10 21:45:50+02:00,-7200,True,False,"['app.py', 'sync.py', 'pull_request.py']",['55579557759160f464c83dc8d6dc1d934f05b2b5'],11,14,25,3,1.0,1.0,0.3333333333333333
cb52e92844f4a2684445905e2188ce2791d74694,Show label colors in label edit dialog,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-09-10 21:11:39+02:00,-7200,2022-09-10 21:45:50+02:00,-7200,True,False,['pull_request.py'],['66c36fd3fea3944204bfc5b69f61155d56c8e5a7'],0,2,2,1,0.0,1.0,0.0
c765d4d87a9eddae470d6a8ade18a897a746c5ca,"Get default label color dynamically based on active palette

Respect the user setting for the default color of labels.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-09-10 21:32:13+02:00,-7200,2022-09-10 21:45:50+02:00,-7200,True,False,"['app.py', 'palette.py']",['cb52e92844f4a2684445905e2188ce2791d74694'],1,6,7,2,1.0,1.0,0.6666666666666666
21d3aa7ef09944c04343bb05503b51f4c73149a9,"Only enable colored labels if terminal supports true colors

Do not try to show fancy colors if the terminal doesn't support them.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-09-10 22:27:24+02:00,-7200,2022-09-10 22:27:24+02:00,-7200,True,False,"['app.py', 'pull_request.py']",['c765d4d87a9eddae470d6a8ade18a897a746c5ca'],3,7,10,2,0.0,0.6666666666666666,0.0
c7dae01dc20c7778f9d94b4af3764432ed604c1e,"Allow syncing parentless commits

The sync would otherwise throw an out of range index error for
parent-less commits.

Fixes #87.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-10-10 16:26:39+02:00,-7200,2022-10-10 16:26:39+02:00,-7200,True,False,['sync.py'],['f52473e8c80c4df288132eecbadc34f193a68ba1'],1,6,7,1,0.0,0.0,1.0
91df113757a714361157b46856bab0ec8043fc25,Make it obvious the commit has no parents,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-10-10 17:59:56+02:00,-7200,2022-10-10 17:59:56+02:00,-7200,True,False,['sync.py'],['c7dae01dc20c7778f9d94b4af3764432ed604c1e'],3,3,6,1,,,
1b94b2bac9d2d4937d864909890565755ce0cb65,"Clean outdated commits at the end of SyncPullRequestTask()

This ensures the comments or messages still exist in the session at the
time we're looking for them. If we remove outdated commits too soon,
this could inadvertently delete associated comments or messages.

Fixes #90.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-12-01 18:55:56+01:00,-3600,2022-12-01 19:00:38+01:00,-3600,True,False,['sync.py'],['8a09e9e4416c0c9c6e1ba1c92f104e745e2012d9'],7,9,16,1,,,
cfcd3d8bf0c64f2dfffac9e9da7a463cd856a68f,"Use Github's versioned API

Github introduced a date-based API versioning [1]. Make use of it to avoid
surprises.

[1] https://github.blog/2022-11-28-to-infinity-and-beyond-enabling-the-future-of-githubs-rest-api-with-api-versioning/",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-12-02 11:57:33+01:00,-3600,2022-12-02 11:57:33+01:00,-3600,True,False,['sync.py'],['dc77f85c70fb780760e99dabb673afc444d05c39'],5,11,16,1,0.0,0.8333333333333334,0.0
056ba63e490f18cfc279bf5a66e0551783e88d89,Update changelog,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-12-02 12:17:23+01:00,-3600,2022-12-02 12:17:23+01:00,-3600,True,False,['CHANGELOG.md'],['9bcd088cebe92db90fd086b6920e0dfc810c9a88'],0,8,8,1,,,
dd4a042a7888141aff135a0a94c58d481d09708a,"Remove debug log

The debug log slipped in 1b94b2b and should be removed.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2022-12-12 11:44:30+01:00,-3600,2022-12-12 11:44:30+01:00,-3600,True,False,['sync.py'],['056ba63e490f18cfc279bf5a66e0551783e88d89'],1,0,1,1,1.0,1.0,0.0
a93306927cc8931c8273c4f9f77de7ccbaabd024,"Skip approval when review is not tied to a commit

There seems to be a recent change to the github API, where some reviews no
longer have an associated commit sha. In that case, skip the approval to
prevent a stack trace, and the PR being marked as outdated.

Fix #94",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2023-09-19 14:34:09+02:00,-7200,2023-09-19 14:39:42+02:00,-7200,True,False,['sync.py'],['dd4a042a7888141aff135a0a94c58d481d09708a'],1,1,2,1,,,
ed32ca8ffab751ca573382d4e6584ff88fe7bd6f,Require v2 for mistune,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2023-09-21 17:15:59+02:00,-7200,2023-09-21 17:15:59+02:00,-7200,True,False,['requirements.txt'],['e347e4a8b49555637f887e015ac32c528dc19968'],1,1,2,1,,,
1dc8a4be4560a9b16f11b2370fefbcb7c6d1f539,"Require urwid 2.2.0 as minimum version

This fixes a bug with nested markup that could manifest when rendering
markdown.",Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2023-09-21 17:31:04+02:00,-7200,2023-09-21 17:31:04+02:00,-7200,True,False,['requirements.txt'],['ed32ca8ffab751ca573382d4e6584ff88fe7bd6f'],1,1,2,1,,,
5012ed0a7cdb22a6e12d29cae2dc15f41d399f06,Pin mistune to v2,Martin André,m.andre@redhat.com,Martin André,m.andre@redhat.com,2024-01-03 09:44:38+01:00,-3600,2024-01-03 09:44:38+01:00,-3600,True,False,['requirements.txt'],['083e0cfdba33fa387a6a51ec935148582abd08a1'],1,1,2,1,,,
